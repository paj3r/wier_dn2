(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{589:function(e,t,n){"use strict";t.a={BROADCAST_REQUEST_ERROR:"BROADCAST_REQUEST_ERROR",BROADCAST_ENDED_NO_REPLAY:"BROADCAST_ENDED_NO_REPLAY",BROADCAST_NOT_FOUND:"BROADCAST_NOT_FOUND",CONFIG_USER_DATA_NETWORK_ERROR:"CONFIG_USER_DATA_NETWORK_ERROR",CONFIG_NETWORK_ERROR:"CONFIG_NETWORK_ERROR",DMCA_TAKEDOWN_ERROR:"DMCA_TAKEDOWN_ERROR",EUROPEAN_COPYRIGHT_VIOLATION:"EUROPEAN_COPYRIGHT_VIOLATION",LIVE_PARSE_ERROR:"LIVE_PARSE_ERROR",LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID:"LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID",LIVE_STREAM_ACQUISITION_NETWORK_ERROR:"LIVE_STREAM_ACQUISITION_NETWORK_ERROR",LIVE_VIDEO_GEOBLOCK_ERROR:"LIVE_VIDEO_GEOBLOCK_ERROR",LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:"LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR",LIVE_VIDEO_GEOLOCATION_PROMPT:"LIVE_VIDEO_GEOLOCATION_PROMPT",LIVE_VIDEO_NO_COOKIES_ERROR:"LIVE_VIDEO_NO_COOKIES_ERROR",MEDIA_NOT_SUPPORTED:"MEDIA_NOT_SUPPORTED",MEDIA_SRC_INVALID_ERROR:"MEDIA_SRC_INVALID_ERROR",MEDIA_ABORTED:"MEDIA_ABORTED",MEDIA_NETWORK_ERROR:"MEDIA_NETWORK_ERROR",MEDIA_DECODE_ERROR:"MEDIA_DECODE_ERROR",MEDIA_GEOBLOCK_ERROR:"MEDIA_GEOBLOCK_ERROR",MEDIA_TEARDOWN_ERROR:"MEDIA_TEARDOWN_ERROR",MEDIA_UNKNOWN_CODE_ERROR:"MEDIA_UNKNOWN_CODE_ERROR",ORIGINAL_CONTEXT_DELETED:"ORIGINAL_CONTEXT_DELETED",PICTURE_IN_PICTURE_ERROR:"PICTURE_IN_PICTURE_ERROR",UNSUPPORTED_TYPE:"UNSUPPORTED_TYPE",VMAP_NETWORK_ERROR:"VMAP_NETWORK_ERROR",VMAP_PARSE_ERROR:"VMAP_PARSE_ERROR"}},590:function(e,t,n){"use strict";n.d(t,"n",(function(){return i})),n.d(t,"j",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"v",(function(){return s})),n.d(t,"bb",(function(){return c})),n.d(t,"s",(function(){return u})),n.d(t,"Y",(function(){return d})),n.d(t,"y",(function(){return l})),n.d(t,"eb",(function(){return h})),n.d(t,"G",(function(){return p})),n.d(t,"mb",(function(){return f})),n.d(t,"F",(function(){return v})),n.d(t,"lb",(function(){return y})),n.d(t,"r",(function(){return E})),n.d(t,"X",(function(){return m})),n.d(t,"B",(function(){return g})),n.d(t,"hb",(function(){return T})),n.d(t,"w",(function(){return _})),n.d(t,"cb",(function(){return b})),n.d(t,"l",(function(){return I})),n.d(t,"T",(function(){return R})),n.d(t,"C",(function(){return S})),n.d(t,"ib",(function(){return P})),n.d(t,"J",(function(){return O})),n.d(t,"pb",(function(){return C})),n.d(t,"x",(function(){return k})),n.d(t,"db",(function(){return w})),n.d(t,"d",(function(){return A})),n.d(t,"N",(function(){return L})),n.d(t,"A",(function(){return D})),n.d(t,"fb",(function(){return M})),n.d(t,"z",(function(){return N})),n.d(t,"gb",(function(){return U})),n.d(t,"H",(function(){return x})),n.d(t,"nb",(function(){return F})),n.d(t,"I",(function(){return V})),n.d(t,"ob",(function(){return j})),n.d(t,"h",(function(){return B})),n.d(t,"Q",(function(){return W})),n.d(t,"D",(function(){return G})),n.d(t,"jb",(function(){return H})),n.d(t,"p",(function(){return K})),n.d(t,"W",(function(){return Q})),n.d(t,"o",(function(){return J})),n.d(t,"V",(function(){return Y})),n.d(t,"e",(function(){return z})),n.d(t,"O",(function(){return q})),n.d(t,"q",(function(){return X})),n.d(t,"U",(function(){return Z})),n.d(t,"E",(function(){return $})),n.d(t,"kb",(function(){return ee})),n.d(t,"b",(function(){return te})),n.d(t,"L",(function(){return ne})),n.d(t,"c",(function(){return ie})),n.d(t,"M",(function(){return re})),n.d(t,"i",(function(){return ae})),n.d(t,"R",(function(){return oe})),n.d(t,"a",(function(){return se})),n.d(t,"K",(function(){return ce})),n.d(t,"g",(function(){return ue})),n.d(t,"P",(function(){return de})),n.d(t,"u",(function(){return le})),n.d(t,"ab",(function(){return he})),n.d(t,"t",(function(){return pe})),n.d(t,"Z",(function(){return fe})),n.d(t,"k",(function(){return ve})),n.d(t,"S",(function(){return ye}));var i={PAUSE_REQUESTED:"PAUSE_REQUESTED",PLAY_REQUESTED:"PLAY_REQUESTED"},r={MUTE_REQUESTED:"MUTE_REQUESTED",UNMUTE_REQUESTED:"UNMUTE_REQUESTED"},a={CAPTIONS_ON_REQUESTED:"CAPTIONS_ON_REQUESTED",CAPTIONS_OFF_REQUESTED:"CAPTIONS_OFF_REQUESTED",CAPTIONS_RESET_REQUESTED:"CAPTIONS_RESET_REQUESTED"},o={PICTURE_IN_PICTURE_ON_REQUESTED:"PICTURE_IN_PICTURE_ON_REQUESTED",PICTURE_IN_PICTURE_OFF_REQUESTED:"PICTURE_IN_PICTURE_OFF_REQUESTED"},s="REQUEST_PLAY",c=function(e){return{type:s,playerId:e}},u="REQUEST_PAUSE",d=function(e){return{type:u,playerId:e}},l="REQUEST_REPLAY",h=function(e){return{type:l,playerId:e}},p="VIDEO_PLAYED",f=function(e){return{type:p,playerId:e}},v="VIDEO_PAUSED",y=function(e){return{type:v,playerId:e}},E="REQUEST_MUTE",m=function(e){return{type:E,playerId:e}},g="REQUEST_UNMUTE",T=function(e){return{type:g,playerId:e}},_="REQUEST_PLAYBACK_RATE_CHANGE",b=function(e,t){return{type:_,playbackRate:t,playerId:e}},I="PLAYBACK_RATE_CHANGED",R=function(e,t){return{type:I,playbackRate:t,playerId:e}},S="REQUEST_VOLUME_CHANGE",P=function(e,t){return{type:S,volume:t,playerId:e}},O="VIDEO_VOLUME_CHANGED",C=function(e,t,n){return{type:O,isMuted:t,volume:n,playerId:e}},k="REQUEST_PLAYBACK_TIME_RANGE",w=function(e,t,n){return{type:k,startTimeS:t,endTimeS:n,playerId:e}},A="CANCEL_PLAYBACK_TIME_RANGE",L=function(e){return{type:A,playerId:e}},D="REQUEST_SCRUB_TO_FRACTION",M=function(e,t){return{type:D,fraction:t,playerId:e}},N="REQUEST_SCRUBBING_CHANGE",U=function(e,t){return{type:N,isScrubbing:t,playerId:e}},x="VIDEO_SEEKED",F=function(e,t){return{type:x,lastFulfilledSeek:t,playerId:e}},V="VIDEO_SEEKING",j=function(e){return{type:V,playerId:e}},B="HIDE_CONTROLS",W=function(e){return{type:B,playerId:e}},G="SHOW_CONTROLS",H=function(e){return{type:G,playerId:e}},K="REQUEST_CAPTIONS_ON",Q=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:K,isUserSet:t,playerId:e}},J="REQUEST_CAPTIONS_OFF",Y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:J,isUserSet:t,playerId:e}},z="CAPTIONS_TOGGLED",q=function(e,t){return{type:z,areCaptionsShown:t,playerId:e}},X="REQUEST_CAPTION_DEFAULT_OFFSET",Z=function(e,t){var n=t.bottom;return{type:X,offset:{bottom:n},playerId:e}},$="UPDATE_VISIBILITY",ee=function(e,t,n,i){return{type:$,playerId:e,percentVisible:t,percentOfViewportOccupied:n,sizesInfo:i}},te="CALL_TO_ACTION_CLICKED",ne=function(e){return{type:te,playerId:e}},ie="CALL_TO_ACTION_IMPRESSION",re=function(e){return{type:ie,playerId:e}},ae="LIVE_CLICKTHROUGH_CLICKED",oe=function(e){return{type:ae,playerId:e}},se="AUTOPLAY_DISABLED",ce=function(e){return{type:se,playerId:e}},ue="DATA_USAGE_COLLECTED",de=function(e,t){return{type:ue,playerId:e,bytes:t}},le="REQUEST_PICTURE_IN_PICTURE_ON",he=function(e){return{type:le,playerId:e}},pe="REQUEST_PICTURE_IN_PICTURE_OFF",fe=function(e){return{type:pe,playerId:e}},ve="PICTURE_IN_PICTURE_MODE_TOGGLED",ye=function(e,t){return{type:ve,playerId:e,inPiPMode:t}}},591:function(e,t,n){"use strict";n.d(t,"c",(function(){return B})),n.d(t,"e",(function(){return G})),n.d(t,"a",(function(){return K})),n.d(t,"f",(function(){return Q})),n.d(t,"b",(function(){return J})),n.d(t,"i",(function(){return z})),n.d(t,"g",(function(){return q})),n.d(t,"j",(function(){return X})),n.d(t,"d",(function(){return Z}));var i=n(36),r=n.n(i),a=n(45),o=n.n(a),s=n(2),c=n.n(s),u=(n(252),n(20),n(87),n(32),n(613)),d=n(749),l=n(634),h=(n(253),n(80),n(8)),p=n.n(h),f=n(9),v=n.n(f),y=n(589),E=n(612),m=n(620),g=function(){function e(t){p()(this,e),this.httpClient=t}return v()(e,[{key:"load",value:function(e){return this.httpClient?function(e,t){var n;if(!T(t))return Promise.resolve(t);var i=t.source.id,r=t.source.mediaKey,a=Object(E.d)(t,0),o=function(e){var t=e.broadcastId;return{broadcastId:t,contentId:e.mediaKey,contentType:"broadcast",displayType:"content",expandedUrl:"https://twitter.com/i/spaces/".concat(t),playbackType:"application/x-mpegURL",shouldLoop:!1,unavailableInPeriscope:!0}}({broadcastId:i,mediaKey:r});return Promise.resolve(c()(c()({},t),{},{client:"web",tracks:[c()(c()(c()({},a),o),{},{id:0,isLive:null===(n=t.source.isLive)||void 0===n||n})],currentTrackId:0,source:c()(c()({},t.source),{},{trackId:0})}))}(this.httpClient,e):Promise.reject(y.a.MEDIA_TEARDOWN_ERROR)}}]),e}(),T=function(e){return e.source&&e.source.type===m.a.AUDIO_SPACE},_=(n(372),n(152),n(88),n(652)),b=n(40),I=n.n(b);n(17),n(256),n(99);var R=/^[0-9]{1,6}(\.[0-9]+)?$/,S=/^([0-9]{0,3}[hH])?([0-9]{0,2}[mM])?([0-9]{0,6}[sS])?$/,P=n(693),O=(n(60),n(79),n(101),n(206),n(207),n(41),["videoConfig"]),C=["track","translations"],k={features:{fatalErrorRetryMax:3},translations:{}},w=function(){function e(t,n){p()(this,e),this.httpClient=t,this.logger=n}return v()(e,[{key:"load",value:function(e,t){var n=this;if(!this.httpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var i=e.videoConfig,a=r()(e,O);return(i&&(i.vmapUrl||e.videoConfig.variants&&e.videoConfig.variants.length>0)?this.loadStaticConfigState(i,e.source):this.loadDynamicConfigState(e.source,i,t)).then((function(e){return n.convertConfigStateToPlayerState(e,a,t)}))}},{key:"loadStaticConfigState",value:function(e,t){var n=this,i=function(){try{return JSON.parse(window.sessionStorage.getItem("TwitterVideoPlayerUserConfig"))}catch(e){}}(),r={eventId:e.eventId,posterImage:e.poster,track:{contentId:e.contentId,contentType:e.contentType,cta:e.cta,durationMs:e.durationMs,expandedUrl:e.expandedUrl,mediaAvailability:e.mediaAvailability,publisherId:e.publisherId,shouldLoop:e.loop,variants:e.variants,viewCount:e.viewCount,vmapUrl:e.vmapUrl}};if(!e.shouldLoadTranslations||!this._shouldLoadStaticConfig(t))return Promise.resolve(c()(c()({},k),r));var a=this.httpClient.dispatch({method:"GET",path:"/1.1/videos/static/config.json",host:"https://api.twitter.com"}).then((function(e){if(200!==e.status)throw new Error("".concat(y.a.CONFIG_USER_DATA_NETWORK_ERROR,":").concat(e.status));var t=JSON.parse(e.body);return function(e){try{window.sessionStorage.setItem("TwitterVideoPlayerUserConfig",JSON.stringify(e))}catch(e){}}(t),t}),(function(){throw new Error(y.a.CONFIG_USER_DATA_NETWORK_ERROR)})).catch((function(e){return n.logger.log("ConfigurationLoader","failed to load static configuration: ".concat(e)),c()({},k)}));return(i?Promise.resolve(i):a).then((function(e){var t=e.features,n=e.translations;return c()(c()({},r),{},{features:t,translations:n})}))}},{key:"loadDynamicConfigState",value:function(e,t,n){if(e.type===m.a.BROADCAST&&t&&!t.shouldLoadTranslations||e.type===m.a.AUDIO_SPACE)return Promise.resolve(c()({},k));try{return this.httpClient.dispatch({method:"GET",path:this.getApiEndpointForPlayerSource(e),host:"https://api.twitter.com",params:{bitrate_cap:n.bitrateCap}}).then((function(e){if(200!==e.status)throw new Error("".concat(y.a.CONFIG_NETWORK_ERROR,":").concat(e.status));var n=JSON.parse(e.body);return t&&t.poster&&(n.posterImage=t.poster),n}),(function(){throw new Error(y.a.CONFIG_NETWORK_ERROR)}))}catch(e){return Promise.reject(e)}}},{key:"convertConfigStateToPlayerState",value:function(e,t,n){var i,a,o=e.track,s=e.translations,u=r()(e,C),d=n.reloadTimecode,l=function(e){if(R.test(e))return+e;var t=S.exec(e);if(t&&t[0]){var n=I()(t,4),i=n[1],r=n[2],a=n[3],o=0;return i&&(o+=3600*+i.slice(0,-1)),r&&(o+=60*+r.slice(0,-1)),a&&(o+=+a.slice(0,-1)),o}}(n.requestedTimecode),h=l>0||0===l?l:-1;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e}(s),o&&(a=o.mediaAvailability,n.maxLoopCount&&(o.maxLoopCount=n.maxLoopCount,o.loopCounter=0),o.variants&&o.variants.length>0?i=o.variants:o.playbackUrl&&o.playbackType&&(i=[{src:o.playbackUrl,type:o.playbackType}])),Object(P.a)()&&(i=Object(E.a)(i));var p,f=Object(_.a)(a);if(f)switch(f){case y.a.ORIGINAL_CONTEXT_DELETED:case y.a.DMCA_TAKEDOWN_ERROR:throw new Error(f);case y.a.EUROPEAN_COPYRIGHT_VIOLATION:throw(p=new Error(f)).copyrightHolder=a.unavailability_info.copyright_holder_name,p}return c()(c()(c()({},t),u),{},{tracks:[c()(c()({},o),{},{id:0,displayType:"content",requestedTimecode:h,reloadTimecode:d,rotation:0,variants:i,currentVariantIndex:0})],currentTrackId:0,source:c()(c()({},t.source),{},{trackId:0}),mediaAvailability:a})}},{key:"getApiEndpointForPlayerSource",value:function(e){switch(e.type){case m.a.TWEET:var t=e.index>0?"/".concat(e.index):"";return"".concat("/1.1/videos/","tweet/config/").concat(e.id).concat(t,".json");case m.a.AUDIO_SPACE:case m.a.BROADCAST:return"".concat("/1.1/videos/","broadcast/config/").concat(e.id,".json");case m.a.DM:return"".concat("/1.1/videos/","dm/config/").concat(e.id,".json");default:throw new Error("".concat(y.a.UNSUPPORTED_TYPE,":").concat(e.type))}}},{key:"_shouldLoadStaticConfig",value:function(e){return e.type!==m.a.STATIC_BROADCAST}}]),e}(),A=n(633),L=["cookieSetUrl"],D="error",M="playback",N=function(){function e(t,n,i,r,a){p()(this,e),this.dispatch=t,this.httpClient=n,this.twitterAuthedHttpClient=i,this.playerId=r,this.showGeolocationPrompt=a}return v()(e,[{key:"load",value:function(e){if(!this.httpClient||!this.twitterAuthedHttpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var t=e.tracks[0];return"live"!==t.contentType&&"broadcast"!==t.contentType?Promise.resolve(e):t.contentId?this.getUserPermission(t).then(this.getUserGeolocation.bind(this)).then(this.parseGeolocationData.bind(this)).then(this.acquireLiveStream.bind(this,e)).then(this.parseStreamAcquisitionResponse.bind(this)).then(this.setCookies.bind(this)).then(this.checkCookies.bind(this)).catch(this.handleRejectedPromises.bind(this)).then((function(n){var i=n.broadcastShareUrl,r=n.chatToken,a=n.isLiveTimecode,o=n.lifecycleToken,s=n.playbackUrl,u=n.restrictions;if(void 0!==u){if(void 0!==u.find((function(e){return"geoblocked"===e.restriction})))throw new Error(y.a.LIVE_VIDEO_GEOBLOCK_ERROR);var d=u.find((function(e){return"copyright-violation"===e.restriction}));if(void 0!==d){var l,h=d.copyright_violation_type;l=void 0!==h&&"TYPE_1"===h?y.a.EUROPEAN_COPYRIGHT_VIOLATION:y.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR;var p=new Error(l);throw p.copyrightHolder=d.copyright_violation_copyright_holder_name,p}}return c()(c()({},e),{},{tracks:[c()(c()({},t),{},{isLive:"live"===t.contentType||t.isLive,isLiveTimecode:a,variants:[{src:s,type:"application/x-mpegURL"}],lifecycleToken:o,chatToken:r,broadcastShareUrl:i})]})})):Promise.reject(Error(y.a.LIVE_STREAM_ACQUISITION_MISSING_CONTENT_ID))}},{key:"getUserPermission",value:function(e){return e.isEventGeoblocked?this.showGeolocationPrompt?Promise.resolve({shouldGetGeolocation:!0}):"permissions"in navigator?navigator.permissions.query({name:"geolocation"}).then((function(e){var t="granted"===e.state;return Promise.resolve({shouldGetGeolocation:t})})):Promise.resolve({shouldGetGeolocation:!1}):Promise.resolve({shouldGetGeolocation:!1})}},{key:"getUserGeolocation",value:function(e){return e.shouldGetGeolocation&&"geolocation"in navigator?(this.dispatch(Object(u.g)(this.playerId)),new Promise((function(e){navigator.geolocation.getCurrentPosition((function(t){return e(t)}),(function(){return e()}))}))):Promise.resolve()}},{key:"parseGeolocationData",value:function(e){return Promise.resolve({latitude:e&&e.coords.latitude,longitude:e&&e.coords.longitude})}},{key:"acquireLiveStream",value:function(e,t){var n=this,i=this.getLiveStreamAcquisitionDetails(e,t),r=i.isLiveTimecode,a=i.params,o=i.path;return this.twitterAuthedHttpClient.dispatch({host:"https://api.twitter.com",method:"GET",params:a,path:o}).then((function(e){return e.status<200||e.status>=400?Promise.reject({type:D,reason:y.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR}):(n.dispatch(Object(u.f)(n.playerId)),Promise.resolve({body:e.body,isLiveTimecode:r}))}),(function(){return Promise.reject({type:D,reason:y.a.LIVE_STREAM_ACQUISITION_NETWORK_ERROR})}))}},{key:"getLiveStreamAcquisitionDetails",value:function(e,t){var n=t.latitude,i=t.longitude,r=e.client,a=e.source,o=a&&a.trackId||0,s=e.tracks[o],c={client:r,use_syndication_guest_id:"tfw"===r,lat:n,lng:i,cookie_set_host:new A.a(window.location.href).getHostname()},u=e.features&&e.features.isLiveTimecodeEnabled&&(s.requestedTimecode>0||0===s.requestedTimecode);return u&&(c.latest_replay_playlist=!0),{params:c,isLiveTimecode:u,path:"".concat("/1.1/live_video_stream/status/").concat(s.contentId)}}},{key:"parseStreamAcquisitionResponse",value:function(e){var t=JSON.parse(e.body);return t&&t.source&&t.source.noRedirectPlaybackUrl?Promise.resolve({cookieSetUrl:t.source.cookieSetUrl,isLiveTimecode:e.isLiveTimecode,playbackUrl:t.source.noRedirectPlaybackUrl,lifecycleToken:t.lifecycleToken,chatToken:t.chatToken,broadcastShareUrl:t.shareUrl,restrictions:t.restrictions}):Promise.reject({type:D,reason:y.a.LIVE_PARSE_ERROR})}},{key:"setCookies",value:function(e){var t=e.cookieSetUrl,n=r()(e,L);return t?this.httpClient.dispatch({method:"GET",path:t,host:"",withCredentials:!0}).then((function(){return Promise.resolve(e)}),(function(){return Promise.reject({type:M,payload:n})})):Promise.reject({type:M,payload:n})}},{key:"checkCookies",value:function(e){var t=new A.a(e.cookieSetUrl);return window.location.host===t.getHostname()?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:"https://t.lv.twimg.com/live_video_stream/cookie_check",host:"",withCredentials:!0}).then((function(t){return 400!==t.status?Promise.resolve(e):Promise.reject({type:D,reason:y.a.LIVE_VIDEO_NO_COOKIES_ERROR})}),(function(){return Promise.reject({type:D,reason:y.a.LIVE_VIDEO_NO_COOKIES_ERROR})}))}},{key:"handleRejectedPromises",value:function(e){if(e.type===M)return Promise.resolve(e.payload);var t=e.reason?new Error(e.reason):e;return Promise.reject(t)}}]),e}(),U=(n(729),n(259),function(){function e(t){p()(this,e),this.httpClient=t}return v()(e,[{key:"load",value:function(e){var t=this;if(!this.httpClient)return Promise.reject(y.a.MEDIA_TEARDOWN_ERROR);var n=e.tracks[0];return"vmap"!==n.contentType?Promise.resolve(e):this.httpClient.dispatch({method:"GET",path:n.vmapUrl,host:"",withCredentials:!1}).then((function(i){if(i.status<200||i.status>=400)throw new Error(y.a.VMAP_NETWORK_ERROR);var r=t.parseVmap(i.body);return c()(c()({},e),{},{tracks:[c()(c()({},n),r)]})}),(function(){throw new Error(y.a.VMAP_NETWORK_ERROR)}))}},{key:"parseVmap",value:function(e){var t=(new window.DOMParser).parseFromString(e,"application/xml").getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","content")[0];if(void 0===t)throw new Error(y.a.VMAP_PARSE_ERROR);var n=t.getElementsByTagName("MediaFile")[0];if(void 0===n)throw new Error(y.a.VMAP_PARSE_ERROR);var i=n.textContent.trim().replace(/^http:\/\/amp\.twimg\.com\//,"https://amp.twimg.com/"),r=n.getAttribute("type")||function(e){var t=new A.a(e).getPath();return".m3u8"===t.slice(t.lastIndexOf("."))?"application/x-mpegURL":"video/mp4"}(i);return{publisherId:t.getAttribute("ownerId"),contentId:t.getAttribute("contentId"),variants:[{src:i,type:r}],cta:this.getCta(t)}}},{key:"getCta",value:function(e){var t=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_open_url")[0],n=e.getElementsByTagNameNS("http://twitter.com/schema/videoVMapV2.xsd","cta_watch_now")[0];return void 0!==t?{type:"url",url:t.getAttribute("url")}:void 0!==n?{type:"watch",url:n.getAttribute("url")}:void 0}}]),e}()),x=function(e,t,n,i,r,a,o){return[new w(n,o),new g(n),new l.b(n,a),new U(t),new N(e,t,n,i,r)]},F=function(e,t,n,i){var r=Promise.resolve({source:e,videoConfig:t});return n.reduce((function(e,t){return e.then((function(e){return t.load(e,i)}))}),r)},V=n(614),j=["cta","isLive","viewCount","viewerCount"],B="CONFIGURE_PLAYER",W=function(e,t,n,i,r,a,o,s,c){return{type:B,source:t,session:n,analytics:i,playerId:e,adProvider:r,videoConfig:a,promotedContext:o,initiallyMutedCaptions:s,intentToPlayTime:c}},G="RELOADING_PLAYER",H=function(e,t,n){return{type:G,playerId:e,source:t,session:n}},K="BROADCAST_UPDATED",Q=function(e,t){return{type:K,updatedState:t,playerId:e}},J="CONFIGURATION_LOADED",Y=function(e,t){return{type:J,playerState:t,playerId:e}},z=function(e,t){return{type:"FEATURES_LOADED",features:t,playerId:e}},q=function(e,t,n,i,r,a,o,s){var c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{},d=arguments.length>9?arguments[9]:void 0;return function(h){return h(W(e,t,i,r,a,n,c.promotedContext,c.initiallyMutedCaptions,c.intentToPlayTime)),F(t,n,x(h,Object(V.c)(e),Object(V.e)(e),e,c.showGeolocationPrompt,c.includeBroadcastEventAssociation,d),c).then((function(t){if(h(Y(e,t)),o(),Object(l.c)(t)){var n=t.source.id,i=new l.a(h,Object(V.e)(e),e,n,c.includeBroadcastEventAssociation);return i.queueUpdate(t.isLive).catch((function(t){h(Object(u.d)(e,t))})),i}})).catch((function(t){h(Object(u.d)(e,t)),s()}))}},X=function(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s=arguments.length>7?arguments[7]:void 0;return function(c){return c(H(e,t,i)),F(t,n,x(c,Object(V.c)(e),Object(V.e)(e),e,o.showGeolocationPrompt,o.includeBroadcastEventAssociation,s),o).then((function(t){c(Y(e,t)),r()})).catch((function(t){c(Object(u.d)(e,t)),a()}))}},Z=(t.h=function(e,t){switch(t.type){case B:case G:return c()(c()(c()({},e),t.promotedContext),{},{source:t.source,session:t.session,playerId:t.playerId,configuration:{loading:!0}});case J:var n=e.currentTrackId?e.currentTrackId:t.playerState.currentTrackId,i=[].concat(o()(t.playerState.tracks||[]),o()(e.tracks||[]));return t.playerState.features.isDebuggingEnabled&&(d.a.debuggingEnabled=!0),c()(c()(c()({},e),t.playerState),{},{currentTrackId:n,features:c()(c()({},e.features),t.playerState.features),tracks:i,configuration:{loading:!1}});case"FEATURES_LOADED":return c()(c()({},e),{},{features:c()(c()({},e.features),t.features)});case K:var a=t.updatedState,s=a.cta,u=a.isLive,l=a.viewCount,h=a.viewerCount,p=r()(a,j),f=function(e){var t=e.tracks;return{sourceTrack:t.find((function(t){return t.id===e.source.trackId})),otherTracks:t.filter((function(t){return t.id!==e.source.trackId}))}}(e),v=f.otherTracks,y=f.sourceTrack;return y&&(0===y.requestedTimecode||y.requestedTimecode>0)&&delete p.posterImage,c()(c()(c()({},e),p),{},{tracks:[].concat(o()(v),[c()(c()({},y),{},{cta:s,isLive:u,viewerCount:h,viewCount:l})])});default:return e}},{configuration:{loading:!1,error:void 0},tracks:[]})},594:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var i={EVENT:"event",VISIT:"url",WATCH:"watch",IMAGE:"image",WATCH_NOW:"watch_now",SHOP:"shop"},r=3,a=["cover","contain"]},596:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var i=n(5),r=n.n(i),a=n(2),o=n.n(a),s=n(36),c=n.n(s),u=n(8),d=n.n(u),l=n(9),h=n.n(l),p=n(13),f=n.n(p),v=n(21),y=n.n(v),E=n(23),m=n.n(E),g=n(1),T=n.n(g),_=(n(32),n(0)),b=n.n(_),I=n(588),R=n(39),S=n.n(R),P=(n(372),n(69),n(515));function O(e){var t=C(e);return function(e){var n=C(e);return Object(P.a)(t,n)||(t=n),t}}function C(e){if(!e||"object"!==S()(e))return e;var t=JSON.parse(JSON.stringify(e));return delete t.dataUsageBytes,t.tracks=t.tracks.map((function(e){return"number"==typeof e.currentTimeMs&&delete e.currentTimeMs,e})),t}var k=n(765),w=n(64),A=n.n(w),L=n(6),D=n(691),M=["aspectRatio","basePlayerClass","children","objectFitVideo","onApiReady","onStateUpdate","playerId","size"];function N(e){var t=e.children,n=e.periodic?U.PeriodicContext.Consumer:U.Context.Consumer;return b.a.createElement(n,null,(function(e){var n=e.aspectRatio,i=e.containerRef,r=e.guestsState,a=e.playerApi,o=e.playerState;return a&&i&&o?t({aspectRatio:n,guestsState:r,playerApi:a,playerState:o,containerRef:i}):null}))}var U=function(e){y()(n,e);var t=m()(n);function n(){var e;d()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),T()(f()(e),"_cache",{stablePlayerState:O(null)}),T()(f()(e),"state",{hasError:null,guestsState:null,playerApi:null,playerState:null,stablePlayerState:null}),T()(f()(e),"_renderCustomOverlay",(function(){var t=e.props.children,n=e.state,i=n.guestsState,r=n.playerApi,a=n.stablePlayerState;return r&&t?"function"==typeof t?t({guestsState:i,playerApi:r,playerState:a,containerRef:e._containerRef}):t:null})),T()(f()(e),"_handleReload",(function(){return e.setState((function(){return{hasError:null}}))})),T()(f()(e),"_handlePlayerApi",(function(t){return function(n){var i=e.props.playerId;e.setState({playerApi:n}),e.props.onApiReady&&e.props.onApiReady(n),i&&t&&(e._unregister=t(i,n)),e._unsubscribe=n.subscribe((function(t,n){var i=e._cache.stablePlayerState(t);e.setState({stablePlayerState:i,playerState:t,guestsState:n}),e.props.onStateUpdate&&e.props.onStateUpdate(t,n)}))}})),e}return h()(n,[{key:"componentWillUnmount",value:function(){this._unregister&&this._unregister(),this._unsubscribe&&this._unsubscribe()}},{key:"componentDidUpdate",value:function(){if(!this._containerRef){var e=A.a.findDOMNode(this);e&&e instanceof HTMLElement&&(this._containerRef=e)}}},{key:"componentDidCatch",value:function(e,t){var n={error:e,info:t};console.error(n),this.setState((function(){return{hasError:n}}))}},{key:"render",value:function(){var e=this,t=this.state,i=t.guestsState,a=t.playerApi,s=t.playerState,u=t.stablePlayerState,d=this.props,l=d.aspectRatio,h=d.basePlayerClass,p=(d.children,d.objectFitVideo),f=(d.onApiReady,d.onStateUpdate,d.playerId,d.size),v=c()(d,M),y={aspectRatio:this.props.aspectRatio,guestsState:i,playerApi:a,playerState:s,containerRef:this._containerRef},E=o()(o()({},y),{},{playerState:u});return b.a.createElement(I.a,{ratio:l,style:[x.root,x[f]]},this.state.hasError?b.a.createElement(k.a,{onReloadPress:this._handleReload}):b.a.createElement(n.Context.Provider,{value:E},b.a.createElement(n.PeriodicContext.Provider,{value:y},b.a.createElement(D.a.RegistrationContext.Consumer,null,(function(t){var n=t.registerPlayer;return b.a.createElement(h,r()({},v,{customOverlay:e._renderCustomOverlay(),displayOptions:{objectFitVideo:p},setPlayerApi:e._handlePlayerApi(n)}))})))))}}]),n}(b.a.Component);T()(U,"Consumer",N),T()(U,"defaultProps",{aspectRatio:L.a.theme.aspectRatios.landscape,size:"fill"}),T()(U,"Context",b.a.createContext({aspectRatio:L.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null})),T()(U,"PeriodicContext",b.a.createContext({aspectRatio:L.a.theme.aspectRatios.landscape,guestsState:null,playerApi:null,playerState:null,containerRef:null}));var x=L.a.create({root:{position:"relative"},fill:{width:"100%",height:"100%"},small:{width:480,height:270},medium:{width:640,height:360},large:{width:800,height:450}});t.b=U},611:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"r",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"s",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"o",(function(){return E})),n.d(t,"d",(function(){return m})),n.d(t,"p",(function(){return g})),n.d(t,"q",(function(){return T})),n.d(t,"b",(function(){return _})),n.d(t,"l",(function(){return b})),n.d(t,"m",(function(){return S})),n.d(t,"n",(function(){return P})),n.d(t,"j",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"h",(function(){return k})),n.d(t,"g",(function(){return w})),n.d(t,"a",(function(){return N}));var i=n(45),r=n.n(i),a=n(978),o=n.n(a),s=n(2),c=n.n(s),u=(n(252),n(20),n(87),n(158),n(99),n(32),n(612)),d=n(650),l=n(590),h="TICK",p=function(e,t,n,i,r,a){return{type:h,currentTimeMs:t,absoluteTimeMs:n,durationMs:i,playerId:e,hasCaptions:r,currentVariantIndex:a}},f="TRACK_FINISHED",v=function(e){return{type:f,playerId:e}},y="NEXT_TRACK",E=function(e){return{type:y,playerId:e}},m="PLAYER_READY",g=function(e){return{type:m,playerId:e}},T=function(e,t){return{type:"ROTATION_UPDATED",playerId:e,rotation:t}},_="HLSJS_READY",b=function(e){return{type:_,playerId:e}},I=new Date("Jan 01 1900 GMT").getTime(),R=new Date("Jan 01 1970 GMT").getTime()-I,S=function(e,t){return{type:"ID3_METADATA",playerId:e,metadata:t}},P=function(e,t){return{type:"ID3_TAG_DATA",playerId:e,id3Json:t,currentNtpTime:(Date.now()+R)/1e3}},O=function(e){return{type:"BUFFER_START",playerId:e}},C=function(e){return{type:"BUFFER_END",playerId:e}},k=function(e,t){return{type:"BITRATE_SWITCHED",playerId:e,bitrate:t}},w=function(e,t){return{type:"ACTIVE_TEXT_CUES_UPDATE",playerId:e,cues:t}},A=function(e){var t=e.tracks;return{currentTrack:t.find((function(t){return t.id===e.currentTrackId})),otherTracks:t.filter((function(t){return t.id!==e.currentTrackId}))}},L=function(e,t){var n=A(e),i=n.currentTrack,r=n.otherTracks;return r.splice(e.currentTrackId,0,t(i)),c()(c()({},e),{},{tracks:r})},D=function(e,t){return L(e,(function(e){return c()(c()({},e),t)}))};t.k=function(e,t){switch(t.type){case h:return D(e,{durationMs:t.durationMs,currentTimeMs:t.currentTimeMs,absoluteTimeMs:t.absoluteTimeMs,hasCaptions:t.hasCaptions,currentVariantIndex:t.currentVariantIndex});case l.G:return c()(c()({},L(e,(function(e){return c()(c()({},e),{},{playbackCompleted:!1})}))),{},{tracksFinished:!1});case m:var n,i=(null==e||null===(n=e.features)||void 0===n?void 0:n[d.e])&&Object(u.e)(e);return D(e,{playerReady:!0,playbackRateSupported:i});case"ROTATION_UPDATED":return D(e,{rotation:t.rotation});case"ID3_METADATA":var r=t.metadata,a=e;return r&&(a=D(a,{metadata:r})),a;case"ID3_TAG_DATA":var o=t.currentNtpTime,s=t.id3Json.ntp,p=e;if(s)p=D(p,{liveLatencyMs:1e3*(o-s),id3NtpTime:s});return p;case"BITRATE_SWITCHED":return D(e,{currentBitrate:t.bitrate});case"BUFFER_START":return D(e,{isBuffering:!0});case"BUFFER_END":return D(e,{isBuffering:!1});case y:return M(e,!0);case f:var v=L(e,(function(e){return c()(c()({},e),{},{playbackCompleted:!0})}));return M(v);case"ACTIVE_TEXT_CUES_UPDATE":return D(e,{textCues:t.cues});default:return e}};var M=function(e,t){var n,i=A(e).currentTrack,a=!1!==i.shouldAutoAdvance||t,s="ad"===i.displayType&&(null===(n=e.errorInfo)||void 0===n?void 0:n.adFailed);if(e.nextTrackIds.length>0&&a){var u=o()(e.nextTrackIds),d=u[0],h=u.slice(1),p=e.tracks,f=p.find((function(e){return e.id===d})),v=p.filter((function(e){return e.id!==d}));return c()(c()({},e),{},{currentTrackId:d,nextTrackIds:h,error:s?void 0:e.error,controls:c()(c()({},e.controls),{},{playState:s&&!e.isPlaying?void 0:l.n.PLAY_REQUESTED,captionsState:e.areCaptionsShown?l.f.CAPTIONS_ON_REQUESTED:l.f.CAPTIONS_OFF_REQUESTED}),intentToPlayTime:void 0,tracks:[].concat(r()(v),[c()(c()({},f),{},{playerReady:!1})])})}return c()(c()({},e),{},{intentToPlayTime:void 0,isPlaying:!!i.shouldLoop,tracksFinished:!i.shouldLoop&&0===e.nextTrackIds.length})},N={nextTrackIds:[]}},612:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return l}));var i=n(2),r=n.n(i),a=(n(252),n(20),n(87),n(101),n(206),n(17),n(207),n(60),n(69),n(256),n(88),n(633)),o=function(e,t){if(e.tracks)return e.tracks.find((function(e){return e.id===t}))},s=function(e){return o(e,e.currentTrackId)},c=function(e){return e.tracks?e.tracks.filter((function(t){return t.id!==e.currentTrackId})):[]},u=function(e){var t=s(e);return!!t&&("content"===t.displayType&&"gif"!==t.contentType&&!t.isLive&&!e.impressionId)},d=new RegExp(/^https:\/\/[\w-]+.twimg.com\/.+\.m3u8/),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(h)},h=function(e){var t=e.src;if(d.test(t)){var n=new a.a(t);n.addSearchParam("descending",!0),t=n.toString()}return r()(r()({},e),{},{src:t})}},613:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"h",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"d",(function(){return y})),n.d(t,"f",(function(){return E})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return b}));var i=n(2),r=n.n(i),a=n(36),o=n.n(a),s=n(274),c=n.n(s),u=(n(69),n(203),n(152),n(88),n(652)),d=n(589),l=n(591),h="PLAYBACK_ERROR",p=function(e,t){return{type:h,playerId:e,thrownError:t,isFatal:!0}},f=function(e){return{type:"PLAYBACK_RATE_ERROR",playerId:e}},v="CONFIGURATION_LOAD_ERROR",y=function(e,t){return{type:v,playerId:e,thrownError:t,isFatal:!0}},E=function(e){return{type:"ERROR_RESOLVED",playerId:e}},m=function(e){return{type:"GEOLOCATION_PROMPT",playerId:e}},g=function(e){switch(e.message){case d.a.BROADCAST_ENDED_NO_REPLAY:case d.a.BROADCAST_NOT_FOUND:case d.a.DMCA_TAKEDOWN_ERROR:case d.a.EUROPEAN_COPYRIGHT_VIOLATION:case d.a.ORIGINAL_CONTEXT_DELETED:case d.a.LIVE_VIDEO_GEOBLOCK_ERROR:case d.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR:case d.a.LIVE_VIDEO_GEOLOCATION_PROMPT:case d.a.MEDIA_GEOBLOCK_ERROR:case d.a.MEDIA_NOT_SUPPORTED:return!1;default:return!0}},T=function(e){if(!g(e))return!1;switch(e.message){case d.a.LIVE_VIDEO_NO_COOKIES_ERROR:return!1;default:return!0}},_=function(e,t){var n,i=t.currentTrackId,r=t.errorInfo,a=t.tracks,o=r.count+1,s=g(e),c=T(e)&&o<=r.retryMax,u="ad"===(null==a||null===(n=a[i])||void 0===n?void 0:n.displayType)?!c||!s:t.errorInfo.adFailed;return{backoffMs:c?1e3*t.errorInfo.count:b.backoffMs,count:o,canRetry:s,autoRetry:c,adFailed:u}};t.e=function(e,t){var n;switch(t.type){case l.b:var i=parseInt(e.features.fatalErrorRetryMax,10),a=isNaN(i)?b.errorInfo.retryMax:i;return r()(r()({},e),{},{errorInfo:r()(r()({},e.errorInfo),{},{retryMax:a})});case l.e:return r()(r()({},e),{},{error:void 0,errorInfo:r()(r()({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case v:var s,p=t.thrownError,f=_(p,e);return p.message!==d.a.LIVE_VIDEO_COPYRIGHT_VIOLATION_ERROR&&p.message!==d.a.EUROPEAN_COPYRIGHT_VIOLATION||(s={copyrightHolder:p.copyrightHolder}),r()(r()({},e),{},{error:p.message,errorData:s,errorInfo:r()(r()({},e.errorInfo),f)});case h:var y=t.thrownError,E=Object(u.a)(e.mediaAvailability),m=E?new Error(E):y,I=_(m,e);return r()(r()({},e),{},{error:m.message,errorInfo:r()(r()({},e.errorInfo),I)});case"PLAYBACK_RATE_ERROR":return n=function(e,t){e[t];return o()(e,[t].map(c.a))}(e.controls,"playbackRate"),r()(r()({},e),{},{controls:n});case"ERROR_RESOLVED":return r()(r()({},e),{},{error:void 0,errorInfo:r()(r()({},e.errorInfo),{},{autoRetry:!1,canRetry:!1})});case"GEOLOCATION_PROMPT":var R=new Error(d.a.LIVE_VIDEO_GEOLOCATION_PROMPT);return r()(r()({},e),{},{error:R.message,errorInfo:r()(r()({},e.errorInfo),{},{autoRetry:T(R),canRetry:g(R)})});default:return e}};var b={error:void 0,errorInfo:{adFailed:!1,autoRetry:!1,backoffMs:void 0,canRetry:!1,count:0,retryMax:0},errorData:void 0}},614:function(e,t,n){"use strict";n.d(t,"f",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"g",(function(){return h}));n(152),n(88),n(252),n(20),n(99),n(87);var i={},r=function(e,t,n,r,a,o){i[e]={httpClient:t,twitterAuthedHttpClient:n,errorLogger:r,hlsJsDataUsageTracker:a,featureProvider:o}},a=function(e){delete i[e]},o=function(e){return i[e]&&i[e].httpClient},s=function(e){return i[e]&&i[e].twitterAuthedHttpClient},c=function(e,t){i[e]&&t(i[e].errorLogger)},u=function(e){return function(e){return i[e]||{}}(e).featureProvider},d=function(e,t){i[e]&&t(i[e].hlsJsDataUsageTracker)},l=[],h=function(e){if(!e)throw new SyntaxError("Missing parameter: playbackSessionId");var t=l.find((function(t){return t.playbackSessionId===e}));return l=l.filter((function(t){return t.playbackSessionId!==e})),t}},615:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return h}));var i=n(2),r=n.n(i),a=(n(252),n(20),n(591)),o=n(621),s=n(590),c="PLAY_PREVIEW",u=function(e){return{type:c,playerId:e}},d="PAUSE_PREVIEW",l=function(e){return{type:d,playerId:e}};t.d=function(e,t){switch(t.type){case a.c:return r()(r()({},e),{},{initiallyMutedCaptions:t.initiallyMutedCaptions});case c:return e.isPlaying?e:r()(r()({},e),{},{isPreview:!0,controls:r()(r()({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case d:return r()(r()({},e),{},{isPreview:!0,controls:r()(r()({},e.controls),{},{muteState:s.j.MUTE_REQUESTED})});case s.v:case s.y:case s.B:case s.C:case s.A:case o.b:if(!e.isPreview)return e;var n=e.tracks.find((function(t){return t.id===e.currentTrackId}));if(!n)return e;var i="gif"===n.contentType?void 0:s.j.UNMUTE_REQUESTED;return r()(r()({},e),{},{isPreview:!1,controls:r()(r()({},e.controls),{},{muteState:i})});default:return e}};var h={isPreview:!1}},620:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(49);var i=Object.freeze({BROADCAST:"broadcast",DM:"dm",TWEET:"tweet",STATIC_BROADCAST:"static_broadcast",AUDIO_SPACE:"audio_space"})},621:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return l}));var i=n(2),r=n.n(i),a="REQUEST_FULLSCREEN",o=function(e,t,n){return{type:a,playerId:e,containerEl:t,videoEl:n}},s="REQUEST_SHRINK",c=function(e,t){return{playerId:e,type:s,element:t}},u="SET_FULLSCREEN_STATE",d=function(e,t){return{type:u,playerId:e,isFullscreen:t}};t.e=function(e,t){switch(t.type){case u:return r()(r()({},e),{},{fullscreen:r()(r()({},e.fullscreen),{},{isFullscreen:t.isFullscreen})});default:return e}};var l={fullscreen:{isFullscreen:!1}}},633:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var i=n(8),r=n.n(i),a=n(9),o=n.n(a);n(89),n(69),n(79),n(32),n(91),n(20),n(90),n(114),n(262),n(205),n(17),n(71),n(208);function s(e){return Object.keys(e).map((function(t){var n=void 0===e[t]?"":encodeURIComponent(e[t]);return"".concat(encodeURIComponent(t),"=").concat(n)})).join("&")}var c=function(){function e(t){r()(this,e);try{this.parser=new URL(t)}catch(e){this.parser=document.createElement("a"),this.parser.href=t}}return o()(e,[{key:"getHostname",value:function(){return this.parser.hostname}},{key:"getPath",value:function(){return this.parser.pathname}},{key:"isSafe",value:function(){return!!this.parser.protocol.match(/^https?:$/)}},{key:"addSearchParam",value:function(e,t){this.parser.search?this.parser.search="".concat(this.parser.search,"&").concat(e,"=").concat(t):this.parser.search="?".concat(e,"=").concat(t)}},{key:"toString",value:function(){return this.parser.href}}]),e}();t.a=c},634:function(e,t,n){"use strict";n.d(t,"c",(function(){return T})),n.d(t,"a",(function(){return _})),n.d(t,"b",(function(){return b}));var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=n(2),c=n.n(s),u=n(36),d=n.n(u),l=(n(89),n(20),n(253),n(32),n(255),n(370),n(203),n(152),n(88),n(591)),h=n(594),p=n(589),f=n(612),v=n(620),y=["cta","durationMs","isLive","viewCount","viewerCount"],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{ids:e.join(","),include_events:t}},m=function(e,t,n){try{return e.dispatch({method:"GET",host:"https://api.twitter.com",path:"/1.1/broadcasts/show.json",params:E([t],n),withCredentials:!0}).then((function(e){if(200!==e.status)return Promise.reject("".concat(p.a.BROADCAST_REQUEST_ERROR,":").concat(e.status));var n=JSON.parse(e.body),i=n.broadcasts,r=n.events;if(!i||!i[t]||!i[t].broadcast_id)return Promise.reject(p.a.BROADCAST_NOT_FOUND);if("RUNNING"!==i[t].state&&!i[t].available_for_replay)return Promise.reject(p.a.BROADCAST_ENDED_NO_REPLAY);var a={broadcast:i[t]};return r&&r[t]&&r[t].length&&(a.associatedEvent=r[t][0]),a}),(function(e){return console.log(e),Promise.reject(p.a.BROADCAST_REQUEST_ERROR)}))}catch(e){return Promise.reject(e)}},g=function(e){var t=e.broadcast,n=e.associatedEvent,i=void 0===n?{}:n,r=t.end_ms,a=t.image_url,o=t.ping_ms,s=t.start_ms,c=t.state,u=t.timedout_ms,d=t.total_watched,l=t.total_watching,p=i.description,f=i.id,v=i.title,y=i.url,E="RUNNING"===c,m=a,g=parseInt(l,10)||0,T=parseInt(d,10)||0,_={isLive:E,viewerCount:E?g:T,posterImage:m,eventDescription:p,eventTitle:v,eventUrl:y,eventId:f};if(v&&y&&(_.cta={label:v,type:h.a.EVENT,url:y}),!E){var b=(r||u||o||s)-s;_.durationMs=b}return _},T=function(e){return e.source&&e.source.type===v.a.BROADCAST},_=function(){function e(t,n,i,a,o){r()(this,e),this.dispatch=t,this.httpClient=n,this.playerId=i,this.broadcastId=a,this.includeBroadcastEventAssociation=o,this.updaterTimeout=null}return o()(e,[{key:"queueUpdate",value:function(e){var t,n,i=this,r=e?15:30,a=new Promise((function(e,i){t=e,n=i}));return this.updaterTimeout=setTimeout((function(){var e,r,a;(e=i.httpClient,r=i.broadcastId,a=i.includeBroadcastEventAssociation,m(e,r,a).then((function(e){return g(e)}),(function(e){throw new Error(e)}))).then((function(e){null!=i.updaterTimeout&&(i.queueUpdate(e.isLive),i.dispatch(Object(l.f)(i.playerId,e))),t()}),(function(e){console.log(e),n(e)}))}),1e3*r),a}},{key:"cancelUpdate",value:function(){clearTimeout(this.updaterTimeout),this.updaterTimeout=null}}]),e}(),b=function(){function e(t,n){r()(this,e),this.httpClient=t,this.includeBroadcastEventAssociation=n}return o()(e,[{key:"load",value:function(e){return this.httpClient?function(e,t,n){if(!T(t))return Promise.resolve(t);var i=t.source.id;return m(e,i,n).then((function(e){var n,i,r,a,o,s,u,l,h,p,v=Object(f.d)(t,0),E=(n=e.broadcast,i=n.broadcast_id,r=n.media_key,a=n.profile_image_url,o=n.replay_edited_start_time,s=n.requires_fine_grain_geoblocking,u=n.twitter_user_id,l=n.unavailable_in_periscope,h=n.user_display_name,p=n.user_id,{broadcastId:i,contentId:r,contentType:"broadcast",displayType:"content",expandedUrl:"https://www.pscp.tv/w/".concat(i),isEventGeoblocked:s,playbackType:"application/x-mpegURL",publisherDisplayName:h,publisherId:u,periscopePublisherId:p,publisherProfileImageUrl:a,replayEditedStartTime:o,shouldLoop:!1,unavailableInPeriscope:l}),m=g(e),T=m.cta,_=m.durationMs,b=m.isLive,I=m.viewCount,R=m.viewerCount,S=d()(m,y);return t.posterImage&&delete S.posterImage,c()(c()(c()({},t),S),{},{client:"web",tracks:[c()(c()(c()({},v),E),{},{cta:T,durationMs:_,id:0,isLive:b,viewerCount:R,viewCount:I})],currentTrackId:0,source:c()(c()({},t.source),{},{trackId:0})})}),(function(e){throw new Error(e)}))}(this.httpClient,e,this.includeBroadcastEventAssociation):Promise.reject(p.a.MEDIA_TEARDOWN_ERROR)}}]),e}()},649:function(e,t,n){"use strict";var i=n(2),r=n.n(i),a=n(969),o={showControls:!0,promotedContext:{}};t.a={createPlayer:function(e){var t=e.domElement,n=e.source,i=e.videoConfig,s=e.httpClient,c=e.twitterAuthedHttpClient,u=e.options,d=void 0===u?{}:u;return new a.a({videoConfig:i,source:n,domElement:t,httpClient:s,twitterAuthedHttpClient:c,options:r()(r()({},o),d)})}}},650:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u}));var i="web_video_bitrate_persistence_enabled",r="web_video_caption_repositioning_enabled",a="web_video_hlsjs_version",o="web_video_hlsjs_worker_enabled",s="web_video_playback_rate_enabled",c="web_video_player_size_cap_disabled",u="web_video_smart_buffering_enabled"},651:function(e,t,n){"use strict";t.a={BROADCAST_EVENT_ASSOCIATION_UPDATED:"broadcastEventAssociationUpdated",FULLSCREEN_ENTERED:"fullscreenEntered",FULLSCREEN_EXITED:"fullscreenExited",HLSJS_INSTANTIATED:"hlsJsInstantiated",GEOBLOCK_ERROR:"geoblockError",LIVE_ENDED:"liveEnded",LIVE_STARTED:"liveStarted",LIVE_CLICKTHROUGH:"liveClickthrough",MUTE:"mute",NO_COOKIES_ERROR:"noCookiesError",PAUSE:"pause",PLAY:"play",PLAYBACK_COMPLETE:"playbackComplete",READY:"ready",UNMUTE:"unmute"}},652:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));n(252),n(20),n(79);var i=n(589);function r(e,t){var n=e.getState();if(n&&n.players&&n.players[t])return n.players[t]}var a=function(e){if(e&&"unavailable"===e.status)switch(e.reason){case"geoblocked":return i.a.MEDIA_GEOBLOCK_ERROR;case"deleted":return i.a.ORIGINAL_CONTEXT_DELETED;case"dmcaed":return i.a.DMCA_TAKEDOWN_ERROR;case"copyrightviolation":return i.a.EUROPEAN_COPYRIGHT_VIOLATION}return null},o=function(e,t){var n=Object.keys(e).find((function(n){return t(e[n])}));return void 0!==n?e[n]:void 0}},660:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"c",(function(){return C}));var i=n(1),r=n.n(i),a=n(2),o=n.n(a),s=(n(80),n(20),n(750)),c=n(615),u=n(45),d=n.n(u),l=n(36),h=n.n(l),p=n(274),f=n.n(p),v=(n(69),n(32),n(591)),y=n(611),E=n(590),m=n(612),g=function(e,t){e[t];return h()(e,[t].map(f.a))},T=function(e){var t=e.intentToPlayTime;return void 0===t?new Date:t},_={playbackRate:1,volume:1,areCaptionsShown:!1,hasCaptions:!1,hasPlaybackStarted:!1,intentToPlayTime:void 0,inPiPMode:!1,isMuted:!1,isPlaying:!1,isScrubbing:!1,isSeeking:!1,controls:{isHidden:!0,isPosterShown:!0,captionDefaultOffset:{bottom:0}}},b=n(613),I=n(621),R=n(694),S=o()(o()(o()(o()(o()(o()(o()(o()(o()({},s.a),c.a),_),v.d),b.b),I.a),R.b),y.a),{},{percentVisible:1,percentOfViewportOccupied:1,sizesInfo:{}}),P=[s.c,v.h,function(e,t){var n;switch(t.type){case v.c:return o()(o()({},e),{},{intentToPlayTime:t.intentToPlayTime});case E.v:case c.c:return e.isPlaying&&e.controls.playState!==E.n.PAUSE_REQUESTED?e:o()(o()({},e),{},{intentToPlayTime:T(e),controls:o()(o()({},e.controls),{},{playState:E.n.PLAY_REQUESTED})});case c.b:case E.s:case E.b:return e.isPlaying||e.controls.playState===E.n.PLAY_REQUESTED?o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{playState:E.n.PAUSE_REQUESTED})}):e;case E.y:var i=Object(m.b)(e),r=Object(m.c)(e);return i&&"maxLoopCount"in i&&(i.loopCounter=0,i.shouldLoop=!0),o()(o()({},e),{},{intentToPlayTime:T(e),tracks:i?[].concat(d()(r),[o()({},i)]):e.tracks,controls:o()(o()({},e.controls),{},{isReplayButtonShown:!1,playState:E.n.PLAY_REQUESTED})});case E.G:return n=g(e.controls,"playState"),e.controls.playState!==E.n.PLAY_REQUESTED&&(n.playState=e.controls.playState),n.isPosterShown=!1,o()(o()({},e),{},{controls:n,hasPlaybackStarted:!0,isPlaying:!0});case E.F:return n=g(e.controls,"playState"),e.controls.playState!==E.n.PAUSE_REQUESTED&&(n.playState=e.controls.playState),o()(o()({},e),{},{controls:n,isPlaying:!1});case E.r:return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{muteState:E.j.MUTE_REQUESTED})});case E.B:return n=o()(o()({},e.controls),{},{muteState:E.j.UNMUTE_REQUESTED}),0!==e.volume||e.controls.volume>0||(n.volume=1),o()(o()({},e),{},{controls:n});case E.C:return n=o()(o()({},e.controls),{},{volume:t.volume}),0!==t.volume||e.isMuted?t.volume>0&&e.isMuted&&(n.muteState=E.j.UNMUTE_REQUESTED):n.muteState=E.j.MUTE_REQUESTED,o()(o()({},e),{},{controls:n});case E.J:return n=g(g(e.controls,"muteState"),"volume"),e.controls.muteState!==E.j.MUTE_REQUESTED||t.isMuted?e.controls.muteState===E.j.UNMUTE_REQUESTED&&t.isMuted&&(n.muteState=E.j.UNMUTE_REQUESTED):n.muteState=E.j.MUTE_REQUESTED,t.volume!==e.controls.volume&&(n.volume=e.controls.volume),o()(o()({},e),{},{controls:n,volume:t.volume,isMuted:t.isMuted});case E.A:return o()(o()({},e),{},{isSeeking:!0,controls:o()(o()({},e.controls),{},{scrubToFraction:t.fraction})});case E.z:return o()(o()({},e),{},{isScrubbing:t.isScrubbing});case E.x:var a=t.endTimeS,s=t.startTimeS;return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{playbackTimeRange:{startTimeS:s,endTimeS:a}})});case E.H:return n=t.lastFulfilledSeek===e.controls.scrubToFraction?g(e.controls,"scrubToFraction"):e.controls,o()(o()({},e),{},{isSeeking:!1,controls:n});case E.d:return n=g(e.controls,"playbackTimeRange"),o()(o()({},e),{},{controls:n});case E.I:return o()(o()({},e),{},{isSeeking:!0});case E.h:return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{isHidden:!0})});case E.D:return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{isHidden:!1})});case E.p:return e.areCaptionsShown?e:o()(o()({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:o()(o()({},e.controls),{},{captionsState:E.f.CAPTIONS_ON_REQUESTED})});case E.o:return!1===e.areCaptionsShown?e:o()(o()({},e),{},{userSpecifiedCaptions:t.isUserSet,controls:o()(o()({},e.controls),{},{captionsState:E.f.CAPTIONS_OFF_REQUESTED})});case E.e:return e.areCaptionsShown===t.areCaptionsShown?e:(n=g(e.controls,"captionsState"),o()(o()({},e),{},{areCaptionsShown:t.areCaptionsShown,controls:n}));case E.q:var u,l=t.offset.bottom;return l===(null===(u=e.controls.captionDefaultOffset)||void 0===u?void 0:u.bottom)?e:o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{captionDefaultOffset:{bottom:l}})});case y.f:var h=o()({},e),p=Object(m.b)(e),f=Object(m.c)(e);p&&"maxLoopCount"in p&&(p.loopCounter>=p.maxLoopCount-1?p.shouldLoop=!1:p.loopCounter+=1,h.tracks=[].concat(d()(f),[o()({},p)]));var _=(p||{}).shouldLoop;return 0===e.nextTrackIds.length&&(e.isPreview?h.controls=o()(o()({},e.controls),{},{isPosterShown:!_}):h.controls=o()(o()({},e.controls),{},{isHidden:_,isReplayButtonShown:!_,playState:_?void 0:E.n.PAUSE_REQUESTED})),h;case E.E:return o()(o()({},e),{},{percentVisible:t.percentVisible,percentOfViewportOccupied:t.percentOfViewportOccupied,sizesInfo:t.sizesInfo||{}});case E.a:n=g(e.controls,"playState"),e.controls.playState!==E.n.PLAY_REQUESTED&&(n.playState=e.controls.playState);var b=Object(m.b)(e),I=Object(m.c)(e);return o()(o()({},e),{},{controls:o()(o()({},n),{},{isPosterShown:!0}),tracks:[].concat(d()(I),[o()(o()({},b),{},{isBuffering:!1})])});case E.g:var R=void 0===e.dataUsageBytes?t.bytes:e.dataUsageBytes+t.bytes;return o()(o()({},e),{},{dataUsageBytes:R});case E.i:var S=e.liveClickthroughClicked||0;return o()(o()({},e),{},{liveClickthroughClicked:1+S});case E.u:return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{pipState:E.m.PICTURE_IN_PICTURE_ON_REQUESTED})});case E.t:return o()(o()({},e),{},{controls:o()(o()({},e.controls),{},{pipState:E.m.PICTURE_IN_PICTURE_OFF_REQUESTED})});case E.k:return n=g(e.controls,"pipState"),o()(o()({},e),{},{inPiPMode:t.inPiPMode,controls:n});case E.w:return t.playbackRate<=0||t.playbackRate===e.playbackRate?e:(n=o()(o()({},e.controls),{},{playbackRate:t.playbackRate}),o()(o()({},e),{},{controls:n}));case E.l:return n=g(e.controls,"playbackRate"),o()(o()({},e),{},{playbackRate:t.playbackRate,controls:n});default:return e}},y.k,c.d,b.e,I.e,R.e],O="TEARDOWN_PLAYER",C=function(e){return{type:O,playerId:e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return n.reduce((function(e,n){return n(e,t)}),e)};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P;if(void 0!==t.playerId){if(t.type===O){var i=o()({},e);return delete i[t.playerId],i}var a=e[t.playerId];if(t.type===v.e){if(!a)return e;a=o()(o()({},S),{},{errorInfo:a.errorInfo,features:a.features})}var s=k(a,t,n);if(void 0!==s)return o()(o()({},e),{},r()({},t.playerId,s))}return e}},690:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(49);var i=Object.freeze({Active:"active",Expand:"expand",Remove:"remove"})},691:function(e,t,n){"use strict";n.d(t,"a",(function(){return R}));var i=n(36),r=n.n(i),a=n(274),o=n.n(a),s=n(2),c=n.n(s),u=n(8),d=n.n(u),l=n(9),h=n.n(l),p=n(13),f=n.n(p),v=n(21),y=n.n(v),E=n(23),m=n.n(E),g=n(1),T=n.n(g),_=(n(32),n(20),n(253),n(69),n(0)),b=n.n(_),I=function(e){y()(n,e);var t=m()(n);function n(){var e;d()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r)),T()(f()(e),"state",{playerApi:void 0,playerState:void 0,guestsState:void 0}),T()(f()(e),"_initializeState",(function(t){t&&(e._unsubscribe&&e._unsubscribe(),e.setState({playerApi:t}),e._unsubscribe=t.subscribe((function(t,n){return e.setState({playerState:t,guestsState:n})})))})),e}return h()(n,[{key:"componentDidMount",value:function(){this._initializeState(this.props.playerApi)}},{key:"componentDidUpdate",value:function(e){var t=this.props.playerApi;t!==e.playerApi&&this._initializeState(t)}},{key:"render",value:function(){return this.props.children(this.state)}}]),n}(b.a.Component),R=function(e){y()(n,e);var t=m()(n);function n(){var e;d()(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),T()(f()(e),"state",{players:{}}),T()(f()(e),"_mounted",!1),T()(f()(e),"_registerPlayer",(function(t,n){var i=new Promise((function(i){setTimeout((function(){e._mounted?e.setState((function(e){return{players:c()(c()({},e.players),{},T()({},t,n))}}),i):i()}))}));return function(){i.then((function(){return e._unregisterPlayer(t)}))}})),T()(f()(e),"_unregisterPlayer",(function(t){e._mounted&&e.setState((function(n){var i=e.state.players;i[t];return{players:r()(i,[t].map(o.a))}}))})),T()(f()(e),"_registrationContext",{registerPlayer:e._registerPlayer}),e}return h()(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){return b.a.createElement(n.RegistrationContext.Provider,{value:this._registrationContext},b.a.createElement(n.ProviderContext.Provider,{value:this.state},this.props.children))}}]),n}(b.a.Component);T()(R,"MetadataSubscriber",(function(e){var t=e.children,n=e.playerId;return b.a.createElement(R.ProviderContext.Consumer,null,(function(e){var i=e.players;return b.a.createElement(I,{playerApi:i&&i[n]},t)}))})),T()(R,"RegistrationContext",b.a.createContext({registerPlayer:void 0})),T()(R,"ProviderContext",b.a.createContext({players:{}}))},692:function(e,t,n){"use strict";var i=n(744);t.__esModule=!0,t.default=void 0;var r=n(745);t.updateAudioLevels=r.updateAudioLevels;var a=n(746);t.updateGuestInfo=a.updateGuestInfo;var o=i(n(973));t.hydraMiddleware=o.default,t.registerExperience=o.registerExperience;var s=i(n(747));t.resetGuestState=s.resetGuestState,t.teardownExperience=s.teardownExperience;var c=s.default;t.default=c},693:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));n(52),n(17),n(256);var i=function(){var e=window.navigator;return 0===e.vendor.indexOf("Apple")&&/\sSafari\//.test(e.userAgent)},r=function(){var e=window.navigator;return/Firefox\/[.0-9]*/.test(e.userAgent)},a=function(){var e=window.navigator;return i()&&/iPad|iPhone/.test(e.userAgent)},o=function(){return i()&&!a()}},694:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return h})),n.d(t,"b",(function(){return p}));var i=n(2),r=n.n(i),a=n(611),o=n(650),s={IDLE:"IDLE",BUFFERING_REQUESTED:"BUFFERING_REQUESTED",PREBUFFERING_COMPLETED:"PREBUFFERING_COMPLETED",BUFFERING_COMPLETED:"BUFFERING_COMPLETED"},c="SET_BUFFERING_STATUS",u=function(e,t,n){return{type:c,playerId:e,bufferingStatus:t,maximumBufferLength:n}},d="SET_TARGET_DURATION",l=function(e,t){return{type:d,targetDuration:t,playerId:e}},h=function(e,t){return{type:"UPDATE_BUFFER_LENGTH",maximumBufferLength:t,playerId:e}};t.e=function(e,t){switch(t.type){case a.b:var n;if(null==e||null===(n=e.features)||void 0===n?void 0:n[o.g]){var i=void 0===e.bufferingStatus?s.IDLE:e.bufferingStatus;return r()(r()({},e),{},{bufferingStatus:i,maximumBufferLength:void 0,targetDuration:void 0})}return r()(r()({},e),{},{maximumBufferLength:void 0,targetDuration:void 0});case c:return r()(r()({},e),{},{bufferingStatus:t.bufferingStatus,maximumBufferLength:void 0!==t.maximumBufferLength?t.maximumBufferLength:e.maximumBufferLength});case"UPDATE_BUFFER_LENGTH":var u;return t.maximumBufferLength===e.maximumBufferLength?e:r()(r()({},e),{},{bufferingStatus:null!=e&&null!==(u=e.features)&&void 0!==u&&u[o.g]?s.BUFFERING_REQUESTED:void 0,maximumBufferLength:t.maximumBufferLength});case d:return r()(r()({},e),{},{targetDuration:t.targetDuration});default:return e}};var p={bufferingStatus:void 0,maximumBufferLength:void 0,targetDuration:void 0}},744:function(e,t,n){var i=n(39).default;function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=o?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(a,s,c):a[s]=e[s]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},745:function(e,t,n){"use strict";n(99),n(371),t.__esModule=!0,t.default=t.InitialState=t.updateAudioLevels=t.UPDATE_AUDIO_LEVELS=void 0;t.UPDATE_AUDIO_LEVELS="UPDATE_AUDIO_LEVELS";t.updateAudioLevels=function(e,t){return{type:"UPDATE_AUDIO_LEVELS",audioLevels:t,experienceId:e}};var i={guests:{},host:0};t.InitialState=i;t.default=function(e,t){switch(void 0===e&&(e=i),t.type){case"UPDATE_AUDIO_LEVELS":for(var n=t.audioLevels,r=n[0],a=n.slice(1),o={},s=0;s<a.length;s++)o[s]=a[s];return Object.assign({},e,{guests:o,host:r});default:return e}}},746:function(e,t,n){"use strict";t.__esModule=!0,t.default=t.updateGuestInfo=t.UPDATE_GUEST_INFO=void 0;t.UPDATE_GUEST_INFO="UPDATE_GUEST_INFO";t.updateGuestInfo=function(e,t){return{type:"UPDATE_GUEST_INFO",guestInfo:t,experienceId:e}};t.default=function(e,t){switch(void 0===e&&(e={}),t.type){case"UPDATE_GUEST_INFO":for(var n=t.guestInfo,i={},r=0;r<n.length;r++){var a=n[r],o=a.ParticipantIndex,s=a.ProfileUrl,c=a.SessionId,u=a.StreamName,d=a.UserId,l=a.UserName;i[r]={ParticipantIndex:o,ProfileUrl:s,SessionId:c,StreamName:u,UserId:d,UserName:l}}return i;default:return e}}},747:function(e,t,n){"use strict";var i=n(744),r=n(16);n(371),t.__esModule=!0,t.default=t.resetGuestState=t.RESET_GUEST_STATE=t.teardownExperience=t.TEARDOWN_EXPERIENCE=t.initializeExperience=t.INITIALIZE_EXPERIENCE=void 0;var a=n(977),o=r(n(746)),s=i(n(745));t.INITIALIZE_EXPERIENCE="INITIALIZE_EXPERIENCE";t.initializeExperience=function(e){return{type:"INITIALIZE_EXPERIENCE",experienceId:e}};t.TEARDOWN_EXPERIENCE="TEARDOWN_EXPERIENCE";t.teardownExperience=function(e){return{type:"TEARDOWN_EXPERIENCE",experienceId:e}};t.RESET_GUEST_STATE="RESET_GUEST_STATE";t.resetGuestState=function(e){return{type:"RESET_GUEST_STATE",experienceId:e}};var c={audioLevels:s.InitialState,guests:{}},u=(0,a.combineReducers)({audioLevels:s.default,guests:o.default});t.default=function(e,t,n){var i;if(void 0===e&&(e={}),void 0===n&&(n=u),void 0!==t.experienceId)switch(t.type){case"INITIALIZE_EXPERIENCE":case"RESET_GUEST_STATE":return Object.assign({},e,((i={})[t.experienceId]=c,i));case"TEARDOWN_EXPERIENCE":var r=Object.assign({},e);return delete r[t.experienceId],r;default:var a,o=n(e[t.experienceId],t);return Object.assign({},e,((a={})[t.experienceId]=o,a))}return e}},748:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"c",(function(){return m}));var i,r=n(39),a=n.n(r),o=n(1),s=n.n(o),c=(n(53),n(20),n(54),n(252),n(591)),u=n(589),d=n(651),l=n(613),h=n(621),p=n(611),f=n(590),v=(i={},s()(i,p.b,d.a.HLSJS_INSTANTIATED),s()(i,p.d,d.a.READY),s()(i,p.f,d.a.PLAYBACK_COMPLETE),s()(i,f.F,d.a.PAUSE),s()(i,f.G,d.a.PLAY),i),y={},E=function(e,t,n){void 0===y[e]&&(y[e]={}),void 0===y[e][t]&&(y[e][t]=[]),y[e][t].push(n)},m=function(e){delete y[e]};t.b=function(e){return function(t){return function(n){var i,r,o=n.playerId,s=n.type,p=e.getState().players[o],E=t(n),m=e.getState().players[o];if(o in y){var g=p.tracks.find((function(e){return"content"===e.displayType})),T=m.tracks.find((function(e){return"content"===e.displayType}));switch(s){case l.c:n.thrownError.message===u.a.LIVE_VIDEO_GEOBLOCK_ERROR?i=d.a.GEOBLOCK_ERROR:n.thrownError.message===u.a.LIVE_VIDEO_NO_COOKIES_ERROR&&(i=d.a.NO_COOKIES_ERROR);break;case f.J:!p.isMuted&&m.isMuted?i=d.a.MUTE:p.isMuted&&!m.isMuted&&(i=d.a.UNMUTE);break;case c.a:if(void 0!==g&&void 0!==T&&(g.isLive&&!T.isLive?i=d.a.LIVE_ENDED:!g.isLive&&T.isLive&&(i=d.a.LIVE_STARTED)),!i&&(p.eventTitle!==m.eventTitle||p.eventDescription!==m.eventDescription||p.eventUrl!==m.eventUrl)){var _=m.eventDescription,b=m.eventTitle,I=m.eventUrl;i=d.a.BROADCAST_EVENT_ASSOCIATION_UPDATED,r={eventTitle:b,eventDescription:_,eventUrl:I}}break;case f.i:p.liveClickthroughClicked!==m.liveClickthroughClicked&&(i=d.a.LIVE_CLICKTHROUGH);break;case h.d:var R=p.fullscreen.isFullscreen,S=m.fullscreen.isFullscreen;!R&&S?i=d.a.FULLSCREEN_ENTERED:R&&!S&&(i=d.a.FULLSCREEN_EXITED);break;default:i=v[s]}!function(e,t,n){t in y[e]&&a()(y[e][t])&&y[e][t].forEach((function(e){"function"==typeof e&&e(n)}))}(o,i,r),i===d.a.READY&&function(e,t){t in y[e]&&delete y[e][t]}(o,i)}return E}}}},749:function(e,t,n){"use strict";var i=n(9),r=n.n(i),a=n(8),o=n.n(a),s=n(1),c=n.n(s),u=(n(32),n(372),n(89),n(91),n(20),n(90),n(114),n(262),n(205),r()((function e(t){var n=this;o()(this,e),c()(this,"clearLogs",(function(){try{window.sessionStorage.removeItem(n.storageKey)}catch(e){}})),c()(this,"log",(function(t,i){if(e.debuggingEnabled){var r="".concat(t,": ").concat(i);n.logItemInSessionStorage(r)}})),c()(this,"logItemInSessionStorage",(function(e){try{var t=window.sessionStorage.getItem(n.storageKey),i=t?JSON.parse(t):[];i.push(e),window.sessionStorage.setItem(n.storageKey,JSON.stringify(i))}catch(e){}})),this.storageKey=e.generateStorageKey(t),this.clearLogs()})));c()(u,"debuggingEnabled",!1),c()(u,"generateStorageKey",(function(e){return"".concat("TwitterVideoPlayerDebugLog",":").concat(e)})),c()(u,"getDebugFileLink",(function(e){var t=window.sessionStorage.getItem(u.generateStorageKey(e)),n=new window.Blob([JSON.parse(t).join("\n")],{type:"application/octet-stream"});return window.URL.createObjectURL(n)})),t.a=u},750:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return c}));var i=n(45),r=n.n(i),a=n(2),o=n.n(a),s=(n(252),n(20),n(52),n(32),n(615),n(590),function(e,t){return{type:"AD_LOADED",playerId:e,adResponse:t}});t.c=function(e,t){switch(t.type){case"AD_LOADED":var n=e.tracks,i=t.adResponse;if(void 0===i.mediaInfo)return o()(o()({},e),{},{adLoaded:!0});var a=i.mediaInfo.variants.find((function(e){return 0===e.content_type.indexOf("application/x-mpegURL")}));if(void 0===a)return o()(o()({},e),{},{adLoaded:!0});var s,c=i.promotedContent||{};return i.mediaInfo.call_to_action&&(s={type:i.mediaInfo.call_to_action.type,url:i.mediaInfo.call_to_action.url,click_tracking_embed_details:i.mediaInfo.call_to_action.click_tracking_embed_details}),o()(o()({},e),{},{currentTrackId:1,nextTrackIds:[0],tracks:[].concat(r()(n),[{id:1,displayType:"ad",cta:s,contentId:i.adId,contentType:"media_entity",publisherId:i.mediaInfo.publisher_id_str,durationMs:i.mediaInfo.duration_millis,shouldLoop:!1,shouldAutoAdvance:i.shouldAutoAdvance,impressionId:c.impressionId,disclosureType:c.disclosureType,dynamicPrerollType:i.dynamicPrerollType,rotation:0,variants:[{src:a.url,type:a.content_type}],currentVariantIndex:0,advertiserName:i.advertiserName,advertiserProfileImageUrl:i.advertiserProfileImageUrl,useRedesignedPrerollUx:i.useRedesignedPrerollUx}]),videoAnalyticsScribePassthrough:i.videoAnalyticsScribePassthrough,adLoaded:!0});default:return e}};var c={adLoaded:!1}},751:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var i=n(1),r=n.n(i),a=n(591),o=n(614),s=function(e,t){return{feature:t,playerId:e,type:"GET_FEATURE_VALUE"}};t.a=function(e){return function(t){return function(n){if("GET_FEATURE_VALUE"===n.type){var i,s=n.feature,c=n.playerId,u=Object(o.a)(c);return u&&u.getValue?(i=u.getValue(s),e.dispatch(Object(a.i)(c,r()({},s,i)))):e.dispatch(Object(a.i)(c,{})),i}return t(n)}}}},752:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=function(e,t){try{window.localStorage.setItem(e,t)}catch(e){}},r=function(e,t){try{return window.localStorage.getItem(e)}catch(e){return t}}},753:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n(2),r=n.n(i),a=function(e){return{type:"BANDWIDTH_ESTIMATE",bandwidthEstimate:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"BANDWIDTH_ESTIMATE":return r()(r()({},e),{},{mostRecentBandwidthEst:t.bandwidthEstimate});default:return e}}},754:function(e,t){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},755:function(e,t,n){"use strict";n(20),n(253);var i=n(0),r=n.n(i),a=n(521),o=Object(a.a)({loader:function(){return n.e(78).then(n.bind(null,989))},renderPlaceholder:function(){return r.a.createElement("div",null)}});t.a=o},764:function(e,t,n){"use strict";var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=n(13),c=n.n(s),u=n(21),d=n.n(u),l=n(23),h=n.n(l),p=n(1),f=n.n(p),v=(n(32),n(128),n(369),n(0)),y=n.n(v),E=n(18),m=n(65),g=n.n(m),T=n(113),_=n(151),b=n(690),I=n(6),R=n(44),S=n(1003),P=n(2),O=n.n(P),C=n(112),k=n(51),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(k.a)("svg",O()(O()({},e),{},{accessibilityHidden:void 0===e.accessibilityLabel,style:[C.a.root,e.style],viewBox:"0 0 24 24"}),y.a.createElement("g",null,y.a.createElement("path",{d:"M19.75 11H13V4.25c0-.553-.447-1-1-1s-1 .447-1 1V11H4.25c-.553 0-1 .447-1 1s.447 1 1 1H11v6.75c0 .553.447 1 1 1s1-.447 1-1V13h6.75c.553 0 1-.447 1-1s-.447-1-1-1z"})))};w.metadata={width:24,height:24};var A=w,L=n(1012),D={active:g.a.e557ad8d,expand:g.a.e3a58c27,remove:g.a.h517e8d8},M=function(e){d()(n,e);var t=h()(n);function n(){var e;r()(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),f()(c()(e),"_handleSecondaryClick",(function(){var t=e.props.secondaryAction;t&&t.onSecondaryClick()})),e}return o()(n,[{key:"render",value:function(){var e=this.props,t=e.accessibilityLabel,n=e.avatar,i=e.compact,r=e.disabled,a=e.link,o=e.mode,s=e.onClick,c=e.secondaryAction,u=e.selected,d=e.style,l=e.text,h=this._renderIcon(!0,o),p=c&&this._renderIcon(!1,c.mode),f=[N.root,i&&N.compact,r&&N.disabled,u&&N.selected,d],v=[N.content,h&&N.withIcon,n&&(i&&N.withAvatarImageCompact||N.withAvatarImage)],m=T.a.generate({backgroundColor:u?I.a.theme.colors.primary:"transparent",color:u?I.a.theme.colors.white:I.a.theme.colors.primary});return y.a.createElement(R.a,{style:f},y.a.createElement(_.a,{accessibilityLabel:t||(o?D[o]:""),disabled:r,interactiveStyles:m,link:a,onPress:s,style:v},this._renderAvatar(),y.a.createElement(E.b,{color:u?"whiteOnColor":"text",numberOfLines:1,selectable:!1,style:N.text,weight:"bold"},l),h),c?y.a.createElement(_.a,{accessibilityLabel:c.accessibilityLabel||(c.mode?D[c.mode]:""),disabled:r||c.disabled,hoverLabel:{label:c.hoverLabel||(c.mode?D[c.mode]:"")},interactiveStyles:m,onPress:this._handleSecondaryClick,style:N.secondaryControl},y.a.createElement(R.a,{style:N.secondaryBorder},p)):null)}},{key:"_renderIcon",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this.props.selected,i=[N.icon,n&&N.iconSelected],r=[N.icon];switch(t){case b.a.Remove:return y.a.createElement(S.a,{style:[N.dismissIcon,e&&i]});case b.a.Expand:return y.a.createElement(A,{style:e?i:r});case b.a.Active:return y.a.createElement(L.a,{style:i});default:return null}}},{key:"_renderAvatar",value:function(){var e=this.props,t=e.avatar,n=e.compact;return t?y.a.createElement(R.a,{style:[N.avatarContainer,n?N.avatarCompact:N.avatar]},t):null}}]),n}(y.a.PureComponent);f()(M,"defaultProps",{compact:!1,disabled:!1,selected:!1});var N=I.a.create((function(e){return{root:{backgroundColor:e.colors.cellBackground,borderColor:e.colors.gray200,borderRadius:e.borderRadii.infinite,borderStyle:"solid",borderWidth:"1px",flexDirection:"row",minHeight:e.spaces.space40,overflow:"hidden"},content:{alignItems:"center",flexDirection:"row",flexGrow:1,flexShrink:1,paddingHorizontal:e.spaces.space16},text:{width:"100%"},compact:{minHeight:e.spaces.space32},disabled:{borderColor:e.colors.gray50},selected:{backgroundColor:e.colors.primary,borderColor:e.colors.primary},avatar:{height:e.spaces.space32,width:e.spaces.space32},avatarCompact:{height:e.spaces.space24,width:e.spaces.space24},avatarContainer:{justifyContent:"center",marginRight:e.spaces.space8},withAvatarImage:{paddingLeft:"calc(".concat(e.spaces.space2," * 2)")},withAvatarImageCompact:{paddingLeft:"calc(".concat(e.spaces.space1," * 3)")},icon:{color:e.colors.primary,flexShrink:0,marginLeft:e.spaces.space12},iconSelected:{color:e.colors.whiteOnColor},withIcon:{paddingRight:e.spaces.space12},dismissIcon:{color:e.colors.gray300},secondaryControl:{flexShrink:0,justifyContent:"center"},secondaryBorder:{borderLeftColor:e.colors.borderColor,borderLeftWidth:e.borderWidths.small,paddingHorizontal:e.spaces.space12}}}));t.a=M},765:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(2),r=n.n(i),a=n(0),o=n.n(a),s=n(18),c=n(254),u=n(65),d=n.n(u),l=n(112),h=n(51),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(h.a)("svg",r()(r()({},e),{},{accessibilityHidden:void 0===e.accessibilityLabel,style:[l.a.root,e.style],viewBox:"0 0 24 24"}),o.a.createElement("g",null,o.a.createElement("path",{d:"M15.644 11.58L10.43 8.26c-.155-.1-.35-.105-.51-.018-.16.088-.26.256-.26.438v6.64c0 .183.1.35.26.438.074.04.157.062.24.062.093 0 .187-.026.27-.078l5.214-3.32c.144-.09.23-.25.23-.42s-.086-.332-.23-.423zM2.5 22.25c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06l5.25-5.25c.293-.294.768-.294 1.06 0s.294.767 0 1.06l-5.25 5.25c-.146.147-.338.22-.53.22zM15.208 9.542c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.06L20.97 1.97c.293-.293.768-.293 1.06 0s.294.768 0 1.06l-6.29 6.293c-.148.146-.34.22-.532.22z"}),o.a.createElement("path",{d:"M3.815 17.062c-.27 0-.53-.146-.664-.4C2.4 15.236 2 13.623 2 12 2 6.486 6.486 2 12 2c1.592 0 3.176.384 4.582 1.11.368.188.512.64.322 1.01-.19.368-.643.515-1.01.32-1.21-.624-2.52-.94-3.894-.94-4.687 0-8.5 3.813-8.5 8.5 0 1.38.338 2.75.978 3.96.193.367.053.82-.313 1.015-.112.06-.232.087-.35.087zM12 22c-1.59 0-3.175-.384-4.58-1.11-.37-.188-.513-.64-.323-1.01.19-.366.644-.514 1.01-.32 1.21.624 2.52.94 3.893.94 4.687 0 8.5-3.813 8.5-8.5 0-1.364-.33-2.72-.957-3.922-.19-.367-.05-.82.318-1.012.37-.19.82-.05 1.013.318C21.61 8.8 22 10.396 22 12c0 5.514-4.486 10-10 10z"})))};p.metadata={width:24,height:24};var f=p,v=n(593),y=n(6),E=n(44),m=d.a.a9edea48;function g(e){var t=e.displayBackgroundImage,n=void 0!==t&&t,i=e.errorMessage,r=e.iconPlayError,a=e.imageSrc,u=e.onReloadPress;return o.a.createElement(E.a,{style:[y.a.absoluteFill,n?null:T.blankOverlay]},n?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{style:T.backgroundImage},a&&o.a.createElement(v.a,{resizeMode:"cover",source:a,style:y.a.absoluteFill})),o.a.createElement(E.a,{style:T.overlay})):null,o.a.createElement(E.a,{style:T.errorContainer},o.a.createElement(E.a,null,r?o.a.createElement(f,{style:T.playErrorIcon}):null),o.a.createElement(E.a,{focusable:!0},o.a.createElement(s.b,{style:n?T.errorMsgTextWhite:T.errorMsgTextGray},i)),u?o.a.createElement(c.a,{onPress:u,style:T.buttonContainer,type:"brandFilled"},m):null))}var T=y.a.create((function(e){return{backgroundImage:r()(r()({},y.a.absoluteFillObject),{},{filter:"blur(5px)"}),overlay:r()(r()({},y.a.absoluteFillObject),{},{backgroundColor:e.colors.translucentBlack77}),blankOverlay:{backgroundColor:e.colors.gray0},buttonContainer:{justifyContent:"center",alignSelf:"center"},errorContainer:{justifyContent:"center",height:"100%",marginHorizontal:e.spaces.space32},errorMsgTextWhite:{color:e.colors.white,textAlign:"center",marginBottom:e.spaces.space20},errorMsgTextGray:{color:e.colors.gray700,textAlign:"center",marginBottom:e.spaces.space20},playErrorIcon:{fill:e.colors.gray700,height:e.spaces.space48,width:e.spaces.space48,marginHorizontal:"auto",paddingBottom:e.spaces.space20,textAlignVertical:"middle"}}}))},961:function(e,t,n){"use strict";n(255),n(370),n(962),n(252),n(53),n(260),n(52),n(732),n(91),n(69),n(80),n(99),n(963),n(964),n(965),n(585),n(261),n(735),n(726),n(371),n(79),n(20),n(253),n(17),n(60),n(90),n(54),n(114),n(967);var i,r,a,o,s=n(13),c=n.n(s),u=n(153),d=n.n(u),l=n(1),h=n.n(l),p=n(189),f=n.n(p);function v(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var E="AD_SKIP_EVENT",m="CAPTIONS_TOGGLED_EVENT",g="CONFIG_LOADED_EVENT",T="CTA_CLICK_EVENT",_="CTA_IMPRESSION_EVENT",b="ERROR_EVENT",I="FULL_SCREEN_EVENT",R="GROUPM_VIEW_EVENT",S="HEARTBEAT_EVENT",P="HEARTBEAT_START_EVENT",O="INITIAL_CTA_IMPRESSION_EVENT",C="INITIAL_INTEND_TO_PLAY_EVENT",k="INTEND_TO_PLAY_EVENT",w="LOOP_EVENT",A="MRC_AUDIBLE_VIEW_EVENT",L="MRC_VIEW_EVENT",D="MUTE_EVENT",M="ONE_SEC_VIEW_EVENT",N="SIX_SEC_VIEW_EVENT",U="SHORT_FORM_COMPLETE_EVENT",x="PAUSE_EVENT",F="PLAY_EVENT",V="PLAY_FROM_TAP_EVENT",j="PLAYBACK_25_EVENT",B="PLAYBACK_50_EVENT",W="PLAYBACK_75_EVENT",G="PLAYBACK_95_EVENT",H="PLAYBACK_COMPLETE_EVENT",K="PLAYBACK_ERROR_EVENT",Q="PLAYBACK_LAPSE_EVENT",J="PLAYBACK_SPEED_CHANGE_EVENT",Y="PLAYBACK_START_EVENT",z="REPLAY_EVENT",q="REWIND_EVENT",X="SHRINK_EVENT",Z="STARTUP_ERROR_EVENT",$="TEARDOWN_EVENT",ee="TICK_EVENT",te="TRACK_FINISHED_EVENT",ne="UNMUTE_EVENT",ie="VIDEO_SESSION_EVENT",re="VIDEO_QUALITY_VIEW_EVENT",ae="VIDEO_VIEW_EVENT",oe="VIEW_THRESHOLD_EVENT",se="ad",ce="content",ue="broadcast",de="gif",le="live",he="media_entity",pe="partner_video",fe="periscope",ve="vine",ye="vmap",Ee={event:"url",go_to:"url",image:"url",url:"url",shop:"url",see_more:"url",visit:"url",visit_site:"url",watch:"url",watch_now:"watch"},me=1,ge=2,Te=3,_e=4;function be(e){return Re(e,e.source.trackId)}function Ie(e){return Re(e,e.currentTrackId)}function Re(e,t){return e.tracks.find((function(e){return t===e.id}))}function Se(e){return e.tracks.find((function(e){return se===e.displayType}))}function Pe(e){return Boolean(e)&&e.isPlaying&&!e.isScrubbing&&!e.isMuted}function Oe(e){var t;switch(e){case.5:t=me;break;case 1.5:t=Te;break;case 2:t=_e;break;default:t=ge}return t}var Ce=((i={})[ae]="creativeView",i[j]="firstQuartile",i[B]="midpoint",i[W]="thirdQuartile",i[H]="complete",i[F]="resume",i[x]="pause",i[q]="rewind",i[b]="adError",i),ke=function(){function e(e){var t=this;Object.keys(Ce).forEach((function(n){e.on(n,(function(e){t.fireBeacon(Ce[n],e)}))})),e.on(Y,this.onPlaybackStart.bind(this))}var t=e.prototype;return t.onPlaybackStart=function(e){this.fireBeacon("start",e),this.fireBeacon("adImpression",e)},t.fireBeacon=function(e,t){var n=Ie(t);if(void 0!==n&&void 0!==n.beacons&&void 0!==n.beacons[e])for(var i,r=v(n.beacons[e]);!(i=r()).done;){var a=i.value;(new window.Image).src=a}},e}(),we=function(){function e(e){this.analytics=e,this.analytics.on(ee,this.onTickEvent.bind(this))}return e.prototype.onTickEvent=function(e){var t=e.areCaptionsShown,n=this.currentCaptionsState;n!==t&&((!1===n&&!0===t||!0===n&&!1===t)&&this.analytics.emit(m,e,t),this.currentCaptionsState=t)},e}(),Ae=function(){function e(e){this.analytics=e,this.hasFiredOnTrackMap={},this.analytics.on(_,this.onCtaImpressionEvent.bind(this))}return e.prototype.onCtaImpressionEvent=function(e){var t=e.currentTrackId;this.hasFiredOnTrackMap[t]||(this.hasFiredOnTrackMap[t]=!0,this.analytics.emit(O,e))},e}(),Le=function(){function e(e){this.analytics=e,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(Y,this.onPlaybackStartEvent.bind(this)),this.analytics.on(k,this.onShowEvent.bind(this)),this.analytics.on(b,this.onErrorEvent.bind(this))}var t=e.prototype;return t.onPlaybackStartEvent=function(){this.hasStarted=!0},t.onShowEvent=function(){this.intentToPlayTime=new Date},t.onErrorEvent=function(e,t){var n=this.constructClientMediaEventError(e,t);if(!this.hasStarted&&!this.hasFired){var i,r=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;n&&(i={latency_millis:r,error:n}),this.analytics.emit(Z,e,Object.assign({latency:r},t),i),this.hasFired=!0}this.analytics.emit(K,e,t,n)},t.constructClientMediaEventError=function(e,t){var n=t&&t.media_details&&t.media_details.media_error||{};return{is_fatal:n.is_fatal,category:n.category,message:n.message,retry_count:n.retry_count}},e}(),De=function(){function e(e){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,e.on(ee,this.onTickEvent.bind(this)),e.on(P,this.onHeartbeatStart.bind(this)),e.on(S,this.onHeartbeat.bind(this))}var t=e.prototype;return t.onHeartbeat=function(e){this.reset(e)},t.onHeartbeatStart=function(e){this.reset(e)},t.onTickEvent=function(e){var t=Ie(e);void 0!==t&&(t.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):t.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},t.getBufferTime=function(e){var t=Ie(e);if(void 0!==t){var n=this.bufferingDurationMs;return t.isBuffering&&null!=this.bufferingBeginTimeMs&&(n+=Date.now()-this.bufferingBeginTimeMs),n}},t.reset=function(e){var t=Ie(e);void 0!==t&&(this.bufferingBeginTimeMs=t.isBuffering?Date.now():void 0,this.bufferingCount=t.isBuffering?1:0,this.bufferingDurationMs=0)},e}();function Me(e){return"number"!=typeof e||Number.isNaN(e)||e===1/0||e===-1/0?"string"==typeof e?e:void 0:e.toString()}var Ne=function(){function e(e){this.analytics=e,this.bufferingDurationListener=new De(e),this.lastKnownDataUsageBytes=0,this.audibleDuration=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(ee,this.onTickEvent.bind(this)),this.analytics.on(F,this.onPlayEvent.bind(this)),this.analytics.on(Y,this.onPlaybackStartEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(b,this.onErrorEvent.bind(this)),this.analytics.on(x,this.onPauseEvent.bind(this)),this.analytics.on($,this.onTeardownEvent.bind(this)),this.analytics.on(w,this.onLoopEvent.bind(this)),this.analytics.on(E,this.onAdSkip.bind(this))}var t=e.prototype;return t.onTickEvent=function(e){var t=Ie(e);if(void 0!==t){if(this.updateTimesOnTick(t,e),this.updatePerfMetrics(t),e.isScrubbing?this.stopPolling():e.isPlaying&&this.startPolling(e),void 0!==this.lastKnownPlayerState){var n=this.lastKnownPlayerState.percentVisible,i=e.percentVisible;(n>0&&0===i||0===n&&i>0)&&(this.stopPolling(),this.startPolling(e))}this.lastKnownPlayerState=e,this.previousTickTimestamp=Date.now()}},t.onPlayEvent=function(e){this.hasPlaybackStarted&&this.startPolling(e),this.lastKnownPlayerState=e},t.onPlaybackStartEvent=function(e){this.startPolling(e),this.lastKnownPlayerState=e,this.hasPlaybackStarted=!0},t.onTrackFinishedEvent=function(e){this.hasPlaybackStarted=!1,void 0!==Ie(e)&&(this.stopPolling(),this.lastKnownPlayerState=e)},t.onErrorEvent=function(e,t){t&&t.media_details&&t.media_details.media_error&&t.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=e)},t.onPauseEvent=function(e,t){this.stopPolling(),this.lastKnownPlayerState=e},t.onTeardownEvent=function(e,t){this.stopPolling(!0),this.lastKnownPlayerState=e},t.onLoopEvent=function(e){this.startPolling(e)},t.onAdSkip=function(){this.stopPolling()},t.updateTimesOnTick=function(e,t){var n;void 0!==(n=e.contentType===ue||e.contentType===le||e.contentType===fe?e.absoluteTimeMs:e.currentTimeMs)&&(Pe(t)&&void 0!==this.lastTimeMs&&(this.audibleDuration+=n-this.lastTimeMs),this.lastTimeMs=n,void 0===this.startTimeMs&&(this.startTimeMs=n))},t.startPolling=function(e){var t=be(e);void 0===this.intervalId&&void 0!==t&&t.contentType!==ve&&(this.analytics.emit(P,e),this.onHeartbeatStart(e))},t.stopPolling=function(e){(this.intervalId||e)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},t.onHeartbeatStart=function(e){this.intervalId=setInterval(this.onHeartbeat.bind(this),e.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},t.updatePerfMetrics=function(e){if(this.previousTickTimestamp){var t=Date.now()-this.previousTickTimestamp;e.currentBitrate&&this.bitrateHistory.push({value:e.currentBitrate,weight:t}),e.liveLatencyMs&&this.latencyHistory.push({value:e.liveLatencyMs,weight:t})}},t.onHeartbeat=function(){var e=this.lastKnownPlayerState;if(e){var t=Ie(e),n=this.getProgramDateTimeMs();if(void 0!==n&&void 0!==t){var i=t.currentBitrate?{sampled_bitrate:t.currentBitrate}:{},r=0;e.dataUsageBytes&&(r=e.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=e.dataUsageBytes);var a,o,s={data_usage_bytes:r},c=this.bufferingDurationListener.bufferingCount,u=this.bufferingDurationListener.getBufferTime(e),d=Math.floor(100*e.percentVisible),l=Object.assign({buffering_duration_millis:u,video_visibility:d},{start_program_date_time_millis:n.start_program_date_time_millis,end_program_date_time_millis:n.end_program_date_time_millis},i,s),h={buffering_duration_millis:Me(u),buffering_count:c,percent_in_view:d,sampled_bits_per_second:t.currentBitrate,data_usage_bytes:Me(s.data_usage_bytes),start_program_date_time_millis:Me(n.start_program_date_time_millis),end_program_date_time_millis:Me(n.end_program_date_time_millis),audible_duration_millis:Me(n.audible_duration_millis),bandwidth_estimate_bps:Me(e.bandwidthEstimateBps),bitrate_metrics:(a=this.bitrateHistory,o=xe(a),o&&{min_bps:Math.round(o.min),max_bps:Math.round(o.max),avg_bps:Math.round(o.avg)}),live_or_non_live_heartbeat_metrics:Ue(t.isLive,this.latencyHistory)};this.analytics.emit(S,e,l,h)}}},t.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var e=this.startTimeMs,t=this.lastTimeMs,n=this.audibleDuration;return this.startTimeMs=this.lastTimeMs,this.audibleDuration=0,{start_program_date_time_millis:Math.round(e),end_program_date_time_millis:Math.round(t),audible_duration_millis:Math.round(n)}}return{}},e}();function Ue(e,t){var n=xe(t);return e?{live_heartbeat_metrics:{latency_metrics:n&&{min_ms:Math.round(n.min),max_ms:Math.round(n.max),avg_ms:Math.round(n.avg)}}}:{non_live_heartbeat_metrics:{}}}function xe(e){if(e&&e.length){var t=function(e){if(!e||0===e.length)return[Math.min(),Math.max()];for(var t,n=1/0,i=-1/0,r=v(e);!(t=r()).done;){var a=t.value;n=Math.min(n,a),i=Math.max(i,a)}return[n,i]}(e.map((function(e){return e.value})));return{min:t[0],max:t[1],avg:function(e){var t=e.reduce((function(e,t){return e+t.weight}),0);return e.reduce((function(e,t){return e+t.value*t.weight}),0)/t}(e)}}}var Fe=function(){function e(e){this.analytics=e,this.hasFiredOnTrackMap={},this.analytics.on(k,this.onIntendToPlayEvent.bind(this)),this.analytics.on(z,this.onIntendToPlayEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this))}var t=e.prototype;return t.onIntendToPlayEvent=function(e){this.hasFiredOnTrackMap[e.currentTrackId]||(this.hasFiredOnTrackMap[e.currentTrackId]=!0,this.analytics.emit(C,e))},t.onTrackFinishedEvent=function(e){var t=Ie(e);t&&(t.shouldLoop||(this.hasFiredOnTrackMap[e.currentTrackId]=!1))},e}(),Ve=function(){function e(e){this.analytics=e,this.analytics.on(te,this.onTrackFinishedEvent.bind(this))}return e.prototype.onTrackFinishedEvent=function(e){var t=Ie(e);void 0!==t&&t.shouldLoop&&this.analytics.emit(w,e)},e}(),je={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},Be=function(e){return"/api/v2/"+e};function We(e,t,n,i){return{start:{method:e,path:Be(t)},ping:{method:e,path:Be(n)},stop:{method:e,path:Be(i)}}}var Ge,He={public:{live:We("GET","startPublic","pingPublic","stopPublic"),replay:We("GET","replayViewedPublic","pingReplayViewedPublic","endReplayViewedPublic")},auth:{live:We("POST","startWatching","pingWatching","stopWatching"),replay:We("POST","replayViewed","pingReplayViewed","endReplayViewed")}},Ke=function(){function e(e,t){if(this.httpClient=e,this.authToken=null==t?void 0:t.periscopeAuthToken,this.lifecycles=this.authToken?He.auth:He.public,(null==t?void 0:t.scribeContext)&&(null==t?void 0:t.periscopeComponent)){var n=t.scribeContext,i=t.periscopeComponent;this.pageContext=this.getPageContext(n),this.componentContext=i}}var t=e.prototype;return t.getPageContext=function(e){var t=e.page;return"permalink_overlay"===e.section?"TweetCard":je[t]||""},t.call=function(e,t){var n=Date.now(),i={"X-Idempotence":Ge=n<=Ge?Ge+1:n,"X-Attempt":1,"X-Periscope-User-Agent":"Twitter/video-analytics","content-type":"application/json"},r=Object.assign({},t);this.authToken&&(r.cookie=this.authToken);var a=e.method,o=e.path,s={};return"POST"===a?s.data=r:s.params=r,this.httpClient.dispatch(Object.assign({headers:i,host:"https://proxsee.pscp.tv",method:a,path:o},s))},t.videoStartWatching=function(e,t,n){var i=this;return new Promise((function(r,a){("string"!=typeof e||e.length<1)&&a(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+e));var o=t?i.lifecycles.replay.start:i.lifecycles.live.start,s={life_cycle_token:e,auto_play:!!n};i.pageContext&&(s.page=i.pageContext),i.componentContext&&(s.component=i.componentContext),i.call(o,s).then((function(e){var t=JSON.parse(e.body).session;t?r(t):a("No valid Session")}),a)}))},t.videoPingWatching=function(e,t){var n=this;return new Promise((function(i,r){("string"!=typeof e||e.length<1)&&r(new Error("Cannot videoPingWatching. session not valid, session="+e));var a=t?n.lifecycles.replay.ping:n.lifecycles.live.ping;n.call(a,{session:e}).then((function(e){JSON.parse(e.body).success?i():r("Ping request failed")}),r)}))},t.videoStopWatching=function(e,t){var n=this;return new Promise((function(i,r){("string"!=typeof e||e.length<1)&&r(new Error("Cannot videoStopWatching. session not valid, session="+e));var a=t?n.lifecycles.replay.stop:n.lifecycles.live.stop;n.call(a,{session:e}).then((function(e){JSON.parse(e.body).success?i():r("StopWatching request failed")}),r)}))},e}();var Qe=function(){function e(e){this.api=e,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var t=e.prototype;return t.updateSession=function(e){this.session=e},t.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,3e3)},t.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},t.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var e=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession).then(this.startPingWatching);return this.isWatching=!0,e}},t.startPingWatching=function(){var e=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval((function(){e.isWatching?e.api.videoPingWatching(e.session,e.isReplay):e.stopPingWatching()}),3e4)},t.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},t.updateLifecycleToken=function(e){void 0!==e&&e!==this.lifecycleToken&&(this.lifecycleToken=e,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},t.updateIsReplay=function(e){void 0!==e&&e!==this.isReplay&&(this.isReplay=e)},t.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},t.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},t.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},t.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},e}(),Je=[g,F,x,te,$],Ye=function(){function e(e,t){var n=this;this.analytics=e,this.lifecycleController=t,Je.map((function(e){return n.analytics.on(e,n.possiblyHandleEvent.bind(n,e))}))}var t=e.prototype;return t.possiblyHandleEvent=function(e,t){if(this.shouldSendPeriscopeAnalytics(t)){var n=Ie(t);switch(e){case g:this.updateLifecycleToken(t),this.updateReplayState(!n.isLive);break;case F:this.handleStartWatching(t);break;case x:this.handleStopWatching(t);break;case te:this.handleStopWatching(t),this.updateReplayState(!0);break;case $:this.teardownPeriscopeLifecycle()}}},t.shouldSendPeriscopeAnalytics=function(e){var t=Ie(e);return void 0!==t&&(t.contentType===fe||t.contentType===ue)},t.getLifecycleToken=function(e){return Ie(e).lifecycleToken},t.updateLifecycleToken=function(e){var t=this.getLifecycleToken(e);this.lifecycleController.updateLifecycleToken(t)},t.updateReplayState=function(e){this.lifecycleController.updateIsReplay(e)},t.handleStartWatching=function(e){this.getLifecycleToken(e)&&(e.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},t.handleStopWatching=function(e){this.getLifecycleToken(e)&&this.lifecycleController.stopWatching()},t.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},e}(),ze=function(){function e(e){this.analytics=e,this.lapseMap={},this.analytics.on(ee,this.onTickEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(E,this.onAdSkipEvent.bind(this)),this.analytics.on(ae,this.onVideoViewEvent.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.lapseMap[t.id];if(void 0!==n){n.timePlayedToMs=0;var i=be(e);i&&i.contentType!==de&&!t.shouldLoop&&(this.emit(n,e),n.viewFired=!1)}}},t.onAdSkipEvent=function(e){this.onTickEvent(e);var t=Ie(e);if(void 0!==t){var n=this.lapseMap[t.id];this.emit(n,e)}},t.onVideoViewEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.lapseMap[t.id];void 0===n&&(n=this.initializeLapseMapForTrack(t),this.lapseMap[t.id]=n),n.viewFired=!0}},t.onTickEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.lapseMap[t.id];void 0===n&&(n=this.initializeLapseMapForTrack(t),this.lapseMap[t.id]=n),e.isScrubbing?n.timePlayedToMs=t.currentTimeMs:(this.updateTimingData(t,n),this.checkPlaybackLapse(n,e))}},t.initializeLapseMapForTrack=function(e){return{timePlayedMs:0,timePlayedToMs:e.currentTimeMs,viewFired:!1}},t.updateTimingData=function(e,t){var n=e.currentTimeMs-t.timePlayedToMs;t.timePlayedToMs=e.currentTimeMs,t.timePlayedMs+=n},t.checkPlaybackLapse=function(e,t){e.timePlayedMs>1e4&&this.emit(e,t)},t.emit=function(e,t){var n=be(t),i=e.viewFired,r=e.timePlayedMs;i&&r>0&&n&&n.contentType!==le&&(this.analytics.emit(Q,t,{playback_lapse_ms:Math.round(r)}),e.timePlayedMs=0)},e}(),qe=function(e){return t="AD_CTA_TO_ENGAGEMENT_MAPPING_ERROR",(n=new Error("Unable to map CTA type to engagement type for: "+e)).name=t,n;var t,n},Xe=function(){function e(){}return e.set=function(t){e.report=t},e}();h()(Xe,"report",(function(e){return console.warn(e)}));var Ze=((r={})[Y]="playback_start",r[j]="playback_25",r[B]="playback_50",r[W]="playback_75",r[G]="playback_95",r[H]="playback_complete",r[L]="mrc_view",r[R]="groupm_view",r[M]="1sec_view",r[N]="6sec_view",r[U]="short_form_complete",r[ae]="view",r[V]="play_from_tap",r[oe]="view_threshold",r),$e=function(){function e(e,t){var n=this;this.promotedLogHandler=t,Object.keys(Ze).forEach((function(t){e.on(t,(function(e,i){var r=Ie(e);void 0!==r&&n.log(n.buildEventName(t,r),e,i)}))})),e.on(Y,this.logImpression.bind(this)),e.on(T,this.onCtaClickEvent.bind(this)),e.on(ie,this.onVideoSessionEvent.bind(this))}var t=e.prototype;return t.buildEventName=function(e,t){var n=Ze[e];return"video_"+t.displayType+"_"+n},t.log=function(e,t,n,i){void 0===n&&(n={});var r=Ie(t),a=this.getPromotedEventData(t,r);if(void 0!==a.impression_id){var o=this.getAmplifyDetailsData(t,r,n),s=JSON.stringify({amplify_details:o}),c=i&&JSON.stringify(i),u=Object.assign(a,o,{event:e,card_event:s,engagement_metadata:c});this.promotedLogHandler.log(u)}},t.logImpression=function(e){var t=Ie(e);this.isPromotedTrack(e,t)&&this.log("impression",e)},t.onCtaClickEvent=function(e){var t=Ie(e),n=null==t?void 0:t.cta,i=Ee[null==n?void 0:n.type];if(!i)return Xe.report(qe(null==n?void 0:n.type));t.displayType===se?this.log("video_"+t.displayType+"_cta_"+i+"_click",e):this.log("video_cta_"+i+"_click",e)},t.onVideoSessionEvent=function(e,t){void 0!==t&&this.log("video_session",e,{},t)},t.isPromotedTrack=function(e,t){return t&&t.impressionId&&t.disclosureType},t.getPromotedEventData=function(e,t){var n=t.disclosureType||e.disclosureType;return{impression_id:t.impressionId||e.impressionId,earned:"earned"===n}},t.getAmplifyDetailsData=function(e,t,n){var i=be(e),r=Se(e)||{};return Object.assign({content_id:i.contentId,dynamic_preroll_type:r.dynamicPrerollType,preroll_uuid:r.contentId,preroll_owner_id:r.publisherId,video_uuid:t.contentId,video_type:t.displayType===ce?"video":"ad",video_is_muted:e.isMuted,video_visibility:Math.floor(100*e.percentVisible)},n)},e}(),et=function(){function e(e){this.analytics=e,this.analytics.on(ee,this.onTickEvent.bind(this))}return e.prototype.onTickEvent=function(e){var t=Ie(e);void 0!==t&&(e.isScrubbing&&void 0===this.scrubbingStartTime?this.scrubbingStartTime=t.currentTimeMs:e.isScrubbing||void 0===this.scrubbingStartTime||(t.currentTimeMs<this.scrubbingStartTime&&this.analytics.emit(q,e),this.scrubbingStartTime=void 0))},e}(),tt=((a={})[ae]="video_view",a[V]="play_from_tap",a[oe]="view_threshold",a[A]="video_mrc_audible_view",a[L]="video_mrc_view",a[N]="video_6sec_view",a[U]="video_short_form_complete",a[Y]="playback_start",a[j]="playback_25",a[B]="playback_50",a[W]="playback_75",a[G]="playback_95",a[H]="playback_complete",a[C]="intent_to_play",a[F]="play",a[x]="pause",a[z]="replay",a[w]="loop",a[D]="mute",a[ne]="unmute",a[I]="full_screen",a[X]="shrink",a[Q]="playback_lapse",a[K]="error",a[Z]="playback_startup_error",a[re]="video_quality_view",a[E]="video_ad_skip",a),nt=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce((function(e,t){return e[t]=!0,e}),{}),it="tweet",rt="client_event",at="live_video_heartbeat_event",ot=7,st=13,ct=16,ut=26,dt=28,lt=1,ht=2,pt=1,ft=2,vt=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],yt=/^([0-9]{1,2})_([0-9]+)$/,Et=function(){function e(e,t,n){var i=this;this.scribeHandler=t,this.context=n||{},this.isAdFormatsCard=-1!==vt.indexOf(this.context.cardType),Object.keys(tt).forEach((function(t){e.on(t,(function(e,n,r){i.scribe(tt[t],e,n,r)}))})),e.on(T,this.onCtaClickEvent.bind(this)),e.on(O,this.onCtaImpressionEvent.bind(this)),e.on(S,this.onHeartbeatEvent.bind(this)),e.on(m,this.onCaptionsToggledEvent.bind(this)),e.on(J,this.onPlaybackSpeedChangeEvent.bind(this))}var t=e.prototype;return t.onCaptionsToggledEvent=function(e,t){var n=t?"enable":"disable",i={page:"settings",section:"captions",element:"display_audio_transcriptions",action:n};this.scribe(n,e,{},{},rt,i)},t.onCtaClickEvent=function(e){var t=Ie(e).cta,n=Ee[null==t?void 0:t.type];if(!n)return Xe.report(qe(null==t?void 0:t.type));this.scribe("cta_"+n+"_click",e)},t.onCtaImpressionEvent=function(e){var t=Ie(e).cta,n=Ee[null==t?void 0:t.type];if(!n)return Xe.report(qe(null==t?void 0:t.type));this.scribe("cta_"+n+"_impression",e)},t.onHeartbeatEvent=function(e,t,n){var i=be(e);if(void 0!==i){var r;switch(i.contentType){case le:case ue:r=at;break;default:r=rt}this.scribe("heartbeat",e,t,n,r)}},t.onPlaybackSpeedChangeEvent=function(e,t){var n=t.newSpeed,i=t.oldSpeed,r={newSpeed:Oe(n),oldSpeed:Oe(i)};this.scribe("playback_speed_change",e,{},r)},t.scribe=function(e,t,n,i,r,a){void 0===n&&(n={}),void 0===i&&(i={}),void 0===r&&(r=rt),void 0===a&&(a=null);var o,s,c=be(t)||{},u=Ie(t)||{},d=Se(t)||{},l=t.session||{},h=(t.features||{}).isLiveTimecodeEnabled&&u.requestedTimecode>0?1e3*u.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(e)&&(o={media_client_event_type:(s={},s[e]=i,s),session_state:{session_id:l.id,content_video_identifier:gt(this.getContentIdentifier(c),this.context.scribeContext),video_ads_passthrough_data:t.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(t,c.contentType),tweet_id:this.getTweetId(t.source,c.contentType)},playing_media_state:{video_type:u.displayType===ce?ht:lt,media_asset_url:this.getVariantUrl(u),media_timecode_millis:Me(h),media_metadata:{broadcast_id:u.broadcastId,twitter_publisher_id:Me(u.publisherId),publisher_identifier:Tt(u.publisherId,u.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:_t(u.contentType,u.isLive)},player_state:{is_muted:t.isMuted}});var p=Object.assign({},this.getBaseItem(t.source,t.eventId),{media_asset_url:this.getVariantUrl(u),video_uuid:u.contentId,video_owner_id:u.publisherId,video_type:u.displayType===ce?"video":"ad",promoted_id:u.impressionId||t.impressionId,content_id:c.contentId,dynamic_preroll_type:d.dynamicPrerollType,preroll_uuid:d.contentId,preroll_owner_id:d.publisherId,publisher_id:c.publisherId,media_session_id:l.id,video_analytics_scribe_passthrough:t.videoAnalyticsScribePassthrough,client_media_event:o,media_timecode_millis:h,disclosure_type:u.disclosureType||t.disclosureType},n,this.getLexMetadata(t,c)),f=a||{element:this.getScribeElement(c),action:e};this.scribeHandler.log({namespace:f,category:r,data:{items:[p]}})},t.getContentIdentifier=function(e){var t=e.contentId,n=this.parseMediaKeyString(t);if(n)return{media_platform_identifier:n};switch(e.contentType){case he:case de:case le:case ue:return this.getMediaPlatformIdentifierUsingDefaultCategory(e);case ye:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(e),media_id:t}}:{amplify_card_identifier:{vmap_url:e.vmapUrl,content_id:t}};case ve:case fe:case pe:default:return{unknown_identifier:{content_id:t}}}},t.parseMediaKeyString=function(e){var t=yt.exec(e)||[],n=t[1],i=t[2],r=+n;if(r&&i)return{media_category:r,media_id:i}},t.getMediaPlatformIdentifierUsingDefaultCategory=function(e){var t=this.defaultMediaCategory(e);return t?{media_platform_identifier:{media_category:t,media_id:e.contentId}}:{unknown_identifier:{content_id:e.contentId}}},t.getMediaEntityCategoryUsingPlaybackUrl=function(e){var t=this.getVariantUrl(e);if(t){if(-1!==t.indexOf("amplify_video"))return st;if(-1!==t.indexOf("ext_tw_video"))return ot}},t.defaultMediaCategory=function(e){switch(e.contentType){case de:return ct;case le:return ut;case ue:return dt;case he:return this.getMediaEntityCategoryUsingPlaybackUrl(e);default:return}},t.getLiveEventIdentifier=function(e,t){return e.eventId?{lex_event_identifier:{lex_event_id:e.eventId}}:t===le?{legacy_live_event_identifier:{legacy_live_event_id:e.source.id}}:void 0},t.getTweetId=function(e,t){return t===ue||t===le?e.tweetId:e.type===it?e.id:void 0},t.getScribeElement=function(e){switch(e.contentType){case ve:return"vine_player";case de:return"gif_player";case ye:return"platform_amplify_card";case le:case ue:return"live_video_player";case pe:return"partner_video_player";case fe:return"periscope_player";case he:default:return"video_player"}},t.getBaseItem=function(e,t){var n=this.context.baseScribeItem;return n||(e.type===it?{id:e.id,item_type:"0"}:e.tweetId?{id:e.tweetId,item_type:"0"}:t?{id:t,item_type:"28"}:void 0)},t.getLexMetadata=function(e,t){var n=this.context.scribeContext||{},i={},r={};return t.broadcastId&&(i.is_replay_broadcast=!t.isLive,r.tweet_id=e.source.tweetId,"live_event_timeline"===n.page&&"tweet"!==n.component?i.host_broadcast_id=t.broadcastId:i.target_broadcast_id=t.broadcastId),e.eventId&&("live_event_timeline"===n.page&&"tweet"!==n.component?r.host_event_id=e.eventId:r.target_event_id=e.eventId),{live_broadcast_details:i,live_video_event_details:r}},t.getVariantUrl=function(e){var t=e.variants&&e.variants[e.currentVariantIndex];return t&&t.src},t.isActionSupportedInClientMediaEvent=function(e){return!nt[e]},e}();function mt(e){return e&&"messages"===e.page}function gt(e,t){return mt(t)?{scrubbed_identifier:{}}:e}function Tt(e,t,n){return mt(n)?{scrubbed_publisher_identifier:{}}:e&&t?{twitter_periscope_publisher_identifier:{twitter_id:Me(e),periscope_id:t}}:e?{twitter_publisher_identifier:{id:Me(e)}}:t?{periscope_publisher_identifier:{id:t}}:{unknown_publisher_identifier:{}}}function _t(e,t){if(e===ue||e===le||e===fe)return{broadcast_state:t?pt:ft}}var bt=function(){function e(e){this.analytics=e,this.analytics.on(z,this.onReplayEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(C,this.onInitialIntendToPlayEvent.bind(this))}var t=e.prototype;return t.onInitialIntendToPlayEvent=function(e){this.resetLatencyStartDate(e.intentToPlayTime)},t.onReplayEvent=function(){this.resetLatencyStartDate()},t.onTrackFinishedEvent=function(e){this.resetLatencyStartDate(),this.trackId!==e.currentTrackId&&(this.trackId=e.currentTrackId)},t.resetLatencyStartDate=function(e){this.latencyStartDate=e||new Date},t.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},e}(),It=[{progress:.25,event:j},{progress:.5,event:B},{progress:.75,event:W},{progress:.95,event:G},{progress:1,event:H}],Rt=function(){function e(e){this.analytics=e,this.eventMap={},this.playbackLatencyListener=new bt(e),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(ee,this.onTickEvent.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=Ie(e);void 0!==t&&(t.shouldLoop||(this.eventMap[e.currentTrackId]={}))},t.onTickEvent=function(e){var t=Ie(e);if(void 0!==t&&t.durationMs){var n=this.eventMap[t.id];void 0===n&&(n={},this.eventMap[t.id]=n),this.checkAllTentpoles(t,n,e)}},t.checkAllTentpoles=function(e,t,n){if(n.isPlaying){var i=e.durationMs,r=e.currentTimeMs,a=this.playbackLatencyListener.getLatencyData()||{},o={latency_millis:a.latency,cache_info:{notCached:{}}};this.emitOnce(Y,t,n,a,o),e.isLive||this.checkProgressTentpoles(i,r,t,n)}},t.checkProgressTentpoles=function(e,t,n,i){var r=this;It.forEach((function(a){var o=a.progress*e;t>=o-1e3&&t<=o+1e3&&r.emitOnce(a.event,n,i)}))},t.emitOnce=function(e,t,n,i,r){t[e]||(this.analytics.emit(e,n,i,r),t[e]=!0)},e}(),St=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],Pt=((o={})[ve]=2,o[de]=3,o[ye]=1,o[he]=1,o[le]=1,o[fe]=5,o[ue]=1,o),Ot=function(){function e(e){this.analytics=e,this.sessionDataStore={},this.analytics.on(ee,this.onTickEvent.bind(this)),this.analytics.on(I,this.onFullscreenEvent.bind(this)),this.analytics.on(X,this.onShrinkEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(E,this.onTrackInterrupt.bind(this)),this.analytics.on($,this.onTrackInterrupt.bind(this))}var t=e.prototype;return t.onTickEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.getOrCreateNewSessionDataForTrack(t,e);e.isScrubbing?n.currentTimeMs=t.currentTimeMs:this.updateViewData(t,n,e)}},t.onFullscreenEvent=function(e){var t=Ie(e);void 0!==t&&(this.getOrCreateNewSessionDataForTrack(t,e).isFullscreenMode=!0)},t.onShrinkEvent=function(e){var t=Ie(e);void 0!==t&&(this.getOrCreateNewSessionDataForTrack(t,e).isFullscreenMode=!1)},t.onTrackFinishedEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.sessionDataStore[t.id];if(void 0!==n)if(t.shouldLoop)n.currentTimeMs=0;else{if(n.timeWatchedMs>0){var i=this.constructVideoSessionDetails(n,t);this.emitVideoSessionEvent(e,i)}this.sessionDataStore[t.id]=void 0}}},t.onTrackInterrupt=function(e){var t=Ie(e);if(void 0!==t){var n=this.sessionDataStore[t.id];if(void 0!==n){if(n.timeWatchedMs>0){var i=this.constructVideoSessionDetails(n,t);this.emitVideoSessionEvent(e,i)}this.sessionDataStore[t.id]=void 0}}},t.getOrCreateNewSessionDataForTrack=function(e,t){var n=this.sessionDataStore[e.id];return void 0===n&&(n={sizesInfoAtTheStart:t.sizesInfo,currentTimeMs:e.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[e.id]=n),n},t.generateNewAggregateHistogram=function(){for(var e,t={},n=v(St);!(e=n()).done;){t[e.value]=0}return t},t.generateNewMaxContinuousHistogram=function(){for(var e,t={},n=v(St);!(e=n()).done;){t[e.value]={current:0,max:0}}return t},t.resetContinuousViewDataForHistogram=function(e){for(var t,n=v(St);!(t=n()).done;){var i=t.value;this.resetContinuousViewDataForBucket(e[i])}},t.resetContinuousViewDataForBucket=function(e){e.max=Math.max(e.current,e.max),e.current=0},t.updateViewData=function(e,t,n){var i=e.currentTimeMs-t.currentTimeMs,r=t.isFullscreenMode?1:n.percentVisible,a=t.isFullscreenMode?1:n.percentOfViewportOccupied;t.currentTimeMs=e.currentTimeMs,i<0||(t.timeWatchedMs+=i,this.updateAggregateHistogram(t.watchedMsByInViewPct,r,i),this.updateAggregateHistogram(t.watchedMsByViewportPct,a,i),this.updateMaxContinuousHistogram(t.maxContinuousWatchedMsByInViewPct,r,i),n.isMuted?this.resetContinuousViewDataForHistogram(t.maxContinuousWatchedWithAudioMsByInViewPct):(t.timeWatchedWithAudioMs+=i,this.updateAggregateHistogram(t.watchedWithAudioMsByInViewPct,r,i),this.updateMaxContinuousHistogram(t.maxContinuousWatchedWithAudioMsByInViewPct,r,i)),t.isFullscreenMode&&(t.timeWatchedFullscreenMs+=i,n.isMuted||(t.timeWatchedFullscreenWithAudioMs+=i)))},t.updateAggregateHistogram=function(e,t,n){if(0!==t)for(var i,r=100*t,a=v(St);!(i=a()).done;){var o=i.value;r>=o&&(e[o]+=n)}},t.updateMaxContinuousHistogram=function(e,t,n){if(0!==t)for(var i,r=100*t,a=v(St);!(i=a()).done;){var o=i.value;r>=o?e[o].current+=n:e[o].current>0&&this.resetContinuousViewDataForBucket(e[o])}else this.resetContinuousViewDataForHistogram(e)},t.constructVideoSessionDetails=function(e,t){return{video_details:{is_preroll_video:t.displayType===se,video_length:Math.round(t.durationMs),time_watched:Math.round(e.timeWatchedMs),time_watched_fullscreen:Math.round(e.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(e.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(e.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(e.watchedWithAudioMsByInViewPct[100]),video_type:Pt[t.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(e.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(e.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(e.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(e.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(e.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:e.sizesInfoAtTheStart.viewportSize,ad_size:e.sizesInfoAtTheStart.mediaSize}}}},t.constructAggregateHistogramPayload=function(e){for(var t,n={},i=v(St);!(t=i()).done;){var r=t.value;n[r]=Math.round(e[r])}return{histogram:n}},t.constructMaxContinuousHistogramPayload=function(e){for(var t,n={},i=v(St);!(t=i()).done;){var r=t.value,a=e[r];n[r]=Math.round(Math.max(a.current,a.max))}return{histogram:n}},t.emitVideoSessionEvent=function(e,t){this.analytics.emit(ie,e,t)},e}(),Ct=[ae,V,oe,M,R,A,L,re,N,U],kt=[M,A,L,re],wt=function(){function e(e,t){this.analytics=e,this.context=t,this.eventMap={},this.analytics.on(ee,this.onTickEvent.bind(this)),this.analytics.on(te,this.onTrackFinishedEvent.bind(this)),this.analytics.on(x,this.onPauseEvent.bind(this)),this.analytics.on(H,this.onPlaybackComplete.bind(this))}var t=e.prototype;return t.onTrackFinishedEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.eventMap[t.id];void 0!==n&&(t.shouldLoop?n.timePlayedToMs=0:this.eventMap[t.id]=void 0)}},t.onPlaybackComplete=function(e){var t=Ie(e);if(void 0!==t){var n=this.eventMap[t.id];void 0!==n&&this.context&&this.context.enableShortFormCompleteLogging&&this.emitOnce(U,n,e)}},t.onPauseEvent=function(e){this.resetContinuousViewEventTimingData(e)},t.onTickEvent=function(e){var t=Ie(e);if(void 0!==t){var n=this.eventMap[t.id];if(void 0===n){n={timePlayedToMs:t.currentTimeMs};for(var i,r=v(Ct);!(i=r()).done;){n[i.value]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[t.id]=n}e.isScrubbing?(n.timePlayedToMs=t.currentTimeMs,this.resetContinuousViewEventTimingData(e)):(this.updateTimingData(t,n,e),this.checkViewEvents(t,n,e)),this.checkPlayFromTap(n,e)}},t.updateTimingData=function(e,t,n){var i=e.currentTimeMs-t.timePlayedToMs;t.timePlayedToMs=e.currentTimeMs;var r=n.percentVisible;r>=1&&(t[oe].timePlayedMs+=i),r>=1?t[M].timePlayedMs+=i:t[M].timePlayedMs=0,r>=.5&&Pe(n)?t[A].timePlayedMs+=i:t[A].timePlayedMs=0,r>=.5?t[L].timePlayedMs+=i:t[L].timePlayedMs=0,r>=1&&!n.isMuted&&(t[R].timePlayedMs+=i),r>=.5?t[re].timePlayedMs+=i:t[re].timePlayedMs=0,t[N].timePlayedMs+=i,r>=.5&&(t[N].visibilityWeightedTimePlayedMs+=r*i),t[U].timePlayedMs+=i},t.resetContinuousViewEventTimingData=function(e){var t=this.eventMap[e.currentTrackId];if(void 0!==t)for(var n,i=v(kt);!(n=i()).done;){t[n.value].timePlayedMs=0}},t.checkViewEvents=function(e,t,n){var i;t[oe].timePlayedMs>=(!(i=e).isLive&&i.durationMs>0&&!i.shouldLoop?Math.min(i.durationMs-500,3e3):3e3)&&(this.emitOnce(oe,t,n),this.emitOnce(ae,t,n)),t[M].timePlayedMs>=1e3&&this.emitOnce(M,t,n),t[R].timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?.5*e.durationMs:Number.MAX_SAFE_INTEGER}(e)&&this.emitOnce(R,t,n),t[A].timePlayedMs>=2e3&&this.emitOnce(A,t,n),t[L].timePlayedMs>=2e3&&this.emitOnce(L,t,n),t[re].timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.95*e.durationMs,1e4):1e4}(e)&&this.emitOnce(re,t,n);var r=t[N];r.timePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.95*e.durationMs,6e3):6e3}(e)&&r.visibilityWeightedTimePlayedMs>=function(e){return!e.isLive&&e.durationMs>0?Math.min(.5*e.durationMs,3e3):3e3}(e)&&this.emitOnce(N,t,n),this.context&&this.context.enableShortFormCompleteLogging&&t[U].timePlayedMs>=15e3&&this.emitOnce(U,t,n)},t.checkPlayFromTap=function(e,t){t.isPlaying&&!t.isPreview&&(this.emitOnce(V,e,t),this.emitOnce(ae,e,t))},t.emitOnce=function(e,t,n){t[e].fired||(this.analytics.emit(e,n),t[e].fired=!0)},e}(),At=function(e){function t(t,n,i,r){var a;(a=e.call(this)||this).scribeListener=new Et(c()(a),t,r),a.promotedLogListener=new $e(c()(a),n),a.tentpoleListener=new Rt(c()(a)),a.viewListener=new wt(c()(a),r),a.playbackLapseListener=new ze(c()(a)),a.errorListener=new Le(c()(a)),a.beaconListener=new ke(c()(a)),a.rewindListener=new et(c()(a)),a.heartbeatListener=new Ne(c()(a)),a.loopListener=new Ve(c()(a)),a.intendToPlayListener=new Fe(c()(a)),a.videoSessionListener=new Ot(c()(a)),a.ctaImpressionListener=new Ae(c()(a)),a.captionsListener=new we(c()(a));var o=new Ke(i,r),s=new Qe(o);return a.lifecycleListener=new Ye(c()(a),s),a}d()(t,e);var n=t.prototype;return n.onTickEvent=function(e){this.emit(ee,e)},n.onReplay=function(e){var t=Ie(e);void 0!==t&&(t.shouldLoop||this.emit(z,e))},n.onTrackFinished=function(e){this.emit(te,e)},n.onIntendToPlay=function(e){this.emit(k,e)},n.onPlay=function(e){this.emit(F,e)},n.onPause=function(e){this.emit(x,e)},n.onMute=function(e){this.emit(D,e)},n.onUnmute=function(e){this.emit(ne,e)},n.onFullScreen=function(e){this.emit(I,e)},n.onShrink=function(e){this.emit(X,e)},n.onAdSkip=function(e){this.emit(E,e)},n.onCtaImpression=function(e){this.emit(_,e)},n.onCtaClick=function(e){this.emit(T,e)},n.onConfigLoaded=function(e){this.emit(g,e)},n.onError=function(e,t){this.emit(b,e,t)},n.onTeardown=function(e){this.emit($,e)},n.onPlaybackSpeedChange=function(e,t){this.emit(J,e,t)},t}(f.a);t.a=At},962:function(e,t,n){n(412)("iterator")},963:function(e,t,n){var i=n(11),r=n(4),a=n(12),o=r.Date,s=a(o.prototype.getTime);i({target:"Date",stat:!0},{now:function(){return s(new o)}})},964:function(e,t,n){var i=n(12),r=n(46),a=Date.prototype,o=i(a.toString),s=i(a.getTime);"Invalid Date"!=String(new Date(NaN))&&r(a,"toString",(function(){var e=s(this);return e==e?o(this):"Invalid Date"}))},965:function(e,t,n){n(11)({target:"Function",proto:!0},{bind:n(966)})},966:function(e,t,n){"use strict";var i=n(4),r=n(12),a=n(106),o=n(33),s=n(34),c=n(209),u=i.Function,d=r([].concat),l=r([].join),h={},p=function(e,t,n){if(!s(h,t)){for(var i=[],r=0;r<t;r++)i[r]="a["+r+"]";h[t]=u("C,a","return new C("+l(i,",")+")")}return h[t](e,n)};e.exports=u.bind||function(e){var t=a(this),n=t.prototype,i=c(arguments,1),r=function(){var n=d(i,c(arguments));return this instanceof r?p(t,n.length,n):t.apply(e,n)};return o(n)&&(r.prototype=n),r}},967:function(e,t,n){var i=n(11),r=n(4),a=n(115),o=n(22),s=n(105),c=n(209),u=/MSIE .\./.test(s),d=r.Function,l=function(e){return function(t,n){var i=arguments.length>2,r=i?c(arguments,2):void 0;return e(i?function(){a(o(t)?t:d(t),this,r)}:t,n)}};i({global:!0,bind:!0,forced:u},{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},968:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=n(992).a},969:function(e,t,n){"use strict";(function(e){var i=n(2),r=n.n(i),a=n(8),o=n.n(a),s=n(9),c=n.n(s),u=n(1),d=n.n(u),l=(n(53),n(20),n(54),n(52),n(152),n(88),n(253),n(79),n(590)),h=n(589),p=n(651),f=n(612),v=n(981),y=n(749),E=n(611),m=n(594),g=n(613),T=n(979),_=n(980),b=n(620),I=n(990),R=n(660),S=n(970),P=n.n(S),O=n(991),C=n(748),k=n(591),w=n(614),A=n(615),L=n(692),D=n(621),M=function(){function t(n){var i=this,a=n.source,s=void 0===a?{}:a,c=n.videoConfig,u=n.domElement,h=n.httpClient,S=n.twitterAuthedHttpClient,O=n.options,M=void 0===O?{}:O;o()(this,t),d()(this,"teardown",(function(){i.broadcastUpdater&&i.broadcastUpdater.cancelUpdate(),i.unsubscribeCalls.forEach((function(e){e()})),i.unsubscribeCalls=[],Object(C.c)(i.id),i.source=void 0,i.session=void 0,void 0!==i.hydraExperienceId&&I.a.dispatch(Object(L.teardownExperience)(i.hydraExperienceId)),i.video&&i.video.teardown(),I.a.dispatch(Object(R.c)(i.id)),Object(w.h)(i.id),i.logger.clearLogs(),i.rejectPlayerReadyPromise()})),d()(this,"play",(function(){return i.initiallyMuted?i.playPreview():i.playerReadyPromise.then((function(){i._dispatch(l.bb(i.id))})),i})),d()(this,"pause",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.Y(i.id))})),i})),d()(this,"replay",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.eb(i.id))})),i})),d()(this,"mute",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.X(i.id))})),i})),d()(this,"unmute",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.hb(i.id))})),i})),d()(this,"scrubToFraction",(function(e){return i.playerReadyPromise.then((function(){i._dispatch(l.fb(i.id,e))})),i})),d()(this,"setScrubbing",(function(e){return i.playerReadyPromise.then((function(){i._dispatch(l.gb(i.id,e))})),i})),d()(this,"setVolume",(function(e){return i.playerReadyPromise.then((function(){i._dispatch(l.ib(i.id,e))})),i})),d()(this,"setPlaybackRate",(function(e){return i.playerReadyPromise.then((function(){i._dispatch(l.cb(i.id,e))})),i})),d()(this,"setPlaybackTimeRange",(function(e){var t=e.endTimeS,n=e.startTimeS;return i.playerReadyPromise.then((function(){n<=0&&t>=i.video.getVideoTag().duration?i._dispatch(l.N(i.id)):i._dispatch(l.db(i.id,n,t))})),i})),d()(this,"fullScreen",(function(e){var t=e||i.domElement;return I.a.dispatch(Object(D.f)(i.id,t,i.video.getVideoTag())),i})),d()(this,"exitFullScreen",(function(){return I.a.dispatch(Object(D.g)(i.id)),i})),d()(this,"hideControls",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.Q(i.id))})),i})),d()(this,"showControls",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.jb(i.id))})),i})),d()(this,"playPreview",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return i.playerReadyPromise.then((function(){var t=I.a.getState(),n=t&&t.players&&t.players[i.id]||{},r=n.hasPlaybackStarted;!n.isPreview&&r||e?i._dispatch(l.bb(i.id)):(i._dispatch(Object(A.f)(i.id)),i.initiallyMuted&&(i.initiallyMuted=!1))})),i})),d()(this,"pausePreview",(function(){return i.playerReadyPromise.then((function(){var e=I.a.getState();(e&&e.players&&e.players[i.id]||{}).isPreview?i._dispatch(Object(A.e)(i.id)):i._dispatch(l.Y(i.id))})),i})),d()(this,"objectFitVideo",(function(e){return-1!==m.c.indexOf(e)&&i.video&&(i.video.objectFitVideo=e),i})),d()(this,"toggleCaptions",(function(){return i.playerReadyPromise.then((function(){var e=I.a.getState(),t=e&&e.players&&e.players[i.id],n=!(!t||!t.areCaptionsShown);i._dispatch(n?l.V(i.id,!0):l.W(i.id,!0))})),i})),d()(this,"setCaptionDefaultOffset",(function(e){var t=e.bottom;i._dispatch(l.U(i.id,{bottom:t}))})),d()(this,"togglePiPMode",(function(){return i.playerReadyPromise.then((function(){var e=I.a.getState(),t=e&&e.players&&e.players[i.id],n=!(!t||!t.inPiPMode);i._dispatch(n?l.Z(i.id):l.ab(i.id))})),i})),d()(this,"nextTrack",(function(){return i.playerReadyPromise.then((function(){i._dispatch(Object(E.o)(i.id))})),i})),d()(this,"triggerError",(function(e){var t=new Error(e||"synthetic");return I.a.dispatch(Object(g.h)(i.id,t)),i})),d()(this,"reload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoPlay,n=void 0!==t&&t,a=e.requestedTimecode;i.playerReadyPromise=new Promise((function(e,t){i.resolvePlayerReadyPromise=e,i.rejectPlayerReadyPromise=t})).catch((function(){}));var o=I.a.getState()||{players:{}},s=o.players[i.id],c=-1;if(s){if(void 0!==a)i.playerOptions.requestedTimecode=a;else if(0===s.currentTrackId){var u=Object(f.b)(s);c=u.currentTimeMs/1e3}var d=s.isMuted,h=s.isPlaying,p=s.isPreview,v=h||n;i.playerReadyPromise.then((function(){p?v?i._dispatch(Object(A.f)(i.id)):i._dispatch(Object(A.e)(i.id)):(v&&i._dispatch(l.bb(i.id)),d&&i._dispatch(l.X(i.id)))}))}return i.video&&i.video.teardownPlayer(),I.a.dispatch(i._reloadPlayer(i.id,i.source,i.videoConfig,i.session,i.resolvePlayerReadyPromise,i.rejectPlayerReadyPromise,r()(r()({},i.playerOptions),{},{reloadTimecode:c}),i.logger)),i})),d()(this,"on",(function(e,t){return Object.keys(p.a).forEach((function(n){p.a[n]===e&&Object(C.a)(i.id,e,t)})),i})),d()(this,"updatePosition",(function(e){var t=e.percentOfViewportOccupied,n=e.percentVisible,r=e.sizesInfo;return i.playerReadyPromise.then((function(){i._dispatch(l.kb(i.id,n,t,r))})),i})),d()(this,"callToActionClicked",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.L(i.id))})),i})),d()(this,"callToActionImpression",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.M(i.id))})),i})),d()(this,"liveClickthroughClicked",(function(){return i.playerReadyPromise.then((function(){i._dispatch(l.R(i.id))})),i})),d()(this,"subscribe",(function(e){var t=I.a.getState(),n=i._getPlayerState(t),r=i._getHydraState(t),a=I.a.subscribe((function(){var t=I.a.getState(),a=i._getPlayerState(t),o=i._getHydraState(t);void 0!==a&&(n!==a||r!==o)&&(n=a,r=o,e(a,o))}));return i.unsubscribeCalls.push(a),a})),d()(this,"onStoreUpdate",(function(e){var t=Object(f.b)(e),n="ad"===(null==t?void 0:t.displayType),r=e.errorInfo,a=r.adFailed,o=r.autoRetry,s=r.backoffMs,c=n&&a&&!1!==t.shouldAutoAdvance;(o||c)&&setTimeout((function(){i.reload()}),(c?0:s)||0)})),this.id=t.id,t.id+=1,this.unsubscribeCalls=[],this.source=s,this.videoConfig=c,this.session={id:P()()},this.playbackSessionId=M.playbackSessionId,this.initiallyMuted=M.initiallyMuted,this._reloadPlayer=k.j,this.playerReadyPromise=new Promise((function(e,t){i.resolvePlayerReadyPromise=e,i.rejectPlayerReadyPromise=t})).then(Promise.resolve()).catch((function(){})),M.autoplay&&this.play(),this.logger=new y.a(this.id),e.VIDEO_PLAYER_DEBUG_ENABLED&&(y.a.debuggingEnabled=!0),Object(w.f)(this.id,new T.a(new _.a(h)),new T.a(new _.a(S||h)),this.logger,new v.a,M.featureProvider),this.subscribe(this.onStoreUpdate),this.source.type!==b.a.BROADCAST&&this.source.type!==b.a.STATIC_BROADCAST&&this.source.type!==b.a.AUDIO_SPACE||(this.hydraExperienceId=M.hydraExperienceId=I.a.dispatch(Object(L.registerExperience)())),this.options=M;var N=-1,U=this.playbackSessionId?Object(w.g)(this.playbackSessionId):void 0;U&&(this.options.videoEl=M.videoEl||U.videoEl,N=U.reloadTimecode);var x=this.options,F=x.bitrateCap,V=x.featureProvider,j=x.includeBroadcastEventAssociation,B=x.initiallyMutedCaptions,W=x.intentToPlayTime,G=x.maxLoopCount,H=x.promotedContext,K=x.requestedTimecode,Q=x.showGeolocationPrompt;this.playerOptions={bitrateCap:F,featureProvider:V,includeBroadcastEventAssociation:j,initiallyMutedCaptions:B,intentToPlayTime:W,maxLoopCount:G,promotedContext:H,reloadTimecode:N,requestedTimecode:K,showGeolocationPrompt:Q},I.a.dispatch(Object(k.g)(this.id,s,c,this.session,M.analytics,M.adProvider,this.resolvePlayerReadyPromise,this.rejectPlayerReadyPromise,this.playerOptions,this.logger)).then((function(e){i.broadcastUpdater=e})),u&&this.attach(u)}return c()(t,[{key:"attach",value:function(e){this.video||(this.domElement=e,this.video=new O.a(this.domElement,this.id,I.a,this.reload,this.logger,this.options))}},{key:"_getPlayerState",value:function(e){if(e.players)return e.players[this.id]}},{key:"_getHydraState",value:function(e){if(void 0!==this.hydraExperienceId&&e.hydraExperiences)return e.hydraExperiences[this.hydraExperienceId]}},{key:"_dispatch",value:function(e){var t=I.a.getState();this._getPlayerState(t)?I.a.dispatch(e):this.triggerError(h.a.MEDIA_TEARDOWN_ERROR)}}]),t}();d()(M,"id",0),t.a=M}).call(this,n(156))},970:function(e,t,n){var i=n(971),r=n(972);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[a+s]=o[s];return t||r(o)}},971:function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},972:function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,r=n;return[r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],"-",r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]],r[e[i++]]].join("")}},973:function(e,t,n){"use strict";var i=n(16);n(69),n(261),n(974),n(976),n(79),t.__esModule=!0,t.default=t.registerExperience=t.REGISTER_EXPERIENCE=void 0;var r=i(n(45)),a=n(747);t.REGISTER_EXPERIENCE="REGISTER_EXPERIENCE";t.registerExperience=function(){return{type:"REGISTER_EXPERIENCE"}};t.default=function(e){return function(t){return function(n){switch(n.type){case"REGISTER_EXPERIENCE":var i=e.getState(),o=Object.keys(i.hydraExperiences||{}).map((function(e){return Number.parseInt(e,10)})),s=Math.max.apply(Math,(0,r.default)(o))+1;return Number.isFinite(s)||(s=0),e.dispatch((0,a.initializeExperience)(s)),s;default:return t(n)}}}}},974:function(e,t,n){n(11)({target:"Number",stat:!0},{isFinite:n(975)})},975:function(e,t,n){var i=n(4).isFinite;e.exports=Number.isFinite||function(e){return"number"==typeof e&&i(e)}},976:function(e,t,n){var i=n(11),r=n(418);i({target:"Number",stat:!0,forced:Number.parseInt!=r},{parseInt:r})},977:function(e,t,n){"use strict";n(80),n(79),t.__esModule=!0,t.combineReducers=void 0;t.combineReducers=function(e){return function(t,n){return Object.keys(e).reduce((function(i,r){return i[r]=e[r](t[r],n),i}),{})}}},978:function(e,t,n){var i=n(413),r=n(409),a=n(271),o=n(414);e.exports=function(e){return i(e)||r(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},979:function(e,t,n){"use strict";var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=(n(32),n(633)),c={},u=function(){function e(t){r()(this,e),this.httpClient=t}return o()(e,[{key:"dispatch",value:function(e){if("get"===e.method.toLowerCase()){var t=e.params?Object(s.b)(e.params):"",n=t?"?".concat(t):"",i="".concat(e.host).concat(e.path).concat(n);return c[i]||(c[i]=this.httpClient.dispatch(e).then((function(e){return delete c[i],e})).catch((function(e){throw delete c[i],e}))),c[i]}return this.httpClient.dispatch(e)}}]),e}();t.a=u},980:function(e,t,n){"use strict";var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=(n(20),n(253),function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;r()(this,e),this.httpClient=t,this.backOffMSec=n}return o()(e,[{key:"dispatch",value:function(e){var t=this;return new Promise((function(n,i){t._dispatchOnce(0,n,i,e)}))}},{key:"_dispatchOnce",value:function(e,t,n,i){var r=this;this.httpClient.dispatch(i).then((function(a){r._handleResponse(e,t,n,i,a)})).catch((function(a){r._handleReject(e,t,n,i,a)}))}},{key:"_handleResponse",value:function(e,t,n,i,r){var a=this,o=!1;switch(r.status){case 404:case 425:case 429:case 500:case 502:case 503:case 504:case 508:o=!0}!o||e>=3?t(r):setTimeout((function(){a._dispatchOnce(e+1,t,n,i)}),this._backOffMSec(e))}},{key:"_handleReject",value:function(e,t,n,i,r){var a=this;e>=3?n(r):setTimeout((function(){a._dispatchOnce(e+1,t,n,i)}),this._backOffMSec(e))}},{key:"_backOffMSec",value:function(e){var t=this.backOffMSec,n=Math.pow(3,e)*t;return t+Math.random()*(n-t)}}]),e}());t.a=s},981:function(e,t,n){"use strict";var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=function(){function e(){r()(this,e),this.byteAccumulator=0}return o()(e,[{key:"add",value:function(e){this.byteAccumulator+=e}},{key:"getAndReset",value:function(){var e=this.byteAccumulator;return this.byteAccumulator=0,e}}]),e}();t.a=s},982:function(e,t,n){"use strict";var i=n(11),r=n(983),a=n(66),o=n(14),s=n(94),c=n(102),u=n(38).f,d=n(275),l=n(46),h=n(34),p=n(131),f=n(30),v=n(419),y=n(273),E=n(754),m=n(408),g=n(63),T=n(29),_=n(72),b=a("Error"),I=a("DOMException")||function(){try{(new(a("MessageChannel")||r("worker_threads").MessageChannel)).port1.postMessage(new WeakMap)}catch(e){if("DATA_CLONE_ERR"==e.name&&25==e.code)return e.constructor}}(),R=I&&I.prototype,S=b.prototype,P=g.set,O=g.getterFor("DOMException"),C="stack"in b("DOMException"),k=function(e){return h(E,e)&&E[e].m?E[e].c:0},w=function(){p(this,A);var e=arguments.length,t=y(e<1?void 0:arguments[0]),n=y(e<2?void 0:arguments[1],"Error"),i=k(n);if(P(this,{type:"DOMException",name:n,message:t,code:i}),T||(this.name=n,this.message=t,this.code=i),C){var r=b(t);r.name="DOMException",u(this,"stack",c(1,m(r.stack,1)))}},A=w.prototype=s(S),L=function(e){return{enumerable:!0,configurable:!0,get:e}},D=function(e){return L((function(){return O(this)[e]}))};T&&d(A,{name:D("name"),message:D("message"),code:D("code")}),u(A,"constructor",c(1,w));var M=o((function(){return!(new I instanceof b)})),N=M||o((function(){return S.toString!==v||"2: 1"!==String(new I(1,2))})),U=M||o((function(){return 25!==new I(1,"DataCloneError").code})),x=M||25!==I.DATA_CLONE_ERR||25!==R.DATA_CLONE_ERR,F=_?N||U||x:M;i({global:!0,forced:F},{DOMException:F?w:I});var V=a("DOMException"),j=V.prototype;for(var B in N&&(_||I===V)&&l(j,"toString",v),U&&T&&I===V&&u(j,"code",L((function(){return k(f(this).name)}))),E)if(h(E,B)){var W=E[B],G=W.s,H=c(6,W.c);h(V,G)||u(V,G,H),h(j,G)||u(j,G,H)}},983:function(e,t,n){var i=n(132);e.exports=function(e){try{if(i)return Function('return require("'+e+'")')()}catch(e){}}},984:function(e,t,n){"use strict";var i=n(11),r=n(66),a=n(102),o=n(38).f,s=n(34),c=n(131),u=n(162),d=n(273),l=n(754),h=n(408),p=n(72),f=r("Error"),v=r("DOMException"),y=function(){c(this,E);var e=arguments.length,t=d(e<1?void 0:arguments[0]),n=d(e<2?void 0:arguments[1],"Error"),i=new v(t,n),r=f(t);return r.name="DOMException",o(i,"stack",a(1,h(r.stack,1))),u(i,this,y),i},E=y.prototype=v.prototype,m="stack"in f("DOMException"),g="stack"in new v(1,2),T=m&&!g;i({global:!0,forced:p||T},{DOMException:T?y:v});var _=r("DOMException"),b=_.prototype;if(b.constructor!==_)for(var I in p||o(b,"constructor",a(1,_)),l)if(s(l,I)){var R=l[I],S=R.s;s(_,S)||o(_,S,a(6,R.c))}},985:function(e,t,n){var i=n(66);n(107)(i("DOMException"),"DOMException")},986:function(e,t,n){"use strict";var i=n(11),r=n(72),a=n(410),o=n(14),s=n(66),c=n(22),u=n(276),d=n(411),l=n(46);if(i({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=u(this,s("Promise")),n=c(e);return this.then(n?function(n){return d(t,e()).then((function(){return n}))}:e,n?function(n){return d(t,e()).then((function(){throw n}))}:e)}}),!r&&c(a)){var h=s("Promise").prototype.finally;a.prototype.finally!==h&&l(a.prototype,"finally",h,{unsafe:!0})}},990:function(e,t,n){"use strict";var i=n(750),r=n(660),a=n(591),o={},s=n(753),c=(n(252),n(20),n(590)),u=n(614),d=n(615),l=n(613),h=n(611),p={},f=n(652),v=n(621),y=n(748),E=n(751),m=n(2),g=n.n(m),T=n(8),_=n.n(T),b=n(9),I=n.n(b),R=n(1),S=n.n(R),P=function(){function e(t){var n=this;_()(this,e),S()(this,"onNativeFullscreenBegin",(function(){n.setFullscreen(!0)})),S()(this,"onNativeFullscreenEnd",(function(){n.setFullscreen(!1)})),S()(this,"onFullscreenChanged",(function(){var e=(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===n.fullscreenTarget;e||(n.fullscreenTarget=void 0,n.removeDocumentListeners()),n.setFullscreen(e)})),S()(this,"expand",(function(e,t,i){t&&(n.expandTimeout=setTimeout((function(){n.setFullscreen(!1)}),1e3),n.fullscreenTarget&&(n.fullscreenTarget.removeEventListener("touchstart",n._swipeStart),n.fullscreenTarget.removeEventListener("transitionend",n._fullscreenTransitionEnd),n.setFullscreen(!1)),n.fullscreenTarget=t,n.playerId=e,n.addDocumentListeners(),t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitEnterFullscreen?(n.addElementListeners(t),t.webkitEnterFullscreen()):null!=i&&i.webkitEnterFullscreen?(n.fullscreenTarget=i,n.addElementListeners(i),i.webkitEnterFullscreen()):(n.removeDocumentListeners(),n.removeElementListeners(),n.nonFullscreenStyle=g()({},t.style),n.nonFullscreenPosition=t.getBoundingClientRect(),t.style.position="fixed",t.style.width="".concat(n.nonFullscreenPosition.right-n.nonFullscreenPosition.left,"px"),t.style.height="".concat(n.nonFullscreenPosition.bottom-n.nonFullscreenPosition.top,"px"),t.style.top="".concat(n.nonFullscreenPosition.top,"px"),t.style.left="".concat(n.nonFullscreenPosition.left,"px"),t.style.zIndex="100",window.requestAnimationFrame((function(){t.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",t.style.width="100%",t.style.height="100%",t.style.top="0",t.style.left="0",t.addEventListener("transitionend",n._fullscreenTransitionEnd)}))))})),S()(this,"shrink",(function(e){e===n.playerId&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():n.fullscreenTarget.webkitExitFullscreen?n.fullscreenTarget.webkitExitFullscreen():(n.fullscreenTarget.style.width="".concat(n.nonFullscreenPosition.right-n.nonFullscreenPosition.left,"px"),n.fullscreenTarget.style.height="".concat(n.nonFullscreenPosition.bottom-n.nonFullscreenPosition.top,"px"),n.fullscreenTarget.style.top="".concat(n.nonFullscreenPosition.top,"px"),n.fullscreenTarget.style.left="".concat(n.nonFullscreenPosition.left,"px"),n.fullscreenTarget.style.transition="width 0.25s, height 0.25s, top 0.25s, left 0.25s",n.fullscreenTarget.addEventListener("transitionend",n._shrinkTransitionEnd),n.fullscreenTarget.removeEventListener("touchstart",n._swipeStart)))})),S()(this,"_swipeStart",(function(e){n.addSwipeListeners(),n.touchStart=e.touches[0]})),S()(this,"_swipeMove",(function(e){e.preventDefault();var t=e.touches[0].pageY-n.touchStart.pageY;n.swipeVector=Math.abs(t);var i=t/n.swipeVector*Math.min(n.swipeVector,n.swipeVector/(n.swipeVector+3*n.fullscreenTarget.clientHeight/4)*n.fullscreenTarget.clientHeight*1/2);n.fullscreenTarget.style.top="".concat(i,"px")})),S()(this,"_swipeEnd",(function(){n.removeSwipeListeners(),n.swipeVector>n.fullscreenTarget.clientHeight/4?n.shrink(n.playerId):n.fullscreenTarget.style.top="0"})),S()(this,"_fullscreenTransitionEnd",(function(){n.fullscreenTarget.style.transition="",n.fullscreenTarget.removeEventListener("transitionend",n._fullscreenTransitionEnd),n.fullscreenTarget.addEventListener("touchstart",n._swipeStart),n.setFullscreen(!0)})),S()(this,"_shrinkTransitionEnd",(function(){n.fullscreenTarget.removeEventListener("transitionend",n._shrinkTransitionEnd),n.fullscreenTarget.style.transition="",n.fullscreenTarget.style.position=n.nonFullscreenStyle.position,n.fullscreenTarget.style.width=n.nonFullscreenStyle.width,n.fullscreenTarget.style.height=n.nonFullscreenStyle.height,n.fullscreenTarget.style.top=n.nonFullscreenStyle.top,n.fullscreenTarget.style.left=n.nonFullscreenStyle.left,n.fullscreenTarget.style.zIndex=n.nonFullscreenStyle.zIndex,n.setFullscreen(!1),n.fullscreenTarget=void 0})),this.fullscreenTarget=void 0,this.playerId=void 0,this.onChange=t,this.isFullscreen=!1}return I()(e,[{key:"addDocumentListeners",value:function(){document.addEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.addEventListener("mozfullscreenchange",this.onFullscreenChanged),document.addEventListener("MSFullscreenChange",this.onFullscreenChanged),document.addEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"removeDocumentListeners",value:function(){document.removeEventListener("webkitfullscreenchange",this.onFullscreenChanged),document.removeEventListener("mozfullscreenchange",this.onFullscreenChanged),document.removeEventListener("MSFullscreenChange",this.onFullscreenChanged),document.removeEventListener("fullscreenchange",this.onFullscreenChanged)}},{key:"addSwipeListeners",value:function(){document.addEventListener("touchend",this._swipeEnd),document.addEventListener("touchmove",this._swipeMove)}},{key:"addElementListeners",value:function(e){e.addEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.addEventListener("webkitendfullscreen",this.onNativeFullscreenEnd)}},{key:"removeElementListeners",value:function(){var e=this.fullscreenTarget;e&&(e.removeEventListener("webkitbeginfullscreen",this.onNativeFullscreenBegin),e.removeEventListener("webkitendfullscreen",this.onNativeFullscreenEnd),e.removeEventListener("transitionend",this._fullscreenTransitionEnd),e.removeEventListener("transitionend",this._shrinkTransitionEnd))}},{key:"removeSwipeListeners",value:function(){document.removeEventListener("touchend",this._swipeEnd),document.removeEventListener("touchmove",this._swipeMove)}},{key:"setFullscreen",value:function(e){clearTimeout(this.expandTimeout),this.onChange(this.playerId,e),e||(this.cleanup(),this.fullscreenTarget=void 0,this.playerId=void 0)}},{key:"cleanup",value:function(){clearTimeout(this.expandTimeout),this.removeDocumentListeners(),this.removeElementListeners(),this.removeSwipeListeners()}}]),e}(),O=(n(272),n(752));function C(e){Object(O.b)("captions",e)}n(53),n(54),n(79),n(203);var k=n(594),w=n(650),A=n(694),L=A.a.BUFFERING_COMPLETED,D=A.a.BUFFERING_REQUESTED,M=A.a.IDLE,N=A.a.PREBUFFERING_COMPLETED,U=function(e,t){Object.keys(t).forEach((function(n){n=parseInt(n,10);var i=(null==t?void 0:t[n])||{},r=i.bufferingStatus,a=i.targetDuration;!(r===L)&&void 0!==r&&!(r===N)&&a&&e.dispatch(Object(A.f)(n,D,k.b*a))}))};function x(e){return function(t){var n=t.dispatch,i=t.getState;return function(t){return function(r){return"function"==typeof r?r(n,i,e):t(r)}}}}var F=x();F.withExtraArgument=x;var V=F;function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var H="function"==typeof Symbol&&Symbol.observable||"@@observable",K=function(){return Math.random().toString(36).substring(7).split("").join(".")},Q={INIT:"@@redux/INIT"+K(),REPLACE:"@@redux/REPLACE"+K(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+K()}};function J(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var z=n(692),q=n.n(z),X=[function(e){return function(t){return function(n){switch(n.type){case a.c:o[n.playerId]=function(){return"function"==typeof n.adProvider?n.adProvider():{}};break;case r.a:delete o[n.playerId];break;case a.b:var s,c=e.getState().players[n.playerId];if(o[n.playerId]&&c&&(null===(s=c.errorInfo)||void 0===s||!s.adFailed)){var u=o[n.playerId]();e.dispatch(Object(i.b)(n.playerId,u))}}return t(n)}}},function(e){return function(t){return function(n){switch(n.type){case d.c:var i=Object(f.c)(e,n.playerId)||{},r=i.initiallyMutedCaptions,a=i.userSpecifiedCaptions;r&&!a&&e.dispatch(Object(c.W)(n.playerId,!1));break;case c.v:case c.y:case c.B:case c.C:case c.A:case v.b:var o=Object(f.c)(e,n.playerId)||{},s=o.isPreview,u=o.userSpecifiedCaptions;s&&!u&&e.dispatch(Object(c.V)(n.playerId,!1))}return t(n)}}},E.a,function(e){var t=new P((function(t,n){e.dispatch(Object(v.h)(t,n))}));return function(n){return function(i){var r=e.getState().players[i.playerId],a=i.type;return!r||a!==v.b&&a!==v.c||(a===v.b?(e.dispatch(Object(v.h)(i.playerId,!0)),t.expand(i.playerId,i.containerEl,i.videoEl)):t.shrink(i.playerId)),n(i)}}},function(e){return function(t){return function(n){switch(n.type){case a.c:switch(e.dispatch(Object(c.ib)(n.playerId,(r=parseFloat(Object(O.a)("volume")),isNaN(r)?1:r))),function(){var e,t=Object(O.a)("captions");if("ENABLED"===(e=t)||"DISABLED"===e)return t}()){case"ENABLED":e.dispatch(Object(c.W)(n.playerId,!0));break;case"DISABLED":e.dispatch(Object(c.V)(n.playerId,!0))}break;case c.J:(i=n.volume)>=0&&null!==i&&Object(O.b)("volume",i);break;case c.p:n.isUserSet&&C("ENABLED");break;case c.o:n.isUserSet&&C("DISABLED")}var i,r;return t(n)}}},function(e){return function(t){return function(n){var i,r=e.getState().players,a=r[n.playerId],o=a||{},s=o.bufferingStatus,u=o.targetDuration,l=null==a||null===(i=a.features)||void 0===i?void 0:i[w.g];switch(n.type){case d.b:case c.s:l&&void 0!==s&&U(e,r);break;case d.c:case c.v:if(l&&void 0!==s){var h=s===L;if(u){var p=u*k.b;e.dispatch(Object(A.h)(n.playerId,p))}h||function(e,t,n){Object.keys(t).forEach((function(i){i=parseInt(i,10);var r=(null==t?void 0:t[i])||{},a=r.bufferingStatus,o=r.controls,s=r.isPlaying,c=void 0!==a,u=a===L,d=a===N,l="PLAY_REQUESTED"===(null==o?void 0:o.playState)||s;!u&&!l&&c&&i!==n&&!d&&e.dispatch(Object(A.f)(i,M,0))}))}(e,r,n.playerId)}break;case A.c:if(l){var v,y=n.bufferingStatus===L,E="PLAY_REQUESTED"===(null==a||null===(v=a.controls)||void 0===v?void 0:v.playState)||(null==a?void 0:a.isPlaying);y&&E&&U(e,r)}break;case A.d:if(n.targetDuration&&l){var m=Object(f.b)(r,(function(e){var t;return((null==e?void 0:e.isPlaying)||"PLAY_REQUESTED"===(null==e||null===(t=e.controls)||void 0===t?void 0:t.playState))&&void 0!==(null==e?void 0:e.bufferingStatus)&&(null==e?void 0:e.bufferingStatus)!==L}));if(void 0===m||m.playerId===n.playerId){var g=n.targetDuration*k.b;e.dispatch(Object(A.h)(n.playerId,g))}else m.playerId!==n.playerId&&e.dispatch(Object(A.f)(n.playerId,M,0))}else if(n.targetDuration){var T=n.targetDuration*k.b;e.dispatch(Object(A.h)(n.playerId,T))}}return t(n)}}},function(e){return function(t){return function(n){if(void 0!==n.playerId&&Object(u.d)(n.playerId,(function(e){e.log("redux",n.type)})),n.type===a.c)return p[n.playerId]=n.analytics,t(n);var i=e.getState().players[n.playerId];if(!i)return t(n);var o=t(n),s=e.getState().players[n.playerId],f=p[n.playerId];if(void 0!==f){switch(n.type){case h.e:case c.I:f.onTickEvent(s);break;case h.f:f.onTrackFinished(i),s.currentTrackId!==i.currentTrackId&&f.onIntendToPlay(s);break;case h.c:var v,y=i.tracks.find((function(e){return e.id===i.currentTrackId}));"ad"!==y.displayType||y.playbackCompleted||!i||null!==(v=i.errorInfo)&&void 0!==v&&v.adFailed||f.onAdSkip(i),s.currentTrackId!==i.currentTrackId&&f.onIntendToPlay(s);break;case c.v:case d.c:f.onIntendToPlay(s);break;case c.y:f.onReplay(s);break;case c.J:i.isMuted&&!s.isMuted?f.onUnmute(i):!i.isMuted&&s.isMuted&&f.onMute(i);break;case c.b:f.onCtaClick(i);break;case c.c:f.onCtaImpression(i);break;case r.a:f.onTeardown(i),delete p[n.playerId];break;case a.b:f.onConfigLoaded(s);break;case l.a:case l.c:var E,m=s.errorInfo,g=m.autoRetry?m.count:void 0;E=n.type===l.a||n.type===l.c?n.thrownError.message:n.error,f.onError(i,{error_code:n.type,error_message:E,media_details:{media_error:{category:n.type,is_fatal:n.isFatal,message:E,retry_count:g}}});break;case c.l:var T=i.controls,_=i.playbackRate,b={newSpeed:s.playbackRate,oldSpeed:_};void 0!==T.playbackRate&&f.onPlaybackSpeedChange(s,b)}s&&s.isPlaying!==i.isPlaying&&(s.isPlaying?f.onPlay(s):f.onPause(s))}return o}}},y.b,z.hydraMiddleware,V];t.a=function e(t,n,i){var r;if("function"==typeof n&&"function"==typeof i||"function"==typeof i&&"function"==typeof arguments[3])throw new Error(G(0));if("function"==typeof n&&void 0===i&&(i=n,n=void 0),void 0!==i){if("function"!=typeof i)throw new Error(G(1));return i(e)(t,n)}if("function"!=typeof t)throw new Error(G(2));var a=t,o=n,s=[],c=s,u=!1;function d(){c===s&&(c=s.slice())}function l(){if(u)throw new Error(G(3));return o}function h(e){if("function"!=typeof e)throw new Error(G(4));if(u)throw new Error(G(5));var t=!0;return d(),c.push(e),function(){if(t){if(u)throw new Error(G(6));t=!1,d();var n=c.indexOf(e);c.splice(n,1),s=null}}}function p(e){if(!J(e))throw new Error(G(7));if(void 0===e.type)throw new Error(G(8));if(u)throw new Error(G(9));try{u=!0,o=a(o,e)}finally{u=!1}for(var t=s=c,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!=typeof e)throw new Error(G(10));a=e,p({type:Q.REPLACE})}function v(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(G(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[H]=function(){return this},e}return p({type:Q.INIT}),(r={dispatch:p,subscribe:h,getState:l,replaceReducer:f})[H]=v,r}(function(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i];0,"function"==typeof e[r]&&(n[r]=e[r])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Q.INIT}))throw new Error(G(12));if(void 0===n(void 0,{type:Q.PROBE_UNKNOWN_ACTION()}))throw new Error(G(13))}))}(n)}catch(e){a=e}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var i=!1,r={},s=0;s<o.length;s++){var c=o[s],u=n[c],d=e[c],l=u(d,t);if(void 0===l){t&&t.type;throw new Error(G(14))}r[c]=l,i=i||l!==d}return(i=i||o.length!==Object.keys(e).length)?r:e}}({players:r.b,hydraExperiences:q.a,allPlayers:s.b}),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(G(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},a=t.map((function(e){return e(r)}));return i=Y.apply(void 0,a)(n.dispatch),W(W({},n),{},{dispatch:i})}}}.apply(void 0,X))},991:function(e,t,n){"use strict";var i=n(2),r=n.n(i),a=n(45),o=n.n(a),s=n(605),c=n.n(s),u=n(8),d=n.n(u),l=n(9),h=n.n(l),p=n(1),f=n.n(p),v=(n(20),n(253),n(152),n(88),n(32),n(17),n(256),n(89),n(208),n(99),n(87),n(982),n(984),n(985),n(585),n(986),n(252),n(590)),y=n(753),E=n(589),m=n(612),g=n(751),T=n(614),_=n(594),b=n(13),I=n.n(b),R=n(21),S=n.n(R),P=n(23),O=n.n(P),C=n(633),k=n(611),w=n(694),A=(n(52),n(693)),L=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=t();return n>0?r.catch((function(r){return new Promise((function(r){setTimeout((function(){r(e(t,n-1,2*i))}),i)}))})):r},D="application/x-mpegURL",M=function(e){var t;switch(e){case"0.13.2":t=L((function(){return n.e(130).then(n.bind(null,1017))}));case"0.14.17":default:t=L((function(){return n.e(77).then(n.bind(null,1018))}))}return t.then((function(e){return e.default}))},N=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return n&&i},U=function(e){var t=document.createElement("video");return t.canPlayType&&t.canPlayType(e)},x=n(752),F=n(613),V=n(692),j=(n(116),n(204),n(79),"captions"),B="metadata",W="subtitles",G="disabled",H="hidden",K="showing";function Q(e,t){if(t&&e){var n=t.split("-")[0],i=e.split("-")[0];return n.toLowerCase()===i.toLowerCase()}}function J(e,t){var n,i,r=e.length;if(t){for(var a=0;a<r;a++){var o=e[a],s=o.language;if("captions"===(c=o).kind&&c.cues&&c.cues.length>0||"subtitles"===c.kind){if(s&&s.toLowerCase()===t.toLowerCase())return o;!i&&Q(s,t)?i=o:n||s||(n=o)}}var c;return i||n}}function Y(e,t){var n=o()(e),i=n.filter((function(e){return e.kind===W})),r=n.filter((function(e){return e.kind===j}));return J(i,t)||J(r,t)}function z(e,t){return Object.keys(e).some((function(n){return i=e[n],r=t,i.startTime===r.startTime&&i.text===r.text&&i.endTime===r.endTime;var i,r}))}function q(e,t){e.mode!==t&&(e.mode=t)}var X,Z=n(650),$=1,ee=2,te=3,ne=4,ie=function(){function e(t,n,i,r,a){var o=this,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};d()(this,e),f()(this,"onLoadStart",(function(){o.playerRenderPromise||o.dispatchPlayerReady()})),this.domElement=t,this.playerId=n,this.hydraExperienceId=s.hydraExperienceId,this.store=i,this.reload=r,this.showControls=s.showControls,this.objectFitVideo=s.objectFitVideo,this.playerHandlesRotations=s.playerHandlesRotations,this.language=s.language,this.precache=s.precache,this.videoEl=s.videoEl,this.accessibilityLabel=s.accessibilityLabel,this.id3Disabled=!1,this.activeCues={},this.shouldRetryAutoplayMuted=s.shouldRetryAutoplayMuted,this.enablePiP=s.enablePiP||!1,this.enableVideoPlayerCaptionRendering=s.enableVideoPlayerCaptionRendering||!1,this.configBitrateCap=s.bitrateCap,this.captionDefaultOffset={bottom:0},Object(A.d)()||(this.hlsjsVersion=i.dispatch(Object(g.b)(n,Z.c)),this.smartBufferingExperimentEnabled=this.store.dispatch(Object(g.b)(this.playerId,Z.g)),this.hlsJsSegmentsToPrebuffer=_.b),this.isHlsWorkerEnabled=i.dispatch(Object(g.b)(n,Z.d))||!1,this.repositionedCaptionsEnabled=this.enableVideoPlayerCaptionRendering&&i.dispatch(Object(g.b)(n,Z.b)),i.dispatch(Object(g.b)(n,Z.e)),this.liveAdDomainRegex=/t.lv.twimg.com$|ton.twitter.com$/,this.logger=a,this.onTimeUpdate=this.onTimeUpdate.bind(this),this.onCanPlay=this.onCanPlay.bind(this),this.onPlay=this.onPlay.bind(this),this.onPlaying=this.onPlaying.bind(this),this.onPause=this.onPause.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),this.onPlaybackRateChange=this.onPlaybackRateChange.bind(this),this.onSeeked=this.onSeeked.bind(this),this.onSeeking=this.onSeeking.bind(this),this.onEnded=this.onEnded.bind(this),this.onError=this.onError.bind(this),this.onHlsJsError=this.onHlsJsError.bind(this),this.onId3CueWithInfo=this.onId3CueWithInfo.bind(this),this.onId3CueWithData=this.onId3CueWithData.bind(this),this.onFragmentLoading=this.onFragmentLoading.bind(this),this.onFragmentParsingInitSegment=this.onFragmentParsingInitSegment.bind(this),this.onLevelSwitching=this.onLevelSwitching.bind(this),this.onLevelLoaded=this.onLevelLoaded.bind(this),this.onBufferAppended=this.onBufferAppended.bind(this),this.onBufferEOS=this.onBufferEOS.bind(this),this.onBufferStart=this.onBufferStart.bind(this),this.onManifestParsed=this.onManifestParsed.bind(this),this.onEnterPictureInPicture=this.onEnterPictureInPicture.bind(this),this.onExitPictureInPicture=this.onExitPictureInPicture.bind(this),this.render=this.render.bind(this),this.dispatchPlayerReady=this.dispatchPlayerReady.bind(this),this.hlsJsPlay=this.hlsJsPlay.bind(this),this.shouldUseBitratePersistence=this.shouldUseBitratePersistence.bind(this),this.handleCueChange=this.handleCueChange.bind(this),this.unsubscribeFromStore=this.store.subscribe(this.render),this.playPromise=Promise.resolve(),this.renderVideoTag(),this.render()}return h()(e,[{key:"teardownPlayer",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.trackDataUsage();var t=this.hlsJs;if(t){t.detachMedia();var n=function(){t.destroy()};this.hlsJs=void 0,this.playPromise.then(n).catch(n)}if(this.videoTag){if(this.stopListeningForId3Tags(),this.videoTag.removeEventListener("timeupdate",this.onTimeUpdate),this.videoTag.removeEventListener("canplay",this.onCanPlay),this.videoTag.removeEventListener("play",this.onPlay),this.videoTag.removeEventListener("playing",this.onPlaying),this.videoTag.removeEventListener("pause",this.onPause),this.videoTag.removeEventListener("volumechange",this.onVolumeChange),this.videoTag.removeEventListener("ratechange",this.onPlaybackRateChange),this.videoTag.removeEventListener("seeked",this.onSeeked),this.videoTag.removeEventListener("seeking",this.onSeeking),this.videoTag.removeEventListener("ended",this.onEnded),this.videoTag.removeEventListener("error",this.onError),this.videoTag.removeEventListener("waiting",this.onBufferStart),this.videoTag.removeEventListener("loadstart",this.onLoadStart),this.videoTag.removeEventListener("enterpictureinpicture",this.onEnterPictureInPicture),this.videoTag.removeEventListener("leavepictureinpicture",this.onExitPictureInPicture),this.videoTag.textTracks){this.videoTag.textTracks.onaddtrack=void 0,this.videoTag.textTracks.onchange=void 0;for(var i=0;i<this.videoTag.textTracks.length;i++)this.videoTag.textTracks[i].oncuechange&&(this.videoTag.textTracks[i].oncuechange=void 0)}try{this.videoTag.pause(),this.videoTag.removeAttribute("src"),this.videoTag.removeAttribute("poster"),this.videoTag.load()}catch(e){}this.videoTag.parentNode&&this.videoTag.parentNode.removeChild(this.videoTag),this.videoTag=void 0}this.renderedTrackId=void 0,this.hasEndedOnce=!1,this.activeCues=void 0,e&&(this.renderVideoTag(),this.activeCues={})}},{key:"teardown",value:function(){this.teardownPlayer(!1),this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.unsubscribeFromStore()}},{key:"getVideoTag",value:function(){return this.videoTag}},{key:"renderVideoTag",value:function(){this.videoTag=this.videoEl||document.createElement("video"),this.videoTag.setAttribute("preload","none"),this.videoTag.setAttribute("playsinline",""),this.showControls&&this.videoTag.setAttribute("controls",""),this.accessibilityLabel&&this.videoTag.setAttribute("aria-label",this.accessibilityLabel),this.enablePiP||this.videoTag.setAttribute("disablePictureInPicture",""),this.videoTag.style.width="100%",this.videoTag.style.height="100%",this.videoTag.style.position="absolute",this.videoTag.style.backgroundColor="black",this.videoTag.addEventListener("loadstart",this.onLoadStart,!1),this.videoTag.addEventListener("timeupdate",this.onTimeUpdate),this.videoTag.addEventListener("play",this.onPlay),this.videoTag.addEventListener("pause",this.onPause),this.videoTag.addEventListener("volumechange",this.onVolumeChange),this.videoTag.addEventListener("ratechange",this.onPlaybackRateChange),this.videoTag.addEventListener("seeked",this.onSeeked),this.videoTag.addEventListener("seeking",this.onSeeking),this.videoTag.addEventListener("ended",this.onEnded),this.videoTag.addEventListener("error",this.onError),this.videoTag.addEventListener("playing",this.onPlaying),this.videoTag.addEventListener("waiting",this.onBufferStart),this.videoTag.addEventListener("canplay",this.onCanPlay),this.videoTag.addEventListener("enterpictureinpicture",this.onEnterPictureInPicture),this.videoTag.addEventListener("leavepictureinpicture",this.onExitPictureInPicture),this.videoTag.textTracks&&(this.videoTag.textTracks.onaddtrack=this.handleTrackAdded.bind(this),this.videoTag.textTracks.onchange=this.handleTrackChanged.bind(this)),this.hasEndedOnce=!1}},{key:"onTimeUpdate",value:function(){var e,t,n;if(void 0===this.dateTimeAnchor&&void 0!==this.videoTag.getStartDate){var i=this.videoTag.getStartDate();i&&(this.dateTimeAnchor={streamTimeMs:0,absoluteTimeMs:i.getTime()})}var r,a=1e3*this.videoTag.currentTime;void 0!==this.dateTimeAnchor&&(r=a-this.dateTimeAnchor.streamTimeMs+this.dateTimeAnchor.absoluteTimeMs);var o=0,s=this.videoTag.currentSrc;if(s){var c=this.getCurrentTrack();if(void 0===c)return;var u=c.variants;if(void 0===u)return;for(var d=0;d<u.length;d++)if(u[d].src===s){o=d;break}}this.store.dispatch(Object(k.r)(this.playerId,a,r,1e3*this.videoTag.duration,this.hasCaptions(),o));var l=null===(e=this.hlsJs)||void 0===e?void 0:e.bandwidthEstimate;void 0!==l&&!isNaN(l)&&this.store.dispatch(Object(y.a)(l)),this.trackDataUsage();var h=null===(t=this.getPlayerState())||void 0===t||null===(n=t.controls)||void 0===n?void 0:n.playbackTimeRange;if(h){var p=this.clipScrubTime(h.startTimeS),f=this.clipScrubTime(h.endTimeS),v=window.isFinite(p)&&window.isFinite(f)&&p<f,E=this.videoTag.currentTime<p||this.videoTag.currentTime>f;v&&E&&!this.seeking&&(this.videoTag.currentTime=p)}}},{key:"trackDataUsage",value:function(){var e=this;Object(T.b)(this.playerId,(function(t){var n=t.getAndReset();n>0&&e.store.dispatch(v.P(e.playerId,n))}))}},{key:"checkInitialSeek",value:function(){var e=this.videoTag,t=this.getInitialTimeCode();this.isSeekable(t)&&!this.hasInitialSeeked&&t>-1&&(this.hasInitialSeeked=!0,e.currentTime=t)}},{key:"onCanPlay",value:function(){this.checkInitialSeek(),this.onBufferEnd()}},{key:"onPlay",value:function(){var e=this.videoTag.duration;this.isLooping||this.isLive&&(this.hlsJs?this.hlsJs.liveSyncPosition&&(this.videoTag.currentTime=this.hlsJs.liveSyncPosition):e&&window.isFinite(e)&&(this.videoTag.currentTime=e))}},{key:"onPlaying",value:function(){this.videoTag.paused||(this.isEnded=!1,this.reloadTimecode=void 0,this.store.dispatch(v.mb(this.playerId)),this.onBufferEnd(),this.onTimeUpdate())}},{key:"onPause",value:function(){this.videoTag.ended||this.store.dispatch(v.lb(this.playerId)),this.onBufferEnd()}},{key:"onVolumeChange",value:function(){this.store.dispatch(v.pb(this.playerId,this.videoTag.muted,this.videoTag.volume)),Object(x.b)("volume",this.videoTag.volume)}},{key:"onPlaybackRateChange",value:function(){this.store.dispatch(v.T(this.playerId,this.videoTag.playbackRate))}},{key:"onSeeking",value:function(){this.seeking||this.isLooping||(this.seeking=!0,this.store.dispatch(v.ob(this.playerId))),this.store.dispatch(Object(V.resetGuestState)(this.hydraExperienceId)),this.hasInitialSeeked=!0}},{key:"onSeeked",value:function(){this.seeking=!1,this.isEnded=!1,this.isLooping=!1,this.store.dispatch(v.nb(this.playerId,this._lastTargetScrubToFraction)),this.onBufferEnd(),this.updateRotation()}},{key:"onEnterPictureInPicture",value:function(){this.store.dispatch(v.S(this.playerId,!0))}},{key:"onExitPictureInPicture",value:function(){this.store.dispatch(v.S(this.playerId,!1))}},{key:"updateRotation",value:function(){var e,t,n,i=(this.getId3Track()||{}).cues||[],r=i.length,a=this.videoTag.currentTime;for(e=0;e<r&&i[e].startTime<=a;e++)"TXXX"===(t=i[e]).value.key&&"JSONMetadata"===t.value.info&&(n=t);if(n)try{var o=JSON.parse(n.value.data),s=this.normalizeRotation(o.rotation),c=this.getCurrentTrack();void 0!==s&&s!==c.rotation&&this.store.dispatch(Object(k.q)(this.playerId,s))}catch(e){}}},{key:"onEnded",value:function(){this.onBufferEnd(),this.isEnded=this.hasEndedOnce=!0,this.store.dispatch(Object(k.s)(this.playerId));var e=this.getCurrentTrack();if(void 0!==e){var t=e.shouldLoop;if(this.shouldLoop=t,this.shouldLoop){this.isLooping=!0;var n=this.videoTag.play()||Promise.resolve();this.playPromise=n.catch((function(){}))}var i=this.getCurrentTrack(),r=i.isLive,a=i.isLiveTimecode;r&&(a&&this.reload({requestedTimecode:-1,autoPlay:!0}),this.reload()),this.hasInitialSeeked=!1}}},{key:"onHlsJsError",value:function(e,t,n){if(n.fatal){var i=n.response&&n.response.code;this.teardownPlayer(),403===i?"broadcast"===e||"live"===e||"periscope"===e?this.store.dispatch(Object(F.h)(this.playerId,new Error(E.a.LIVE_VIDEO_GEOBLOCK_ERROR))):this.store.dispatch(Object(F.h)(this.playerId,new Error(E.a.MEDIA_GEOBLOCK_ERROR))):(i=i?":".concat(i):"",this.store.dispatch(Object(F.h)(this.playerId,new Error("".concat(n.type,":").concat(n.details).concat(i)))))}}},{key:"onError",value:function(e,t){if(this.videoTag.error){var n;switch(this.videoTag.error.code){case $:n=E.a.MEDIA_ABORTED;break;case ee:n=E.a.MEDIA_NETWORK_ERROR;break;case te:n=E.a.MEDIA_DECODE_ERROR;break;case ne:n=E.a.MEDIA_SRC_INVALID_ERROR;break;default:n=E.a.MEDIA_UNKNOWN_CODE_ERROR}this.store.dispatch(Object(F.h)(this.playerId,new Error(n))),this.teardownPlayer()}}},{key:"normalizeRotation",value:function(e){var t=90*Math.floor((Math.floor(e)+45)/90)%360;return 270===t?-90:t}},{key:"isMissingDataProp",value:function(e){var t,n,i=c()(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;if("TXXX"===r.value.key){t=r;break}}}catch(e){i.e(e)}finally{i.f()}return t&&""===t.value.data&&/\[.*\]|\{.*\}$/.test(t.value.info)}},{key:"onId3CueWithInfo",value:function(e){var t=/(\[|\{)/,n=e.currentTarget.activeCues,i=this.activeCues;this.activeCues={};var r,a=c()(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.value,u=s.info,d=s.key,l=[o.startTime,d,u].join("|");if(this.activeCues[l]=!0,!i[l]&&"TXXX"===d){var h=u.search(t);if(-1!==h){var p=u.slice(0,h),f=u.slice(h);this.parseId3Data(p,f)}}}}catch(e){a.e(e)}finally{a.f()}}},{key:"onId3CueWithData",value:function(e){var t=e.currentTarget.activeCues,n=this.activeCues;this.activeCues={};var i,r=[],a=c()(t);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.value,u=s.data,d=s.info,l=s.key,h=[o.startTime,l,d,u].join("|");this.activeCues[h]=!0,n[h]||("TXXX"===l&&this.parseId3Data(d,u),o.value&&r.push(o.value))}}catch(e){a.e(e)}finally{a.f()}this.store.dispatch(Object(k.m)(this.playerId,r))}},{key:"parseId3Data",value:function(e,t){try{var n=JSON.parse(t);if("JSONMetadata"===e){var i=this.normalizeRotation(n.rotation);this.store.dispatch(Object(k.q)(this.playerId,i)),this.store.dispatch(Object(k.n)(this.playerId,n))}else"HydraAudioLevel"===e?this.store.dispatch(Object(V.updateAudioLevels)(this.hydraExperienceId,n)):"HydraParticipants"===e&&this.store.dispatch(Object(V.updateGuestInfo)(this.hydraExperienceId,n))}catch(e){}}},{key:"onBufferAppended",value:function(e,t){if(0===this.pendingSegments){var n=this.getPlayerState(),i=n.controls,r=n.hasPlaybackStarted,a=n.nextTrackIds,o=(null==i?void 0:i.playState)===v.n.PLAY_REQUESTED;if(this.bufferedSegments+=1,!r&&!o&&this.hlsJs){this.prebufferedSegments+=1;var s=a&&0!==a.length;this.prebufferedSegments!==this.expectedSegments||s?(this.prebufferedSegments===_.b||this.prebufferedSegments===this.expectedSegments&&s)&&(this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=0,this.store.dispatch(Object(w.f)(this.playerId,w.a.PREBUFFERING_COMPLETED,0))):this.store.dispatch(Object(w.f)(this.playerId,w.a.BUFFERING_COMPLETED))}}this.pendingSegments=null==t?void 0:t.pending}},{key:"onBufferEOS",value:function(e,t){var n=this.getPlayerState(),i=n.bufferingStatus,r=n.nextTrackIds,a=i===w.a.BUFFERING_COMPLETED,o=r&&0!==r.length;this.bufferedSegments!==this.expectedSegments||a||o||!this.hlsJs||this.store.dispatch(Object(w.f)(this.playerId,w.a.BUFFERING_COMPLETED))}},{key:"onFragmentLoading",value:function(e,t){void 0!==t&&void 0!==t.frag&&t.frag.programDateTime&&(this.dateTimeAnchor={streamTimeMs:1e3*t.frag.start,absoluteTimeMs:re(t.frag.programDateTime)})}},{key:"onFragmentParsingInitSegment",value:function(e,t){if(void 0!==t&&void 0!==t.frag&&void 0!==t.frag.level&&void 0!==this.hlsJs){var n=this.hlsJs.levels[t.frag.level];void 0!==n&&void 0!==n.details&&void 0!==n.details.programDateTime&&void 0!==n.details.fragments&&void 0!==n.details.fragments[0]&&(this.dateTimeAnchor={streamTimeMs:1e3*n.details.fragments[0].start,absoluteTimeMs:re(n.details.programDateTime)})}}},{key:"onLevelSwitching",value:function(e,t){if(this.hlsJs&&this.hlsJs.levels){var n=this.hlsJs.levels[t.level].bitrate;void 0!==n&&this.store.dispatch(Object(k.h)(this.playerId,n))}}},{key:"onLevelLoaded",value:function(e,t){if(this.hlsJs&&!this.maximumBufferLength){var n,i,r,a=null==t||null===(n=t.details)||void 0===n?void 0:n.targetduration;if(this.expectedSegments=null==t||null===(i=t.details)||void 0===i||null===(r=i.fragments)||void 0===r?void 0:r.length,a){var o=a*this.hlsJsSegmentsToPrebuffer;this.maximumBufferLength=this.hlsJs.config.maxMaxBufferLength=o,this.store.dispatch(Object(w.g)(this.playerId,a))}}}},{key:"onBufferStart",value:function(){var e=this,t=!this.hasEndedOnce||this.videoTag&&this.videoTag.currentTime>=2;this.shouldLoop&&!t||(this.buffering=!0,setTimeout((function(){e.buffering&&e.store.dispatch(Object(k.j)(e.playerId))}),20))}},{key:"onBufferEnd",value:function(){this.buffering&&(this.buffering=!1,this.store.dispatch(Object(k.i)(this.playerId)))}},{key:"getCaptionsTrack",value:function(){return this.selectedTextTrack?this.selectedTextTrack:Y(this.videoTag.textTracks||[],this.language)}},{key:"getId3Track",value:function(){for(var e=0;e<this.videoTag.textTracks.length;e++){var t=this.videoTag.textTracks[e];if(t.kind===B)return t}}},{key:"handleTrackChanged",value:function(e){var t=e.target,n=o()(t).filter((function(e){return e.mode===K}))[0];n&&!this.selectedTextTrack&&(this.selectedTextTrack=n),n&&n===this.clonedTextTrack&&q(this.selectedTextTrack,H),this.store.dispatch(v.O(this.playerId,void 0!==n))}},{key:"handleTrackAdded",value:function(e){var t=e.track,n=j,i=B,r=W;t.kind===i&&this.startListeningForId3Tags(),t.kind!==n&&t.kind!==r||(Object(A.d)()&&(this.id3Disabled=!0,this.stopListeningForId3Tags()),t!==this.selectedTextTrack&&t!==this.clonedTextTrack&&(t.mode=t.kind===n?H:G),t.oncuechange=this.handleCueChange)}},{key:"handleCueChange",value:function(e){var t,n=e.target,i=this.clonedTextTrack,r=this.selectedTextTrack;if(r&&n!==i){var a=o()(r.activeCues);if(this.store.dispatch(Object(k.g)(this.playerId,a)),this.repositionedCaptionsEnabled&&n===r&&i&&r.cues.length!==(null==i||null===(t=i.cues)||void 0===t?void 0:t.length)){for(var s=i.activeCues,c=0;c<s.length;c++){z(a,s[c])||i.removeCue(s[c])}for(var u=0;u<a.length;u++){var d=a[u];if(!z(s,d)){var l=d.endTime,h=d.startTime,p=d.text,f=new VTTCue(h,l,p);i.addCue(f),f.snapToLines=!1,this.setCaptionOffset(f)}}}}}},{key:"setCaptionOffset",value:function(e){var t=this.captionDefaultOffset,n=(null==t?void 0:t.bottom)||0,i=Object(A.b)()?10:0,r=100-n/this.videoTag.offsetHeight*100-i;r!==e.line&&!1===e.snapToLines&&(e.line="auto",e.line=r)}},{key:"repositionClonedCues",value:function(){for(var e,t=(null===(e=this.clonedTextTrack)||void 0===e?void 0:e.cues)||[],n=0;n<t.length;n++)this.setCaptionOffset(t[n])}},{key:"startListeningForId3Tags",value:function(){var e=this.getId3Track();if(void 0!==e&&!this.id3Disabled){var t=e.cues;void 0===this.missingDataProp&&t&&(this.missingDataProp=this.isMissingDataProp(t)),e.oncuechange=this.missingDataProp?this.onId3CueWithInfo:this.onId3CueWithData,e.mode=H}}},{key:"stopListeningForId3Tags",value:function(){var e=this.getId3Track();void 0!==e&&(e.oncuechange=null,e.mode=G)}},{key:"handleControlUpdate",value:function(e){var t=this;switch(e.muteState){case v.j.MUTE_REQUESTED:this.videoTag.muted=!0;break;case v.j.UNMUTE_REQUESTED:this.videoTag.muted=!1}switch(e.playState){case v.n.PAUSE_REQUESTED:var n=function(){t.videoTag&&(t.videoTag.pause(),t.stopListeningForId3Tags())};this.videoTag.paused?n():this.playPromise.then(n);break;case v.n.PLAY_REQUESTED:var i=this.hlsJs?this.hlsJsPlay():this.videoTag.play()||Promise.resolve();this.playPromise=i.catch((function(e){t.videoTag&&t.videoTag.paused&&(t.shouldRetryAutoplayMuted&&e instanceof DOMException&&"NotAllowedError"===e.name?(t.shouldRetryAutoplayMuted=!1,t.store.dispatch(v.X(t.playerId))):t.store.dispatch(v.K(t.playerId)))})),this.startListeningForId3Tags()}if(this.captionDefaultOffset!==e.captionDefaultOffset&&(this.captionDefaultOffset=e.captionDefaultOffset,this.repositionClonedCues()),e.captionsState&&this.handleCaptionsStateRequest(e.captionsState),!this.seeking){var r=this.clipScrubTime(this.videoTag.duration*e.scrubToFraction);window.isFinite(r)&&(this.videoTag.currentTime=r,this._lastTargetScrubToFraction=e.scrubToFraction)}if(e.volume>=0&&(this.videoTag.volume=e.volume),e.playbackRate)try{this.videoTag.playbackRate=e.playbackRate}catch(e){this.store.dispatch(Object(F.i)(this.playerId))}switch(e.pipState){case v.m.PICTURE_IN_PICTURE_ON_REQUESTED:var a=document.pictureInPictureEnabled;this.videoTag.hasAttribute("disablePictureInPicture")&&this.videoTag.removeAttribute("disablePictureInPicture"),a&&this.videoTag&&!this.inProgressPiPRequest&&(this.inProgressPiPRequest=this.videoTag.requestPictureInPicture().catch((function(){t.store.dispatch(Object(F.h)(t.playerId,new Error(E.a.PICTURE_IN_PICTURE_ERROR)))})).finally((function(){t.inProgressPiPRequest=void 0})));break;case v.m.PICTURE_IN_PICTURE_OFF_REQUESTED:document.pictureInPictureElement&&!this.inProgressPiPRequest&&(this.inProgressPiPRequest=document.exitPictureInPicture().catch((function(){t.store.dispatch(Object(F.h)(t.playerId,new Error(E.a.PICTURE_IN_PICTURE_ERROR)))})).finally((function(){t.inProgressPiPRequest=void 0})))}}},{key:"clipScrubTime",value:function(e){return Math.max(0,Math.min(this.videoTag.duration-.5,e))}},{key:"hlsJsPlay",value:function(){var e=this;return new Promise((function(t){if(e.videoTag&&(e.videoTag.readyState>=3||e.isEnded))t();else{e.videoTag.addEventListener("canplay",(function n(){e.videoTag&&e.videoTag.readyState>=3&&(t(),e.videoTag.removeEventListener("canplay",n))}))}})).then((function(){return e.checkInitialSeek(),e.videoTag.play()||Promise.resolve()}))}},{key:"xhrSetup",value:function(e,t,n){var i=new C.a(t).getHostname(),r=i&&this.liveAdDomainRegex.test(i),a=n===X.ResourceTypes.KEY;(r||a)&&(e.withCredentials=!0)}},{key:"hasCaptions",value:function(){return void 0!==this.getCaptionsTrack()}},{key:"renderVideoVariant",value:function(){var e=this.getCurrentTrack(),t=e.contentType,n=e.variants,i=this.getPlayerState().features.bitrateCap,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enableSafariMse,i=void 0!==n&&n,r=e.find((function(e){return 0===e.type.indexOf("video/mp4")})),a=e.find((function(e){return 0===e.type.indexOf(D)}));if(!a)return{useMse:!1,selectedVariant:r};var o=U(D),s=N();if(Object(A.d)()&&s&&!i&&(s=!1),s)return{useMse:!0,selectedVariant:a};var c=o?a:r;return{useMse:!1,selectedVariant:c}}(n),a=r.selectedVariant,o=r.useMse;return a?o?this.renderHlsJs(a,this.configBitrateCap||i,t):this.renderHtml5(a):(this.store.dispatch(Object(F.h)(this.playerId,new Error(E.a.MEDIA_NOT_SUPPORTED))),Promise.resolve())}},{key:"renderHlsJs",value:function(e,t,n){var i=this,a=this.getInitialTimeCode();this.bufferedSegments=this.expectedSegments=this.pendingSegments=this.prebufferedSegments=0;var o=this.store.dispatch(Object(g.b)(this.playerId,Z.f));return M(this.hlsjsVersion).then((function(s){X=s;var c,u,l={autoStartLoad:!0,enableWorker:i.isHlsWorkerEnabled,fragLoadingMaxRetry:6,fragLoadingRetryDelay:500,fragLoadingTimeOut:2e4,levelLoadingMaxRetry:4,levelLoadingTimeOut:2e4,loader:(c=i.playerId,u=X,function(e){S()(n,e);var t=O()(n);function n(e){var i;d()(this,n);var r=(i=t.call(this,e)).load.bind(I()(i));return i.load=function(e,t,n){var i=n.onSuccess;n.onSuccess=function(e,t,n){Object(T.b)(c,(function(e){e.add(t.total)})),i(e,t,n)},r(e,t,n)},i}return h()(n)}(u.DefaultConfig.loader)),manifestLoadingMaxRetry:4,manifestLoadingTimeOut:2e4,maxBufferHole:1.5,maxSeekHole:5,startLevel:-1,startPosition:a,xhrSetup:i.xhrSetup.bind(i),capLevelToPlayerSize:!o&&!t,debug:{trace:function(e){i.logger.log("HlsJs.trace",e)},debug:function(e){i.logger.log("HlsJs.debug",e)},log:function(e){i.logger.log("HlsJs.log",e)},warn:function(e){i.logger.log("HlsJs.warn",e)},info:function(e){i.logger.log("HlsJs.info",e)},error:function(e){i.logger.log("HlsJs.error",e)}}};i.hlsJs=new X(r()({},l)),i.smartBufferingExperimentEnabled&&(i.hlsJs.on(X.Events.BUFFER_APPENDED,i.onBufferAppended),i.hlsJs.on(X.Events.BUFFER_EOS,i.onBufferEOS)),i.hlsJs.on(X.Events.ERROR,i.onHlsJsError.bind(i,n)),i.hlsJs.on(X.Events.FRAG_LOADING,i.onFragmentLoading),i.hlsJs.on(X.Events.FRAG_PARSING_INIT_SEGMENT,i.onFragmentParsingInitSegment),i.hlsJs.on(X.Events.LEVEL_SWITCHING,i.onLevelSwitching),i.hlsJs.on(X.Events.LEVEL_LOADED,i.onLevelLoaded),i.hlsJs.on(X.Events.MANIFEST_PARSED,i.onManifestParsed.bind(i,t)),i.repositionedCaptionsEnabled&&(i.hlsJs.subtitleDisplay=!1),i.hlsJs.attachMedia(i.videoTag),i.hlsJs.loadSource(e.src),i.store.dispatch(Object(k.l)(i.playerId))})).catch((function(){i.store.dispatch(Object(F.h)(i.playerId,new Error("".concat(E.a.CONFIG_NETWORK_ERROR,":HlsJsChunk"))))}))}},{key:"renderHtml5",value:function(e){return this.videoTag.setAttribute("preload",this.precache?"auto":"none"),this.videoTag.setAttribute("src",e.src),this.videoTag.setAttribute("type",e.type),Promise.resolve()}},{key:"onManifestParsed",value:function(e,t,n){var i,r=n.levels,a=r.length;if(e){var o;for(o=1;o<r.length&&!(r[o].bitrate>e);o++);this.hlsJs.autoLevelCapping=o-1,a=o-1}var s=null===(i=this.store.getState().allPlayers)||void 0===i?void 0:i.mostRecentBandwidthEst;if(this.shouldUseBitratePersistence()&&void 0!==s){var c,u=a===r.length?r:r.slice(0,a);for(c=1;c<u.length&&!(r[c].bitrate>s);c++);this.hlsJs.startLevel=c-1}this.dispatchPlayerReady()}},{key:"dispatchPlayerReady",value:function(){this.store.dispatch(Object(k.p)(this.playerId))}},{key:"renderContainer",value:function(){var e=document.createElement("div");if(e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.backgroundColor="transparent",e.style.overflow="hidden",e.appendChild(this.videoTag),Object(A.c)()){var t=document.createElement("style"),n=document.createTextNode("video::-webkit-media-controls { display: none !important; }");t.appendChild(n),e.appendChild(t)}this.domElement.innerHTML="",this.domElement.appendChild(e)}},{key:"getPlayerState",value:function(){return this.store.getState().players[this.playerId]||{}}},{key:"getCurrentTrack",value:function(){var e=this.getPlayerState();return Object(m.b)(e)}},{key:"getInitialTimeCode",value:function(){var e=this.reloadTimecode;if(void 0===this.getCurrentTrack())return-1;var t=this.getCurrentTrack(),n=t.isLive,i=t.isLiveTimecode,r=t.replayEditedStartTime,a=[e,t.requestedTimecode,r].find((function(e){return e>0||0===e}));return n&&!i||void 0===a?-1:a}},{key:"isUserRequestedCaptions",value:function(){return this.getPlayerState().userSpecifiedCaptions}},{key:"isSeekable",value:function(e){if(0===e||e>0)for(var t=this.videoTag.seekable,n=t.length,i=0;i<n;i++)if(t.start(i)<=e&&e<=t.end(i))return!0;return!1}},{key:"cleanupVideoElement",value:function(){if(this.hasCaptions()){var e=this.getCaptionsTrack();if(Array.isArray(e.cues))for(;e.cues.length;)e.removeCue(e.cues[0])}}},{key:"render",value:function(){var e=this,t=this.getPlayerState(),n=t.posterImage;if(void 0!==t.currentTrackId)if(t.error)this.teardownPlayer();else{var i=this.getCurrentTrack();if(this.renderedTrackId!==t.currentTrackId){this.cleanupVideoElement(),this.hlsJs&&(this.hlsJs.destroy(),this.hlsJs=void 0),n&&this.videoTag.setAttribute("poster",n);var r=i.isLive,a=i.reloadTimecode,o=i.shouldLoop;r||(this.reloadTimecode=a),this.hasInitialSeeked=!1,this.renderedTrackId=t.currentTrackId,this.playerRenderPromise=this.renderVideoVariant(),this.playerRenderPromise.then((function(){e.renderContainer(),e.isLive=r,e.shouldLoop=o,e.videoTag.volume=Object(x.a)("volume",1)||1,e.playerRenderPromise=void 0}))}if(i.playerReady){var s=t.fullscreen.isFullscreen,c=i.rotation;this.handleControlUpdate(t.controls),this.renderRotationAndScale(c,s)}this.hlsJs&&this.maximumBufferLength!==t.maximumBufferLength&&(this.maximumBufferLength=t.maximumBufferLength,this.hlsJs.config.maxMaxBufferLength=this.maximumBufferLength)}}},{key:"handleCaptionsStateRequest",value:function(e){var t=this.videoTag;if(!(t.readyState<2))switch(e){case v.f.CAPTIONS_ON_REQUESTED:this.selectedTextTrack||(this.selectedTextTrack=Y(t.textTracks,this.language));var n=this.selectedTextTrack;if(!n)return;var i=n.kind===W;if(this.repositionedCaptionsEnabled&&i&&(q(this.selectedTextTrack,H),this.clonedTextTrack||(this.clonedTextTrack=t.addTextTrack(j,"clone"))),!this.getPlayerState().userSpecifiedCaptions&&!i)return;q(i&&this.clonedTextTrack||n,K);break;case v.f.CAPTIONS_OFF_REQUESTED:var r=this.clonedTextTrack,a=this.selectedTextTrack;if(a&&a.mode)q(a,a.kind===j?H:G);r&&q(r,G)}}},{key:"renderRotationAndScale",value:function(e,t){var n=this.videoTag,i=100,r=100,a=0,o=0,s=!1!==this.playerHandlesRotations;if(s&&(90===e||-90===e)){var c=n.parentNode||{},u=c.offsetWidth/c.offsetHeight;isFinite(u)&&(a=(100-(r=100*u))/2,o=(100-(i=100/u))/2)}n.style.width="".concat(i,"%"),n.style.height="".concat(r,"%"),n.style.top="".concat(a,"%"),n.style.left="".concat(o,"%"),s&&(t?(n.style.transform="rotate(".concat(e,"deg) scale(1.005)"),n.style.objectFit="contain"):(n.style.transform="rotate(".concat(e,"deg) scale(1.005)"),n.style.objectFit=this.objectFitVideo))}},{key:"shouldUseBitratePersistence",value:function(){return this.store.dispatch(Object(g.b)(this.playerId,Z.a))}}]),e}();function re(e){return void 0!==e.getTime?e.getTime():e}t.a=ie},992:function(e,t,n){"use strict";var i=n(8),r=n.n(i),a=n(9),o=n.n(a),s=n(13),c=n.n(s),u=n(21),d=n.n(u),l=n(23),h=n.n(l),p=n(1),f=n.n(p),v=n(0),y=n.n(v),E=n(649),m=n(594),g=n(98),T=n.n(g),_=(T.a.string,T.a.func,T.a.object,T.a.bool,T.a.number,T.a.string,T.a.oneOf(["media_entity","gif","vmap","broadcast"]),T.a.bool,T.a.object,T.a.node,T.a.shape({objectFitVideo:T.a.oneOf(m.c),playerHandlesRotations:T.a.bool}),T.a.number,T.a.bool,T.a.string,T.a.shape({getValue:T.a.func}),T.a.bool,T.a.object,T.a.bool,T.a.bool,T.a.bool,T.a.instanceOf(Date),T.a.string,T.a.bool,T.a.number,T.a.object,T.a.string,T.a.string,T.a.bool,T.a.object,T.a.string,T.a.string,T.a.func,T.a.bool,T.a.bool,T.a.object,T.a.arrayOf(T.a.shape({src:T.a.string,type:T.a.string})),T.a.object,T.a.object,T.a.oneOfType([T.a.string,T.a.number]),T.a.string,{base:{height:"100%",position:"relative",transform:"translateZ(0)",width:"100%"},wrapper:{height:"100%",position:"absolute",width:"100%"}}),b=function(e){d()(n,e);var t=h()(n);function n(e){var i;return r()(this,n),i=t.call(this,e),f()(c()(i),"_setVideoRef",(function(e){e&&i.videoPlayer.attach(e)})),f()(c()(i),"_setContainerRef",(function(e){i.containerDomElement=e})),f()(c()(i),"_renderCustomOverlay",(function(){if(i.props.customOverlay)return i.props.customOverlay})),i.videoPlayer=E.a.createPlayer({source:i.props.videoId,videoConfig:{contentId:i.props.contentId,contentType:i.props.contentType,cta:i.props.cta,durationMs:i.props.durationMs,expandedUrl:i.props.expandedUrl,eventId:i.props.eventId,mediaAvailability:i.props.mediaAvailability,publisherId:i.props.publisherId,poster:i.props.poster,loop:i.props.loop,shouldLoadTranslations:i.props.shouldLoadTranslations,variants:i.props.variants,viewCount:i.props.viewCount,vmapUrl:i.props.vmapUrl},httpClient:i.props.httpClient,twitterAuthedHttpClient:i.props.twitterAuthedHttpClient,options:{accessibilityLabel:i.props.accessibilityLabel,autoplay:i.props.autoplay,adProvider:i.props.adProvider,analytics:i.props.analytics,bitrateCap:i.props.bitrateCap,enablePiP:i.props.enablePiP,enableVideoPlayerCaptionRendering:i.props.enableVideoPlayerCaptionRendering,featureProvider:i.props.featureProvider,hlsjsVersion:i.props.hlsjsVersion,includeBroadcastEventAssociation:i.props.includeBroadcastEventAssociation,initiallyMuted:i.props.initiallyMuted,initiallyMutedCaptions:i.props.initiallyMutedCaptions,intentToPlayTime:i.props.intentToPlayTime,language:i.props.language,maxLoopCount:i.props.maxLoopCount,objectFitVideo:i.props.displayOptions.objectFitVideo,playbackSessionId:i.props.playbackSessionId,playerHandlesRotations:i.props.displayOptions.playerHandlesRotations,precache:i.props.precache,promotedContext:i.props.promotedContext,requestedTimecode:i.props.requestedTimecode,showControls:!1,showGeolocationPrompt:i.props.geolocationPrompt,shouldRetryAutoplayMuted:i.props.shouldRetryAutoplayMuted,videoEl:i.props.videoEl}}),i.props.setPlayerApi&&i.props.setPlayerApi(i.videoPlayer),i}return o()(n,[{key:"componentWillUnmount",value:function(){try{this.videoPlayer.teardown()}catch(e){}}},{key:"render",value:function(){return y.a.createElement("div",{ref:this._setContainerRef,style:_.base},y.a.createElement("div",{ref:this._setVideoRef,style:_.wrapper}),this._renderCustomOverlay())}}]),n}(y.a.PureComponent);f()(b,"defaultProps",{displayOptions:{},variants:[]}),b.propTypes={};t.a=b}}]);